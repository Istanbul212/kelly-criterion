{"ast":null,"code":"import React from 'react'; //\n\nimport { getPrimary, translate } from '../utils/Utils';\nimport useChartContext from '../utils/chartContext';\nexport default function Voronoi() {\n  var _useChartContext = useChartContext(),\n      getOptions = _useChartContext.getOptions,\n      focusedDatumState = _useChartContext.focusedDatumState;\n\n  var setFocusedDatum = focusedDatumState[1];\n\n  var _getOptions = getOptions(),\n      onFocusDatum = _getOptions.onFocusDatum,\n      onClickDatum = _getOptions.onClickDatum,\n      tooltip = _getOptions.tooltip,\n      primaryCursor = _getOptions.primaryCursor,\n      secondaryCursor = _getOptions.secondaryCursor,\n      showVoronoi = _getOptions.showVoronoi,\n      groupingMode = _getOptions.groupingMode;\n\n  var handleFocus = React.useCallback(function (datum) {\n    var _getOptions$onFocusDa, _getOptions2;\n\n    (_getOptions$onFocusDa = (_getOptions2 = getOptions()).onFocusDatum) == null ? void 0 : _getOptions$onFocusDa.call(_getOptions2, datum);\n    setFocusedDatum(datum);\n  }, [getOptions, setFocusedDatum]);\n  var needsVoronoi = onFocusDatum || onClickDatum || tooltip || primaryCursor || secondaryCursor || showVoronoi; // Don't render until we have all dependencies\n\n  if (!needsVoronoi) {\n    return null;\n  }\n\n  var props = {\n    handleFocus: handleFocus\n  };\n\n  if (groupingMode === 'primary') {\n    return /*#__PURE__*/React.createElement(PrimaryVoronoi, props);\n  }\n\n  return null; // return <ClosestVoronoi {...props} />\n}\n\nfunction PrimaryVoronoi(_ref) {\n  var handleFocus = _ref.handleFocus;\n\n  var _useChartContext2 = useChartContext(),\n      primaryAxis = _useChartContext2.primaryAxis,\n      series = _useChartContext2.series,\n      secondaryAxes = _useChartContext2.secondaryAxes,\n      getOptions = _useChartContext2.getOptions,\n      gridDimensions = _useChartContext2.gridDimensions,\n      groupedDatums = _useChartContext2.groupedDatums;\n\n  return React.useMemo(function () {\n    var columns = series[0].datums.filter(function (datum) {\n      var primaryValue = primaryAxis.getValue(datum.originalDatum);\n      return primaryValue !== 'undefined' && primaryValue !== null;\n    }).map(function (datum, i, all) {\n      var _primaryAxis$scale$ra, _groupedDatums$get;\n\n      var prev = all[i - 1];\n      var next = all[i + 1];\n      var primaryValue = primaryAxis.getValue(datum.originalDatum);\n      var primaryPx = getPrimary(datum, primaryAxis);\n      var range = (_primaryAxis$scale$ra = primaryAxis == null ? void 0 : primaryAxis.scale.range()) != null ? _primaryAxis$scale$ra : [0, 0];\n      var primaryStart = range[0],\n          primaryEnd = range[1];\n\n      if (prev) {\n        var prevPx = getPrimary(prev, primaryAxis);\n        primaryStart = primaryPx - (primaryPx - prevPx) / 2;\n      }\n\n      if (next) {\n        var nextPx = getPrimary(next, primaryAxis);\n        primaryEnd = primaryPx + (nextPx - primaryPx) / 2;\n      }\n\n      var datums = (_groupedDatums$get = groupedDatums.get(\"\" + primaryValue)) != null ? _groupedDatums$get : [];\n      datums.sort(function (a, b) {\n        var _aAxis$scale, _a$stackData, _bAxis$scale, _b$stackData;\n\n        var aAxis = secondaryAxes.find(function (d) {\n          return d.id === a.secondaryAxisId;\n        });\n        var bAxis = secondaryAxes.find(function (d) {\n          return d.id === b.secondaryAxisId;\n        });\n        var aPx = (_aAxis$scale = aAxis == null ? void 0 : aAxis.scale(aAxis.stacked ? (_a$stackData = a.stackData) == null ? void 0 : _a$stackData[1] : aAxis == null ? void 0 : aAxis.getValue(a.originalDatum))) != null ? _aAxis$scale : NaN;\n        var bPx = (_bAxis$scale = bAxis == null ? void 0 : bAxis.scale(bAxis.stacked ? (_b$stackData = b.stackData) == null ? void 0 : _b$stackData[1] : bAxis == null ? void 0 : bAxis.getValue(b.originalDatum))) != null ? _bAxis$scale : NaN;\n        return aPx - bPx;\n      });\n      return {\n        primaryStart: primaryStart,\n        primaryEnd: primaryEnd,\n        primaryPx: primaryPx,\n        datumBoundaries: datums.filter(function (datum) {\n          var secondaryAxis = secondaryAxes.find(function (d) {\n            return d.id === datum.secondaryAxisId;\n          });\n          var secondaryValue = secondaryAxis == null ? void 0 : secondaryAxis.getValue(datum.originalDatum);\n          return typeof secondaryValue !== 'undefined' && secondaryValue !== null;\n        }).map(function (datum, i, all) {\n          var _secondaryAxis$scale3, _secondaryAxis$scale$2;\n\n          var prev = all[i - 1];\n          var next = all[i + 1];\n          var secondaryAxis = secondaryAxes.find(function (d) {\n            return d.id === datum.secondaryAxisId;\n          });\n\n          if (secondaryAxis != null && secondaryAxis.stacked) {\n            var _secondaryAxis$scale$, _datum$stackData, _datum$stackData2;\n\n            var _range = (_secondaryAxis$scale$ = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$ : [0, 0];\n\n            var stackData = [(_datum$stackData = datum.stackData) == null ? void 0 : _datum$stackData[0], (_datum$stackData2 = datum.stackData) == null ? void 0 : _datum$stackData2[1]];\n\n            if (secondaryAxis != null && secondaryAxis.isVertical) {\n              _range.reverse();\n\n              stackData.reverse();\n            }\n\n            var _secondaryStart = _range[0],\n                _secondaryEnd = _range[1];\n\n            if (prev) {\n              var _secondaryAxis$scale, _stackData$;\n\n              _secondaryStart = (_secondaryAxis$scale = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$ = stackData[0]) != null ? _stackData$ : NaN)) != null ? _secondaryAxis$scale : NaN;\n            }\n\n            if (next) {\n              var _secondaryAxis$scale2, _stackData$2;\n\n              _secondaryEnd = (_secondaryAxis$scale2 = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$2 = stackData[1]) != null ? _stackData$2 : NaN)) != null ? _secondaryAxis$scale2 : NaN;\n            }\n\n            return {\n              secondaryStart: _secondaryStart,\n              secondaryEnd: _secondaryEnd,\n              datum: datum\n            };\n          }\n\n          var value = (_secondaryAxis$scale3 = secondaryAxis == null ? void 0 : secondaryAxis.scale(secondaryAxis == null ? void 0 : secondaryAxis.getValue(datum.originalDatum))) != null ? _secondaryAxis$scale3 : NaN;\n          var range = (_secondaryAxis$scale$2 = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$2 : [0, 0];\n\n          if (secondaryAxis != null && secondaryAxis.isVertical) {\n            range.reverse();\n          }\n\n          var secondaryStart = range[0],\n              secondaryEnd = range[1];\n\n          if (prev) {\n            var _prevAxis$scale;\n\n            var prevAxis = secondaryAxes.find(function (d) {\n              return d.id === (prev == null ? void 0 : prev.secondaryAxisId);\n            });\n            var prevValue = (_prevAxis$scale = prevAxis == null ? void 0 : prevAxis.scale(prevAxis == null ? void 0 : prevAxis.getValue(prev.originalDatum))) != null ? _prevAxis$scale : NaN;\n            secondaryStart = value - (value - prevValue) / 2;\n          }\n\n          if (next) {\n            var _nextAxis$scale;\n\n            var nextAxis = secondaryAxes.find(function (d) {\n              return d.id === (next == null ? void 0 : next.secondaryAxisId);\n            });\n            var nextValue = (_nextAxis$scale = nextAxis == null ? void 0 : nextAxis.scale(nextAxis == null ? void 0 : nextAxis.getValue(next.originalDatum))) != null ? _nextAxis$scale : NaN;\n            secondaryEnd = value + (nextValue - value) / 2;\n          }\n\n          return {\n            secondaryStart: secondaryStart,\n            secondaryEnd: secondaryEnd,\n            datum: datum\n          };\n        })\n      };\n    });\n    return /*#__PURE__*/React.createElement(\"g\", {\n      onMouseLeave: function onMouseLeave() {\n        return handleFocus(null);\n      },\n      style: {\n        transform: translate(gridDimensions.gridX, gridDimensions.gridY)\n      }\n    }, columns.map(function (column) {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        key: column.primaryPx\n      }, column.datumBoundaries.map(function (datumBoundary) {\n        var x1 = !primaryAxis.isVertical ? column.primaryStart : datumBoundary.secondaryStart;\n        var x2 = !primaryAxis.isVertical ? column.primaryEnd : datumBoundary.secondaryEnd;\n        var y1 = !primaryAxis.isVertical ? datumBoundary.secondaryStart : column.primaryStart;\n        var y2 = !primaryAxis.isVertical ? datumBoundary.secondaryEnd : column.primaryEnd;\n        var x = Math.min(x1, x2);\n        var y = Math.min(y1, y2);\n        var xEnd = Math.max(x1, x2);\n        var yEnd = Math.max(y1, y2);\n        var height = Math.max(yEnd - y, 0);\n        var width = Math.max(xEnd - x, 0);\n        return /*#__PURE__*/React.createElement(\"rect\", {\n          key: column.primaryPx + \"_\" + datumBoundary.datum.seriesIndex,\n          x: x,\n          y: y,\n          width: width,\n          height: height,\n          className: 'action-voronoi',\n          onMouseEnter: function onMouseEnter() {\n            return handleFocus(datumBoundary.datum);\n          },\n          style: {\n            fill: getOptions().dark ? '#ffffff33' : 'rgba(0,0,0,0.2)',\n            strokeWidth: 1,\n            stroke: getOptions().dark ? 'white' : 'black',\n            opacity: getOptions().showVoronoi ? 1 : 0\n          }\n        });\n      }));\n    }));\n  }, [getOptions, gridDimensions.gridX, gridDimensions.gridY, groupedDatums, handleFocus, primaryAxis, secondaryAxes, series]);\n} // function ClosestVoronoi({\n//   stackData,\n//   extent,\n//   handleFocus,\n//   showVoronoi,\n// }: {\n//   stackData: Series[]\n//   extent: number[][]\n//   handleFocus: (datum: Datum | null) => void\n//   showVoronoi: boolean\n// }) {\n//   let polygons = null\n//   const voronoiData: { x: number; y: number; datum: Datum }[] = []\n//   stackData.forEach(series => {\n//     series.datums\n//       .filter(d => d.defined)\n//       .forEach(datum => {\n//         datum.boundingPoints.forEach(boundingPoint => {\n//           if (\n//             typeof datum.x !== 'number' ||\n//             typeof datum.y !== 'number' ||\n//             Number.isNaN(datum.y) ||\n//             Number.isNaN(datum.x)\n//           ) {\n//             return\n//           }\n//           voronoiData.push({\n//             x: boundingPoint.x,\n//             y: boundingPoint.y,\n//             datum,\n//           })\n//         })\n//       })\n//   })\n//   const delaunay = Delaunay.from(\n//     voronoiData,\n//     d => Math.max(d.x, 0),\n//     d => Math.max(d.y, 0)\n//   )\n//   const flatExtent = extent.flat().map(d => Math.max(d, 0))\n//   const voronoi = delaunay.voronoi(flatExtent)\n//   polygons = voronoi.cellPolygons()\n//   polygons = Array.from(polygons)\n//   return (\n//     <g>\n//       {polygons.map((points, i) => {\n//         const index = points.index\n//         const datum = voronoiData[index].datum\n//         const path = lineFn(points as any) || undefined\n//         return (\n//           <Path\n//             key={i}\n//             d={path}\n//             className=\"action-voronoi\"\n//             onMouseEnter={() => handleFocus(datum)}\n//             onMouseLeave={() => handleFocus(null)}\n//             style={{\n//               fill: randomFill(),\n//               opacity: showVoronoi ? 1 : 0,\n//             }}\n//           />\n//         )\n//       })}\n//     </g>\n//   )\n// }","map":{"version":3,"sources":["/Users/samerkadih/Desktop/Coding/Personal/React/kelly-criterion/node_modules/react-charts/es/components/Voronoi.js"],"names":["React","getPrimary","translate","useChartContext","Voronoi","_useChartContext","getOptions","focusedDatumState","setFocusedDatum","_getOptions","onFocusDatum","onClickDatum","tooltip","primaryCursor","secondaryCursor","showVoronoi","groupingMode","handleFocus","useCallback","datum","_getOptions$onFocusDa","_getOptions2","call","needsVoronoi","props","createElement","PrimaryVoronoi","_ref","_useChartContext2","primaryAxis","series","secondaryAxes","gridDimensions","groupedDatums","useMemo","columns","datums","filter","primaryValue","getValue","originalDatum","map","i","all","_primaryAxis$scale$ra","_groupedDatums$get","prev","next","primaryPx","range","scale","primaryStart","primaryEnd","prevPx","nextPx","get","sort","a","b","_aAxis$scale","_a$stackData","_bAxis$scale","_b$stackData","aAxis","find","d","id","secondaryAxisId","bAxis","aPx","stacked","stackData","NaN","bPx","datumBoundaries","secondaryAxis","secondaryValue","_secondaryAxis$scale3","_secondaryAxis$scale$2","_secondaryAxis$scale$","_datum$stackData","_datum$stackData2","_range","isVertical","reverse","_secondaryStart","_secondaryEnd","_secondaryAxis$scale","_stackData$","_secondaryAxis$scale2","_stackData$2","secondaryStart","secondaryEnd","value","_prevAxis$scale","prevAxis","prevValue","_nextAxis$scale","nextAxis","nextValue","onMouseLeave","style","transform","gridX","gridY","column","Fragment","key","datumBoundary","x1","x2","y1","y2","x","Math","min","y","xEnd","max","yEnd","height","width","seriesIndex","className","onMouseEnter","fill","dark","strokeWidth","stroke","opacity"],"mappings":"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","sourcesContent":["import React from 'react'; //\n\nimport { getPrimary, translate } from '../utils/Utils';\nimport useChartContext from '../utils/chartContext';\nexport default function Voronoi() {\n  var _useChartContext = useChartContext(),\n      getOptions = _useChartContext.getOptions,\n      focusedDatumState = _useChartContext.focusedDatumState;\n\n  var setFocusedDatum = focusedDatumState[1];\n\n  var _getOptions = getOptions(),\n      onFocusDatum = _getOptions.onFocusDatum,\n      onClickDatum = _getOptions.onClickDatum,\n      tooltip = _getOptions.tooltip,\n      primaryCursor = _getOptions.primaryCursor,\n      secondaryCursor = _getOptions.secondaryCursor,\n      showVoronoi = _getOptions.showVoronoi,\n      groupingMode = _getOptions.groupingMode;\n\n  var handleFocus = React.useCallback(function (datum) {\n    var _getOptions$onFocusDa, _getOptions2;\n\n    (_getOptions$onFocusDa = (_getOptions2 = getOptions()).onFocusDatum) == null ? void 0 : _getOptions$onFocusDa.call(_getOptions2, datum);\n    setFocusedDatum(datum);\n  }, [getOptions, setFocusedDatum]);\n  var needsVoronoi = onFocusDatum || onClickDatum || tooltip || primaryCursor || secondaryCursor || showVoronoi; // Don't render until we have all dependencies\n\n  if (!needsVoronoi) {\n    return null;\n  }\n\n  var props = {\n    handleFocus: handleFocus\n  };\n\n  if (groupingMode === 'primary') {\n    return /*#__PURE__*/React.createElement(PrimaryVoronoi, props);\n  }\n\n  return null; // return <ClosestVoronoi {...props} />\n}\n\nfunction PrimaryVoronoi(_ref) {\n  var handleFocus = _ref.handleFocus;\n\n  var _useChartContext2 = useChartContext(),\n      primaryAxis = _useChartContext2.primaryAxis,\n      series = _useChartContext2.series,\n      secondaryAxes = _useChartContext2.secondaryAxes,\n      getOptions = _useChartContext2.getOptions,\n      gridDimensions = _useChartContext2.gridDimensions,\n      groupedDatums = _useChartContext2.groupedDatums;\n\n  return React.useMemo(function () {\n    var columns = series[0].datums.filter(function (datum) {\n      var primaryValue = primaryAxis.getValue(datum.originalDatum);\n      return primaryValue !== 'undefined' && primaryValue !== null;\n    }).map(function (datum, i, all) {\n      var _primaryAxis$scale$ra, _groupedDatums$get;\n\n      var prev = all[i - 1];\n      var next = all[i + 1];\n      var primaryValue = primaryAxis.getValue(datum.originalDatum);\n      var primaryPx = getPrimary(datum, primaryAxis);\n      var range = (_primaryAxis$scale$ra = primaryAxis == null ? void 0 : primaryAxis.scale.range()) != null ? _primaryAxis$scale$ra : [0, 0];\n      var primaryStart = range[0],\n          primaryEnd = range[1];\n\n      if (prev) {\n        var prevPx = getPrimary(prev, primaryAxis);\n        primaryStart = primaryPx - (primaryPx - prevPx) / 2;\n      }\n\n      if (next) {\n        var nextPx = getPrimary(next, primaryAxis);\n        primaryEnd = primaryPx + (nextPx - primaryPx) / 2;\n      }\n\n      var datums = (_groupedDatums$get = groupedDatums.get(\"\" + primaryValue)) != null ? _groupedDatums$get : [];\n      datums.sort(function (a, b) {\n        var _aAxis$scale, _a$stackData, _bAxis$scale, _b$stackData;\n\n        var aAxis = secondaryAxes.find(function (d) {\n          return d.id === a.secondaryAxisId;\n        });\n        var bAxis = secondaryAxes.find(function (d) {\n          return d.id === b.secondaryAxisId;\n        });\n        var aPx = (_aAxis$scale = aAxis == null ? void 0 : aAxis.scale(aAxis.stacked ? (_a$stackData = a.stackData) == null ? void 0 : _a$stackData[1] : aAxis == null ? void 0 : aAxis.getValue(a.originalDatum))) != null ? _aAxis$scale : NaN;\n        var bPx = (_bAxis$scale = bAxis == null ? void 0 : bAxis.scale(bAxis.stacked ? (_b$stackData = b.stackData) == null ? void 0 : _b$stackData[1] : bAxis == null ? void 0 : bAxis.getValue(b.originalDatum))) != null ? _bAxis$scale : NaN;\n        return aPx - bPx;\n      });\n      return {\n        primaryStart: primaryStart,\n        primaryEnd: primaryEnd,\n        primaryPx: primaryPx,\n        datumBoundaries: datums.filter(function (datum) {\n          var secondaryAxis = secondaryAxes.find(function (d) {\n            return d.id === datum.secondaryAxisId;\n          });\n          var secondaryValue = secondaryAxis == null ? void 0 : secondaryAxis.getValue(datum.originalDatum);\n          return typeof secondaryValue !== 'undefined' && secondaryValue !== null;\n        }).map(function (datum, i, all) {\n          var _secondaryAxis$scale3, _secondaryAxis$scale$2;\n\n          var prev = all[i - 1];\n          var next = all[i + 1];\n          var secondaryAxis = secondaryAxes.find(function (d) {\n            return d.id === datum.secondaryAxisId;\n          });\n\n          if (secondaryAxis != null && secondaryAxis.stacked) {\n            var _secondaryAxis$scale$, _datum$stackData, _datum$stackData2;\n\n            var _range = (_secondaryAxis$scale$ = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$ : [0, 0];\n\n            var stackData = [(_datum$stackData = datum.stackData) == null ? void 0 : _datum$stackData[0], (_datum$stackData2 = datum.stackData) == null ? void 0 : _datum$stackData2[1]];\n\n            if (secondaryAxis != null && secondaryAxis.isVertical) {\n              _range.reverse();\n\n              stackData.reverse();\n            }\n\n            var _secondaryStart = _range[0],\n                _secondaryEnd = _range[1];\n\n            if (prev) {\n              var _secondaryAxis$scale, _stackData$;\n\n              _secondaryStart = (_secondaryAxis$scale = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$ = stackData[0]) != null ? _stackData$ : NaN)) != null ? _secondaryAxis$scale : NaN;\n            }\n\n            if (next) {\n              var _secondaryAxis$scale2, _stackData$2;\n\n              _secondaryEnd = (_secondaryAxis$scale2 = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$2 = stackData[1]) != null ? _stackData$2 : NaN)) != null ? _secondaryAxis$scale2 : NaN;\n            }\n\n            return {\n              secondaryStart: _secondaryStart,\n              secondaryEnd: _secondaryEnd,\n              datum: datum\n            };\n          }\n\n          var value = (_secondaryAxis$scale3 = secondaryAxis == null ? void 0 : secondaryAxis.scale(secondaryAxis == null ? void 0 : secondaryAxis.getValue(datum.originalDatum))) != null ? _secondaryAxis$scale3 : NaN;\n          var range = (_secondaryAxis$scale$2 = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$2 : [0, 0];\n\n          if (secondaryAxis != null && secondaryAxis.isVertical) {\n            range.reverse();\n          }\n\n          var secondaryStart = range[0],\n              secondaryEnd = range[1];\n\n          if (prev) {\n            var _prevAxis$scale;\n\n            var prevAxis = secondaryAxes.find(function (d) {\n              return d.id === (prev == null ? void 0 : prev.secondaryAxisId);\n            });\n            var prevValue = (_prevAxis$scale = prevAxis == null ? void 0 : prevAxis.scale(prevAxis == null ? void 0 : prevAxis.getValue(prev.originalDatum))) != null ? _prevAxis$scale : NaN;\n            secondaryStart = value - (value - prevValue) / 2;\n          }\n\n          if (next) {\n            var _nextAxis$scale;\n\n            var nextAxis = secondaryAxes.find(function (d) {\n              return d.id === (next == null ? void 0 : next.secondaryAxisId);\n            });\n            var nextValue = (_nextAxis$scale = nextAxis == null ? void 0 : nextAxis.scale(nextAxis == null ? void 0 : nextAxis.getValue(next.originalDatum))) != null ? _nextAxis$scale : NaN;\n            secondaryEnd = value + (nextValue - value) / 2;\n          }\n\n          return {\n            secondaryStart: secondaryStart,\n            secondaryEnd: secondaryEnd,\n            datum: datum\n          };\n        })\n      };\n    });\n    return /*#__PURE__*/React.createElement(\"g\", {\n      onMouseLeave: function onMouseLeave() {\n        return handleFocus(null);\n      },\n      style: {\n        transform: translate(gridDimensions.gridX, gridDimensions.gridY)\n      }\n    }, columns.map(function (column) {\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        key: column.primaryPx\n      }, column.datumBoundaries.map(function (datumBoundary) {\n        var x1 = !primaryAxis.isVertical ? column.primaryStart : datumBoundary.secondaryStart;\n        var x2 = !primaryAxis.isVertical ? column.primaryEnd : datumBoundary.secondaryEnd;\n        var y1 = !primaryAxis.isVertical ? datumBoundary.secondaryStart : column.primaryStart;\n        var y2 = !primaryAxis.isVertical ? datumBoundary.secondaryEnd : column.primaryEnd;\n        var x = Math.min(x1, x2);\n        var y = Math.min(y1, y2);\n        var xEnd = Math.max(x1, x2);\n        var yEnd = Math.max(y1, y2);\n        var height = Math.max(yEnd - y, 0);\n        var width = Math.max(xEnd - x, 0);\n        return /*#__PURE__*/React.createElement(\"rect\", {\n          key: column.primaryPx + \"_\" + datumBoundary.datum.seriesIndex,\n          x: x,\n          y: y,\n          width: width,\n          height: height,\n          className: 'action-voronoi',\n          onMouseEnter: function onMouseEnter() {\n            return handleFocus(datumBoundary.datum);\n          },\n          style: {\n            fill: getOptions().dark ? '#ffffff33' : 'rgba(0,0,0,0.2)',\n            strokeWidth: 1,\n            stroke: getOptions().dark ? 'white' : 'black',\n            opacity: getOptions().showVoronoi ? 1 : 0\n          }\n        });\n      }));\n    }));\n  }, [getOptions, gridDimensions.gridX, gridDimensions.gridY, groupedDatums, handleFocus, primaryAxis, secondaryAxes, series]);\n} // function ClosestVoronoi({\n//   stackData,\n//   extent,\n//   handleFocus,\n//   showVoronoi,\n// }: {\n//   stackData: Series[]\n//   extent: number[][]\n//   handleFocus: (datum: Datum | null) => void\n//   showVoronoi: boolean\n// }) {\n//   let polygons = null\n//   const voronoiData: { x: number; y: number; datum: Datum }[] = []\n//   stackData.forEach(series => {\n//     series.datums\n//       .filter(d => d.defined)\n//       .forEach(datum => {\n//         datum.boundingPoints.forEach(boundingPoint => {\n//           if (\n//             typeof datum.x !== 'number' ||\n//             typeof datum.y !== 'number' ||\n//             Number.isNaN(datum.y) ||\n//             Number.isNaN(datum.x)\n//           ) {\n//             return\n//           }\n//           voronoiData.push({\n//             x: boundingPoint.x,\n//             y: boundingPoint.y,\n//             datum,\n//           })\n//         })\n//       })\n//   })\n//   const delaunay = Delaunay.from(\n//     voronoiData,\n//     d => Math.max(d.x, 0),\n//     d => Math.max(d.y, 0)\n//   )\n//   const flatExtent = extent.flat().map(d => Math.max(d, 0))\n//   const voronoi = delaunay.voronoi(flatExtent)\n//   polygons = voronoi.cellPolygons()\n//   polygons = Array.from(polygons)\n//   return (\n//     <g>\n//       {polygons.map((points, i) => {\n//         const index = points.index\n//         const datum = voronoiData[index].datum\n//         const path = lineFn(points as any) || undefined\n//         return (\n//           <Path\n//             key={i}\n//             d={path}\n//             className=\"action-voronoi\"\n//             onMouseEnter={() => handleFocus(datum)}\n//             onMouseLeave={() => handleFocus(null)}\n//             style={{\n//               fill: randomFill(),\n//               opacity: showVoronoi ? 1 : 0,\n//             }}\n//           />\n//         )\n//       })}\n//     </g>\n//   )\n// }"]},"metadata":{},"sourceType":"module"}