{"ast":null,"code":"import _toConsumableArray from\"/Users/samerkadih/Desktop/Coding/Personal/React/kelly-criterion/kelly-criterion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/samerkadih/Desktop/Coding/Personal/React/kelly-criterion/kelly-criterion/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import classes from\"./Game.module.css\";import Graph from\"../components/Graph\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function getRandomInt(min,max){min=Math.ceil(min);max=Math.floor(max);return Math.floor(Math.random()*(max-min)+min);//The maximum is exclusive and the minimum is inclusive\n}function GetZPercent(z){// z == number of standard deviations from the mean\n// if z is greater than 6.5 standard deviations from the mean the\n// number of significant digits will be outside of a reasonable range\nif(z<-6.5){return 0.0;}if(z>6.5){return 1.0;}var factK=1;var sum=0;var term=1;var k=0;var loopStop=Math.exp(-23);while(Math.abs(term)>loopStop){term=0.3989422804*Math.pow(-1,k)*Math.pow(z,k)/(2*k+1)/Math.pow(2,k)*Math.pow(z,k+1)/factK;sum+=term;k++;factK*=k;}sum+=0.5;return sum;}function Game(){var _useState=useState(100),_useState2=_slicedToArray(_useState,2),score=_useState2[0],setScore=_useState2[1];var _useState3=useState(100),_useState4=_slicedToArray(_useState3,2),kellyScore=_useState4[0],setKellyScore=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),text=_useState6[0],setText=_useState6[1];var _useParams=useParams(),difficulty=_useParams.difficulty,time=_useParams.time;var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),lowerB=_useState8[0],setLowerB=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),upperB=_useState10[0],setUpperB=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),questionBounds=_useState12[0],setQuestionBounds=_useState12[1];var _useState13=useState(function(){var qT=getRandomInt(0,3);if(qT===0){var lowQB;var upQB;if(difficulty===\"casual\"){lowQB=getRandomInt(1,101);upQB=getRandomInt(1,101);}else if(difficulty===\"practical\"){lowQB=getRandomInt(1,501);upQB=getRandomInt(1,501);}else{lowQB=getRandomInt(1,1001);upQB=getRandomInt(1,1001);}setQuestionBounds([Math.min(lowQB,upQB),Math.max(lowQB,upQB)]);var lowB=getRandomInt(lowQB,upQB+1);var upB=getRandomInt(lowQB,upQB+1);setLowerB(Math.min(lowB,upB));setUpperB(Math.max(lowB,upB));}else if(qT===1){var QB;if(difficulty===\"casual\"){QB=getRandomInt(1,3);}else if(difficulty===\"practical\"){QB=getRandomInt(3,6);}else{QB=getRandomInt(6,101);}setQuestionBounds(QB);var _lowB=getRandomInt(QB,6*QB+1);var _upB=getRandomInt(QB,6*QB+1);setLowerB(Math.min(_lowB,_upB));setUpperB(Math.max(_lowB,_upB));}else{var _QB;if(difficulty===\"casual\"){_QB=getRandomInt(1,3);}else if(difficulty===\"practical\"){_QB=getRandomInt(3,6);}else{_QB=getRandomInt(6,101);}setQuestionBounds(_QB);var _lowB2=getRandomInt(0,_QB+1);var _upB2=getRandomInt(0,_QB+1);setLowerB(Math.min(_lowB2,_upB2));setUpperB(Math.max(_lowB2,_upB2));}return qT;}),_useState14=_slicedToArray(_useState13,2),questionType=_useState14[0],setQuestionType=_useState14[1];var _useState15=useState(function(){return 5*getRandomInt(19,31);}),_useState16=_slicedToArray(_useState15,2),wO=_useState16[0],setWO=_useState16[1];var _useState17=useState(function(){if(difficulty===\"casual\"){return 100;}else{return 5*getRandomInt(16,21);}}),_useState18=_slicedToArray(_useState17,2),lO=_useState18[0],setLO=_useState18[1];var _useState19=useState(1),_useState20=_slicedToArray(_useState19,2),round=_useState20[0],setRound=_useState20[1];var _useState21=useState(time),_useState22=_slicedToArray(_useState21,2),timer=_useState22[0],setTimer=_useState22[1];var _useState23=useState([[0,100]]),_useState24=_slicedToArray(_useState23,2),scoreHistory=_useState24[0],setScoreHistory=_useState24[1];var _useState25=useState([[0,100]]),_useState26=_slicedToArray(_useState25,2),kellyScoreHistory=_useState26[0],setKellyScoreHistory=_useState26[1];var _useState27=useState(0),_useState28=_slicedToArray(_useState27,2),answer=_useState28[0],setAnswer=_useState28[1];var _useState29=useState(0),_useState30=_slicedToArray(_useState29,2),delta=_useState30[0],setDelta=_useState30[1];var _useState31=useState(0),_useState32=_slicedToArray(_useState31,2),kellyDelta=_useState32[0],setKellyDelta=_useState32[1];var DCDF=[[0,0.167,0.333,0.5,0.667,0.833,1],[0,0,0.0278,0.0833,0.167,0.2778,0.4167,0.583,0.722,0.833,0.917,0.972,1],[0,0,0,0.00463,0.0185,0.0463,0.0926,0.162,0.259,0.375,0.5,0.625,0.741,0.838,0.907,0.954,0.981,0.995,1],[0,0,0,0,1/1296,5/1296,15/1296,35/1296,70/1296,126/1296,206/1296,310/1296,435/1296,575/1296,721/1296,861/1296,986/1296,1090/1296,1170/1296,1226/1296,1261/1296,1281/1296,1291/1296,1295/1296,1],[0,0,0,0,0,1/7776,6/7776,21/7776,56/7776,126/7776,252/7776,457/7776,762/7776,1182/7776,1722/7776,2373/7776,3108/7776,3888/7776,4668/7776,5403/7776,6054/7776,6594/7776,7014/7776,7319/7776,7524/7776,7650/7776,7720/7776,7755/7776,7770/7776,7775/7776,1]];var CCDF=[[0,0.5,1],[0,0.25,0.75,1],[0,0.125,0.5,0.875,1],[0,0.0625,0.3125,0.6875,0.9375,1],[0,0.03125,0.1875,0.5,0.8125,0.96875,1]];var roundInterval;useEffect(function(){roundInterval=setInterval(function(){if(timer>0){setTimer(timer-1);}if(timer===0){handleRound(0);}},1000);return function(){clearInterval(roundInterval);};},[timer]);var redistributeWealth=function redistributeWealth(wager){var nAnswer=0;var p=0;if(questionType===0){p=(upperB-lowerB+1)/(questionBounds[1]-questionBounds[0]+1);nAnswer=getRandomInt(questionBounds[0],questionBounds[1]+1);}else if(questionType===1){if(questionBounds<=5){p=DCDF[questionBounds-1][upperB]-DCDF[questionBounds-1][lowerB-1];}else{p=GetZPercent((upperB-3.5*questionBounds)/Math.sqrt(35/12*questionBounds))-GetZPercent((lowerB-3.5*questionBounds)/Math.sqrt(35/12*questionBounds));}for(var i=0;i<questionBounds;i++){nAnswer+=getRandomInt(1,7);}}else{if(questionBounds<=5){p=CCDF[questionBounds-1][upperB+1]-CCDF[questionBounds-1][lowerB];}else{p=GetZPercent((upperB-0.5*questionBounds)/Math.sqrt(0.5*0.5*questionBounds))-GetZPercent((lowerB-0.5*questionBounds)/Math.sqrt(0.5*0.5*questionBounds));}for(var i=0;i<questionBounds;i++){nAnswer+=getRandomInt(0,2);}}setAnswer(nAnswer);var kellyWager=Math.max(0,Math.floor((p/(lO/100)-(1-p)/(wO/100))*kellyScore));kellyWager=Math.min(kellyWager,kellyScore);if(nAnswer>=lowerB&&nAnswer<=upperB){setKellyDelta(Math.round(kellyWager*wO/100));setKellyScore(function(){setKellyScoreHistory([].concat(_toConsumableArray(kellyScoreHistory),[[round,kellyScore+Math.round(kellyWager*wO/100)]]));return kellyScore+Math.round(kellyWager*wO/100);});setDelta(Math.round(wager*wO/100));setScore(function(){setScoreHistory([].concat(_toConsumableArray(scoreHistory),[[round,score+Math.round(wager*wO/100)]]));return score+Math.round(wager*wO/100);});}else{setKellyDelta(-1*Math.round(kellyWager*lO/100));setKellyScore(function(){setKellyScoreHistory([].concat(_toConsumableArray(kellyScoreHistory),[[round,kellyScore-Math.round(kellyWager*lO/100)]]));return kellyScore-Math.round(kellyWager*lO/100);});setDelta(-1*Math.round(wager*lO/100));setScore(function(){setScoreHistory([].concat(_toConsumableArray(scoreHistory),[[round,score-Math.round(wager*lO/100)]]));if(score===Math.round(wager*lO/100)){setRound(Math.floor(300/time)+1);}return score-Math.round(wager*lO/100);});}};var handleRound=function handleRound(wager){if(round<=Math.floor(300/time)){setTimer(time);redistributeWealth(wager);setRound(round+1);var qT=getRandomInt(0,3);if(qT===0){var lowQB;var upQB;if(difficulty===\"casual\"){lowQB=getRandomInt(1,101);upQB=getRandomInt(1,101);}else if(difficulty===\"practical\"){lowQB=getRandomInt(1,501);upQB=getRandomInt(1,501);}else{lowQB=getRandomInt(1,1001);upQB=getRandomInt(1,1001);}var lowB=getRandomInt(lowQB,upQB+1);var upB=getRandomInt(lowQB,upQB+1);setQuestionBounds([Math.min(lowQB,upQB),Math.max(lowQB,upQB)]);setLowerB(Math.min(lowB,upB));setUpperB(Math.max(lowB,upB));}else if(qT===1){var QB;if(difficulty===\"casual\"){QB=getRandomInt(1,3);}else if(difficulty===\"practical\"){QB=getRandomInt(3,6);}else{QB=getRandomInt(6,101);}var _lowB3=getRandomInt(QB,6*QB+1);var _upB3=getRandomInt(QB,6*QB+1);setQuestionBounds(QB);setLowerB(Math.min(_lowB3,_upB3));setUpperB(Math.max(_lowB3,_upB3));}else{var _QB2;if(difficulty===\"casual\"){_QB2=getRandomInt(1,3);}else if(difficulty===\"practical\"){_QB2=getRandomInt(3,6);}else{_QB2=getRandomInt(6,101);}var _lowB4=getRandomInt(0,_QB2+1);var _upB4=getRandomInt(0,_QB2+1);setQuestionBounds(_QB2);setLowerB(Math.min(_lowB4,_upB4));setUpperB(Math.max(_lowB4,_upB4));}setQuestionType(qT);var wOP=getRandomInt(19,31);var lOP=getRandomInt(16,21);setWO(5*wOP);setLO(function(){if(difficulty===\"casual\"){return 100;}else{return 5*lOP;}});setText(\"\");}else{setTimer(-1);}};var ensureValidInput=function ensureValidInput(e){var re=/^[0-9]+$/;if(e.target.value===\"\"||re.test(e.target.value)){setText(e.target.value);}};var checkUserInput=function checkUserInput(e){if(e.key===\"Enter\"&&text!==\"\"&&text>=0&&text<=score){handleRound(parseInt(text));}};return/*#__PURE__*/_jsxs(\"div\",{children:[function(){if(round<=Math.floor(300/time)){return/*#__PURE__*/_jsxs(\"div\",{className:classes.remaining,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.round,children:[\"Round: \",round]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.timer,children:[\"Time: \",timer]})]});}return/*#__PURE__*/_jsx(\"div\",{className:classes.remaining,children:/*#__PURE__*/_jsx(\"div\",{children:\"Game Over\"})});}(),/*#__PURE__*/_jsxs(\"div\",{className:classes.question,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.questionType,children:function(){if(questionType===0){return\"Uniform Random Variable between \"+questionBounds[0]+\" and \"+questionBounds[1];}else if(questionType===1){return\"Rolling \"+questionBounds+(questionBounds===1?\" die\":\" dice\");}else{return\"Flipping \"+questionBounds+(questionBounds===1?\" quarter\":\" quarters\");}}()}),/*#__PURE__*/_jsxs(\"div\",{className:classes.odds,children:[\"W/L Odds: \",wO,\"%, \",lO,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:classes.questionText,children:function(){if(questionType===0){return\"Landing between \"+lowerB+\" and \"+upperB+\" inclusive\";}else if(questionType===1){return(questionBounds===1?\"Value between \":\"Sum of values between \")+lowerB+\" and \"+upperB+\" inclusive\";}else{return\"Landing between \"+lowerB+\" and \"+upperB+\" heads\";}}()}),/*#__PURE__*/_jsxs(\"div\",{className:classes.delta,children:[/*#__PURE__*/_jsx(\"div\",{children:delta>=0?\"+\"+delta:delta}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Landed Value: \",answer]}),/*#__PURE__*/_jsx(\"div\",{children:kellyDelta>=0?\"+\"+kellyDelta:kellyDelta})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.terminal,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.score,children:score}),/*#__PURE__*/_jsx(\"input\",{value:text,onKeyDown:checkUserInput,onChange:ensureValidInput,placeholder:\"Bet amount\"}),/*#__PURE__*/_jsx(\"div\",{className:classes.score,children:kellyScore})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.results,children:/*#__PURE__*/_jsx(Graph,{history:scoreHistory,kellyHistory:kellyScoreHistory},round)})]});}export default Game;","map":{"version":3,"sources":["/Users/samerkadih/Desktop/Coding/Personal/React/kelly-criterion/kelly-criterion/src/pages/Game.js"],"names":["useState","useEffect","useParams","classes","Graph","getRandomInt","min","max","Math","ceil","floor","random","GetZPercent","z","factK","sum","term","k","loopStop","exp","abs","pow","Game","score","setScore","kellyScore","setKellyScore","text","setText","difficulty","time","lowerB","setLowerB","upperB","setUpperB","questionBounds","setQuestionBounds","qT","lowQB","upQB","lowB","upB","QB","questionType","setQuestionType","wO","setWO","lO","setLO","round","setRound","timer","setTimer","scoreHistory","setScoreHistory","kellyScoreHistory","setKellyScoreHistory","answer","setAnswer","delta","setDelta","kellyDelta","setKellyDelta","DCDF","CCDF","roundInterval","setInterval","handleRound","clearInterval","redistributeWealth","wager","nAnswer","p","sqrt","i","kellyWager","wOP","lOP","ensureValidInput","e","re","target","value","test","checkUserInput","key","parseInt","remaining","question","odds","questionText","terminal","results"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport classes from \"./Game.module.css\";\nimport Graph from \"../components/Graph\";\n\nfunction getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive\n}\n\nfunction GetZPercent(z) {\n  // z == number of standard deviations from the mean\n\n  // if z is greater than 6.5 standard deviations from the mean the\n  // number of significant digits will be outside of a reasonable range\n\n  if (z < -6.5) {\n    return 0.0;\n  }\n\n  if (z > 6.5) {\n    return 1.0;\n  }\n\n  var factK = 1;\n  var sum = 0;\n  var term = 1;\n  var k = 0;\n  var loopStop = Math.exp(-23);\n\n  while (Math.abs(term) > loopStop) {\n    term =\n      (((0.3989422804 * Math.pow(-1, k) * Math.pow(z, k)) /\n        (2 * k + 1) /\n        Math.pow(2, k)) *\n        Math.pow(z, k + 1)) /\n      factK;\n    sum += term;\n    k++;\n    factK *= k;\n  }\n\n  sum += 0.5;\n\n  return sum;\n}\n\nfunction Game() {\n  const [score, setScore] = useState(100);\n  const [kellyScore, setKellyScore] = useState(100);\n  const [text, setText] = useState(\"\");\n  const { difficulty, time } = useParams();\n\n  const [lowerB, setLowerB] = useState(0);\n  const [upperB, setUpperB] = useState(0);\n  const [questionBounds, setQuestionBounds] = useState(0);\n  const [questionType, setQuestionType] = useState(() => {\n    let qT = getRandomInt(0, 3);\n    if (qT === 0) {\n      let lowQB;\n      let upQB;\n      if (difficulty === \"casual\") {\n        lowQB = getRandomInt(1, 101);\n        upQB = getRandomInt(1, 101);\n      } else if (difficulty === \"practical\") {\n        lowQB = getRandomInt(1, 501);\n        upQB = getRandomInt(1, 501);\n      } else {\n        lowQB = getRandomInt(1, 1001);\n        upQB = getRandomInt(1, 1001);\n      }\n      setQuestionBounds([Math.min(lowQB, upQB), Math.max(lowQB, upQB)]);\n      let lowB = getRandomInt(lowQB, upQB + 1);\n      let upB = getRandomInt(lowQB, upQB + 1);\n      setLowerB(Math.min(lowB, upB));\n      setUpperB(Math.max(lowB, upB));\n    } else if (qT === 1) {\n      let QB;\n      if (difficulty === \"casual\") {\n        QB = getRandomInt(1, 3);\n      } else if (difficulty === \"practical\") {\n        QB = getRandomInt(3, 6);\n      } else {\n        QB = getRandomInt(6, 101);\n      }\n      setQuestionBounds(QB);\n      let lowB = getRandomInt(QB, 6 * QB + 1);\n      let upB = getRandomInt(QB, 6 * QB + 1);\n      setLowerB(Math.min(lowB, upB));\n      setUpperB(Math.max(lowB, upB));\n    } else {\n      let QB;\n      if (difficulty === \"casual\") {\n        QB = getRandomInt(1, 3);\n      } else if (difficulty === \"practical\") {\n        QB = getRandomInt(3, 6);\n      } else {\n        QB = getRandomInt(6, 101);\n      }\n      setQuestionBounds(QB);\n      let lowB = getRandomInt(0, QB + 1);\n      let upB = getRandomInt(0, QB + 1);\n      setLowerB(Math.min(lowB, upB));\n      setUpperB(Math.max(lowB, upB));\n    }\n    return qT;\n  });\n\n  const [wO, setWO] = useState(() => {\n    return 5 * getRandomInt(19, 31);\n  });\n  const [lO, setLO] = useState(() => {\n    if (difficulty === \"casual\") {\n      return 100;\n    } else {\n      return 5 * getRandomInt(16, 21);\n    }\n  });\n\n  const [round, setRound] = useState(1);\n  const [timer, setTimer] = useState(time);\n  const [scoreHistory, setScoreHistory] = useState([[0, 100]]);\n  const [kellyScoreHistory, setKellyScoreHistory] = useState([[0, 100]]);\n\n  const [answer, setAnswer] = useState(0);\n  const [delta, setDelta] = useState(0);\n  const [kellyDelta, setKellyDelta] = useState(0);\n\n  let DCDF = [\n    [0, 0.167, 0.333, 0.5, 0.667, 0.833, 1],\n    [\n      0, 0, 0.0278, 0.0833, 0.167, 0.2778, 0.4167, 0.583, 0.722, 0.833, 0.917,\n      0.972, 1,\n    ],\n    [\n      0, 0, 0, 0.00463, 0.0185, 0.0463, 0.0926, 0.162, 0.259, 0.375, 0.5, 0.625,\n      0.741, 0.838, 0.907, 0.954, 0.981, 0.995, 1,\n    ],\n    [\n      0,\n      0,\n      0,\n      0,\n      1 / 1296,\n      5 / 1296,\n      15 / 1296,\n      35 / 1296,\n      70 / 1296,\n      126 / 1296,\n      206 / 1296,\n      310 / 1296,\n      435 / 1296,\n      575 / 1296,\n      721 / 1296,\n      861 / 1296,\n      986 / 1296,\n      1090 / 1296,\n      1170 / 1296,\n      1226 / 1296,\n      1261 / 1296,\n      1281 / 1296,\n      1291 / 1296,\n      1295 / 1296,\n      1,\n    ],\n    [\n      0,\n      0,\n      0,\n      0,\n      0,\n      1 / 7776,\n      6 / 7776,\n      21 / 7776,\n      56 / 7776,\n      126 / 7776,\n      252 / 7776,\n      457 / 7776,\n      762 / 7776,\n      1182 / 7776,\n      1722 / 7776,\n      2373 / 7776,\n      3108 / 7776,\n      3888 / 7776,\n      4668 / 7776,\n      5403 / 7776,\n      6054 / 7776,\n      6594 / 7776,\n      7014 / 7776,\n      7319 / 7776,\n      7524 / 7776,\n      7650 / 7776,\n      7720 / 7776,\n      7755 / 7776,\n      7770 / 7776,\n      7775 / 7776,\n      1,\n    ],\n  ];\n  let CCDF = [\n    [0, 0.5, 1],\n    [0, 0.25, 0.75, 1],\n    [0, 0.125, 0.5, 0.875, 1],\n    [0, 0.0625, 0.3125, 0.6875, 0.9375, 1],\n    [0, 0.03125, 0.1875, 0.5, 0.8125, 0.96875, 1],\n  ];\n\n  let roundInterval;\n  useEffect(() => {\n    roundInterval = setInterval(() => {\n      if (timer > 0) {\n        setTimer(timer - 1);\n      }\n      if (timer === 0) {\n        handleRound(0);\n      }\n    }, 1000);\n    return () => {\n      clearInterval(roundInterval);\n    };\n  }, [timer]);\n\n  const redistributeWealth = (wager) => {\n    let nAnswer = 0;\n    let p = 0;\n    if (questionType === 0) {\n      p = (upperB - lowerB + 1) / (questionBounds[1] - questionBounds[0] + 1);\n      nAnswer = getRandomInt(questionBounds[0], questionBounds[1] + 1);\n    } else if (questionType === 1) {\n      if (questionBounds <= 5) {\n        p =\n          DCDF[questionBounds - 1][upperB] -\n          DCDF[questionBounds - 1][lowerB - 1];\n      } else {\n        p =\n          GetZPercent(\n            (upperB - 3.5 * questionBounds) /\n              Math.sqrt((35 / 12) * questionBounds)\n          ) -\n          GetZPercent(\n            (lowerB - 3.5 * questionBounds) /\n              Math.sqrt((35 / 12) * questionBounds)\n          );\n      }\n      for (var i = 0; i < questionBounds; i++) {\n        nAnswer += getRandomInt(1, 7);\n      }\n    } else {\n      if (questionBounds <= 5) {\n        p =\n          CCDF[questionBounds - 1][upperB + 1] -\n          CCDF[questionBounds - 1][lowerB];\n      } else {\n        p =\n          GetZPercent(\n            (upperB - 0.5 * questionBounds) /\n              Math.sqrt(0.5 * 0.5 * questionBounds)\n          ) -\n          GetZPercent(\n            (lowerB - 0.5 * questionBounds) /\n              Math.sqrt(0.5 * 0.5 * questionBounds)\n          );\n      }\n      for (var i = 0; i < questionBounds; i++) {\n        nAnswer += getRandomInt(0, 2);\n      }\n    }\n    setAnswer(nAnswer);\n    let kellyWager = Math.max(\n      0,\n      Math.floor((p / (lO / 100) - (1 - p) / (wO / 100)) * kellyScore)\n    );\n    kellyWager = Math.min(kellyWager, kellyScore);\n    if (nAnswer >= lowerB && nAnswer <= upperB) {\n      setKellyDelta(Math.round((kellyWager * wO) / 100));\n      setKellyScore(() => {\n        setKellyScoreHistory([\n          ...kellyScoreHistory,\n          [round, kellyScore + Math.round((kellyWager * wO) / 100)],\n        ]);\n        return kellyScore + Math.round((kellyWager * wO) / 100);\n      });\n      setDelta(Math.round((wager * wO) / 100));\n      setScore(() => {\n        setScoreHistory([\n          ...scoreHistory,\n          [round, score + Math.round((wager * wO) / 100)],\n        ]);\n        return score + Math.round((wager * wO) / 100);\n      });\n    } else {\n      setKellyDelta(-1 * Math.round((kellyWager * lO) / 100));\n      setKellyScore(() => {\n        setKellyScoreHistory([\n          ...kellyScoreHistory,\n          [round, kellyScore - Math.round((kellyWager * lO) / 100)],\n        ]);\n        return kellyScore - Math.round((kellyWager * lO) / 100);\n      });\n      setDelta(-1 * Math.round((wager * lO) / 100));\n      setScore(() => {\n        setScoreHistory([\n          ...scoreHistory,\n          [round, score - Math.round((wager * lO) / 100)],\n        ]);\n        if (score === Math.round((wager * lO) / 100)) {\n          setRound(Math.floor(300 / time) + 1);\n        }\n        return score - Math.round((wager * lO) / 100);\n      });\n    }\n  };\n  const handleRound = (wager) => {\n    if (round <= Math.floor(300 / time)) {\n      setTimer(time);\n      redistributeWealth(wager);\n      setRound(round + 1);\n      let qT = getRandomInt(0, 3);\n      if (qT === 0) {\n        let lowQB;\n        let upQB;\n        if (difficulty === \"casual\") {\n          lowQB = getRandomInt(1, 101);\n          upQB = getRandomInt(1, 101);\n        } else if (difficulty === \"practical\") {\n          lowQB = getRandomInt(1, 501);\n          upQB = getRandomInt(1, 501);\n        } else {\n          lowQB = getRandomInt(1, 1001);\n          upQB = getRandomInt(1, 1001);\n        }\n        let lowB = getRandomInt(lowQB, upQB + 1);\n        let upB = getRandomInt(lowQB, upQB + 1);\n        setQuestionBounds([Math.min(lowQB, upQB), Math.max(lowQB, upQB)]);\n        setLowerB(Math.min(lowB, upB));\n        setUpperB(Math.max(lowB, upB));\n      } else if (qT === 1) {\n        let QB;\n        if (difficulty === \"casual\") {\n          QB = getRandomInt(1, 3);\n        } else if (difficulty === \"practical\") {\n          QB = getRandomInt(3, 6);\n        } else {\n          QB = getRandomInt(6, 101);\n        }\n        let lowB = getRandomInt(QB, 6 * QB + 1);\n        let upB = getRandomInt(QB, 6 * QB + 1);\n        setQuestionBounds(QB);\n        setLowerB(Math.min(lowB, upB));\n        setUpperB(Math.max(lowB, upB));\n      } else {\n        let QB;\n        if (difficulty === \"casual\") {\n          QB = getRandomInt(1, 3);\n        } else if (difficulty === \"practical\") {\n          QB = getRandomInt(3, 6);\n        } else {\n          QB = getRandomInt(6, 101);\n        }\n        let lowB = getRandomInt(0, QB + 1);\n        let upB = getRandomInt(0, QB + 1);\n        setQuestionBounds(QB);\n        setLowerB(Math.min(lowB, upB));\n        setUpperB(Math.max(lowB, upB));\n      }\n      setQuestionType(qT);\n      let wOP = getRandomInt(19, 31);\n      let lOP = getRandomInt(16, 21);\n      setWO(5 * wOP);\n      setLO(() => {\n        if (difficulty === \"casual\") {\n          return 100;\n        } else {\n          return 5 * lOP;\n        }\n      });\n      setText(\"\");\n    } else {\n      setTimer(-1);\n    }\n  };\n\n  const ensureValidInput = (e) => {\n    const re = /^[0-9]+$/;\n\n    if (e.target.value === \"\" || re.test(e.target.value)) {\n      setText(e.target.value);\n    }\n  };\n\n  const checkUserInput = (e) => {\n    if (e.key === \"Enter\" && text !== \"\" && text >= 0 && text <= score) {\n      handleRound(parseInt(text));\n    }\n  };\n\n  return (\n    <div>\n      {(() => {\n        if (round <= Math.floor(300 / time)) {\n          return (\n            <div className={classes.remaining}>\n              <div className={classes.round}>Round: {round}</div>\n              <div className={classes.timer}>Time: {timer}</div>\n            </div>\n          );\n        }\n        return (\n          <div className={classes.remaining}>\n            <div>Game Over</div>\n          </div>\n        );\n      })()}\n      <div className={classes.question}>\n        <div className={classes.questionType}>\n          {(() => {\n            if (questionType === 0) {\n              return (\n                \"Uniform Random Variable between \" +\n                questionBounds[0] +\n                \" and \" +\n                questionBounds[1]\n              );\n            } else if (questionType === 1) {\n              return (\n                \"Rolling \" +\n                questionBounds +\n                (questionBounds === 1 ? \" die\" : \" dice\")\n              );\n            } else {\n              return (\n                \"Flipping \" +\n                questionBounds +\n                (questionBounds === 1 ? \" quarter\" : \" quarters\")\n              );\n            }\n          })()}\n        </div>\n        <div className={classes.odds}>\n          W/L Odds: {wO}%, {lO}%\n        </div>\n        <div className={classes.questionText}>\n          {(() => {\n            if (questionType === 0) {\n              return (\n                \"Landing between \" + lowerB + \" and \" + upperB + \" inclusive\"\n              );\n            } else if (questionType === 1) {\n              return (\n                (questionBounds === 1\n                  ? \"Value between \"\n                  : \"Sum of values between \") +\n                lowerB +\n                \" and \" +\n                upperB +\n                \" inclusive\"\n              );\n            } else {\n              return \"Landing between \" + lowerB + \" and \" + upperB + \" heads\";\n            }\n          })()}\n        </div>\n        <div className={classes.delta}>\n          <div>{delta >= 0 ? \"+\" + delta : delta}</div>\n          <div>Landed Value: {answer}</div>\n          <div>{kellyDelta >= 0 ? \"+\" + kellyDelta : kellyDelta}</div>\n        </div>\n      </div>\n      <div className={classes.terminal}>\n        <div className={classes.score}>{score}</div>\n        <input\n          value={text}\n          onKeyDown={checkUserInput}\n          onChange={ensureValidInput}\n          placeholder=\"Bet amount\"\n        />\n        <div className={classes.score}>{kellyScore}</div>\n      </div>\n\n      <div className={classes.results}>\n        <Graph\n          key={round}\n          history={scoreHistory}\n          kellyHistory={kellyScoreHistory}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}