{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react'), require('react-dom')) : typeof define === 'function' && define.amd ? define(['exports', 'react', 'react-dom'], factory) : (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.ReactCharts = {}, global.React, global.ReactDOM));\n})(this, function (exports, React, ReactDOM) {\n  'use strict';\n\n  function _interopDefaultLegacy(e) {\n    return e && typeof e === 'object' && 'default' in e ? e : {\n      'default': e\n    };\n  }\n\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = Object.create(null);\n\n    if (e) {\n      Object.keys(e).forEach(function (k) {\n        if (k !== 'default') {\n          var d = Object.getOwnPropertyDescriptor(e, k);\n          Object.defineProperty(n, k, d.get ? d : {\n            enumerable: true,\n            get: function () {\n              return e[k];\n            }\n          });\n        }\n      });\n    }\n\n    n['default'] = e;\n    return Object.freeze(n);\n  }\n\n  var React__default = /*#__PURE__*/_interopDefaultLegacy(React);\n\n  var React__namespace = /*#__PURE__*/_interopNamespace(React);\n\n  var ReactDOM__default = /*#__PURE__*/_interopDefaultLegacy(ReactDOM);\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n    var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n    if (it) return (it = it.call(o)).next.bind(it);\n\n    if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n      return function () {\n        if (i >= o.length) return {\n          done: true\n        };\n        return {\n          done: false,\n          value: o[i++]\n        };\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function ascending(a, b) {\n    return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n  }\n\n  function bisector(f) {\n    let delta = f;\n    let compare = f;\n\n    if (f.length === 1) {\n      delta = (d, x) => f(d) - x;\n\n      compare = ascendingComparator(f);\n    }\n\n    function left(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        const mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;else hi = mid;\n      }\n\n      return lo;\n    }\n\n    function right(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n\n      while (lo < hi) {\n        const mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;else lo = mid + 1;\n      }\n\n      return lo;\n    }\n\n    function center(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      const i = left(a, x, lo, hi - 1);\n      return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n    }\n\n    return {\n      left,\n      center,\n      right\n    };\n  }\n\n  function ascendingComparator(f) {\n    return (d, x) => ascending(f(d), x);\n  }\n\n  function number$2(x) {\n    return x === null ? NaN : +x;\n  }\n\n  function* numbers(values, valueof) {\n    if (valueof === undefined) {\n      for (let value of values) {\n        if (value != null && (value = +value) >= value) {\n          yield value;\n        }\n      }\n    } else {\n      let index = -1;\n\n      for (let value of values) {\n        if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n          yield value;\n        }\n      }\n    }\n  }\n\n  const ascendingBisect = bisector(ascending);\n  const bisectRight = ascendingBisect.right;\n  bisector(number$2).center;\n\n  function extent(values, valueof) {\n    let min;\n    let max;\n\n    if (valueof === undefined) {\n      for (const value of values) {\n        if (value != null) {\n          if (min === undefined) {\n            if (value >= value) min = max = value;\n          } else {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    } else {\n      let index = -1;\n\n      for (let value of values) {\n        if ((value = valueof(value, ++index, values)) != null) {\n          if (min === undefined) {\n            if (value >= value) min = max = value;\n          } else {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n\n    return [min, max];\n  }\n\n  class InternMap extends Map {\n    constructor(entries, key = keyof) {\n      super();\n      Object.defineProperties(this, {\n        _intern: {\n          value: new Map()\n        },\n        _key: {\n          value: key\n        }\n      });\n      if (entries != null) for (const [key, value] of entries) this.set(key, value);\n    }\n\n    get(key) {\n      return super.get(intern_get(this, key));\n    }\n\n    has(key) {\n      return super.has(intern_get(this, key));\n    }\n\n    set(key, value) {\n      return super.set(intern_set(this, key), value);\n    }\n\n    delete(key) {\n      return super.delete(intern_delete(this, key));\n    }\n\n  }\n\n  function intern_get({\n    _intern,\n    _key\n  }, value) {\n    const key = _key(value);\n\n    return _intern.has(key) ? _intern.get(key) : value;\n  }\n\n  function intern_set({\n    _intern,\n    _key\n  }, value) {\n    const key = _key(value);\n\n    if (_intern.has(key)) return _intern.get(key);\n\n    _intern.set(key, value);\n\n    return value;\n  }\n\n  function intern_delete({\n    _intern,\n    _key\n  }, value) {\n    const key = _key(value);\n\n    if (_intern.has(key)) {\n      value = _intern.get(value);\n\n      _intern.delete(key);\n    }\n\n    return value;\n  }\n\n  function keyof(value) {\n    return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n  }\n\n  function identity$2(x) {\n    return x;\n  }\n\n  function groups(values, ...keys) {\n    return nest(values, Array.from, identity$2, keys);\n  }\n\n  function nest(values, map, reduce, keys) {\n    return function regroup(values, i) {\n      if (i >= keys.length) return reduce(values);\n      const groups = new InternMap();\n      const keyof = keys[i++];\n      let index = -1;\n\n      for (const value of values) {\n        const key = keyof(value, ++index, values);\n        const group = groups.get(key);\n        if (group) group.push(value);else groups.set(key, [value]);\n      }\n\n      for (const [key, values] of groups) {\n        groups.set(key, regroup(values, i));\n      }\n\n      return map(groups);\n    }(values, 0);\n  }\n\n  function permute(source, keys) {\n    return Array.from(keys, key => source[key]);\n  }\n\n  function sort(values, ...F) {\n    if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n    values = Array.from(values);\n    let [f = ascending] = F;\n\n    if (f.length === 1 || F.length > 1) {\n      const index = Uint32Array.from(values, (d, i) => i);\n\n      if (F.length > 1) {\n        F = F.map(f => values.map(f));\n        index.sort((i, j) => {\n          for (const f of F) {\n            const c = ascending(f[i], f[j]);\n            if (c) return c;\n          }\n        });\n      } else {\n        f = values.map(f);\n        index.sort((i, j) => ascending(f[i], f[j]));\n      }\n\n      return permute(values, index);\n    }\n\n    return values.sort(f);\n  }\n\n  var e10 = Math.sqrt(50),\n      e5 = Math.sqrt(10),\n      e2 = Math.sqrt(2);\n\n  function ticks(start, stop, count) {\n    var reverse,\n        i = -1,\n        n,\n        ticks,\n        step;\n    stop = +stop, start = +start, count = +count;\n    if (start === stop && count > 0) return [start];\n    if (reverse = stop < start) n = start, start = stop, stop = n;\n    if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n    if (step > 0) {\n      let r0 = Math.round(start / step),\n          r1 = Math.round(stop / step);\n      if (r0 * step < start) ++r0;\n      if (r1 * step > stop) --r1;\n      ticks = new Array(n = r1 - r0 + 1);\n\n      while (++i < n) ticks[i] = (r0 + i) * step;\n    } else {\n      step = -step;\n      let r0 = Math.round(start * step),\n          r1 = Math.round(stop * step);\n      if (r0 / step < start) ++r0;\n      if (r1 / step > stop) --r1;\n      ticks = new Array(n = r1 - r0 + 1);\n\n      while (++i < n) ticks[i] = (r0 + i) / step;\n    }\n\n    if (reverse) ticks.reverse();\n    return ticks;\n  }\n\n  function tickIncrement(start, stop, count) {\n    var step = (stop - start) / Math.max(0, count),\n        power = Math.floor(Math.log(step) / Math.LN10),\n        error = step / Math.pow(10, power);\n    return power >= 0 ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power) : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n  }\n\n  function tickStep(start, stop, count) {\n    var step0 = Math.abs(stop - start) / Math.max(0, count),\n        step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n        error = step0 / step1;\n    if (error >= e10) step1 *= 10;else if (error >= e5) step1 *= 5;else if (error >= e2) step1 *= 2;\n    return stop < start ? -step1 : step1;\n  }\n\n  function max(values, valueof) {\n    let max;\n\n    if (valueof === undefined) {\n      for (const value of values) {\n        if (value != null && (max < value || max === undefined && value >= value)) {\n          max = value;\n        }\n      }\n    } else {\n      let index = -1;\n\n      for (let value of values) {\n        if ((value = valueof(value, ++index, values)) != null && (max < value || max === undefined && value >= value)) {\n          max = value;\n        }\n      }\n    }\n\n    return max;\n  }\n\n  function min(values, valueof) {\n    let min;\n\n    if (valueof === undefined) {\n      for (const value of values) {\n        if (value != null && (min > value || min === undefined && value >= value)) {\n          min = value;\n        }\n      }\n    } else {\n      let index = -1;\n\n      for (let value of values) {\n        if ((value = valueof(value, ++index, values)) != null && (min > value || min === undefined && value >= value)) {\n          min = value;\n        }\n      }\n    }\n\n    return min;\n  } // ISC license, Copyright 2018 Vladimir Agafonkin.\n\n\n  function quickselect(array, k, left = 0, right = array.length - 1, compare = ascending) {\n    while (right > left) {\n      if (right - left > 600) {\n        const n = right - left + 1;\n        const m = k - left + 1;\n        const z = Math.log(n);\n        const s = 0.5 * Math.exp(2 * z / 3);\n        const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n        const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n        const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n        quickselect(array, k, newLeft, newRight, compare);\n      }\n\n      const t = array[k];\n      let i = left;\n      let j = right;\n      swap(array, left, k);\n      if (compare(array[right], t) > 0) swap(array, left, right);\n\n      while (i < j) {\n        swap(array, i, j), ++i, --j;\n\n        while (compare(array[i], t) < 0) ++i;\n\n        while (compare(array[j], t) > 0) --j;\n      }\n\n      if (compare(array[left], t) === 0) swap(array, left, j);else ++j, swap(array, j, right);\n      if (j <= k) left = j + 1;\n      if (k <= j) right = j - 1;\n    }\n\n    return array;\n  }\n\n  function swap(array, i, j) {\n    const t = array[i];\n    array[i] = array[j];\n    array[j] = t;\n  }\n\n  function quantile(values, p, valueof) {\n    values = Float64Array.from(numbers(values, valueof));\n    if (!(n = values.length)) return;\n    if ((p = +p) <= 0 || n < 2) return min(values);\n    if (p >= 1) return max(values);\n    var n,\n        i = (n - 1) * p,\n        i0 = Math.floor(i),\n        value0 = max(quickselect(values, i0).subarray(0, i0 + 1)),\n        value1 = min(values.subarray(i0 + 1));\n    return value0 + (value1 - value0) * (i - i0);\n  }\n\n  function median(values, valueof) {\n    return quantile(values, 0.5, valueof);\n  }\n\n  function d3Range(start, stop, step) {\n    start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n    var i = -1,\n        n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n        range = new Array(n);\n\n    while (++i < n) {\n      range[i] = start + i * step;\n    }\n\n    return range;\n  }\n\n  function sum(values, valueof) {\n    let sum = 0;\n\n    if (valueof === undefined) {\n      for (let value of values) {\n        if (value = +value) {\n          sum += value;\n        }\n      }\n    } else {\n      let index = -1;\n\n      for (let value of values) {\n        if (value = +valueof(value, ++index, values)) {\n          sum += value;\n        }\n      }\n    }\n\n    return sum;\n  }\n\n  const pi = Math.PI,\n        tau = 2 * pi,\n        epsilon$1 = 1e-6,\n        tauEpsilon = tau - epsilon$1;\n\n  function Path() {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n\n    this._ = \"\";\n  }\n\n  function path() {\n    return new Path();\n  }\n\n  Path.prototype = path.prototype = {\n    constructor: Path,\n    moveTo: function (x, y) {\n      this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n    },\n    closePath: function () {\n      if (this._x1 !== null) {\n        this._x1 = this._x0, this._y1 = this._y0;\n        this._ += \"Z\";\n      }\n    },\n    lineTo: function (x, y) {\n      this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n    },\n    quadraticCurveTo: function (x1, y1, x, y) {\n      this._ += \"Q\" + +x1 + \",\" + +y1 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n    },\n    bezierCurveTo: function (x1, y1, x2, y2, x, y) {\n      this._ += \"C\" + +x1 + \",\" + +y1 + \",\" + +x2 + \",\" + +y2 + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n    },\n    arcTo: function (x1, y1, x2, y2, r) {\n      x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n      var x0 = this._x1,\n          y0 = this._y1,\n          x21 = x2 - x1,\n          y21 = y2 - y1,\n          x01 = x0 - x1,\n          y01 = y0 - y1,\n          l01_2 = x01 * x01 + y01 * y01; // Is the radius negative? Error.\n\n      if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x1,y1).\n\n      if (this._x1 === null) {\n        this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n      } // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n      else if (!(l01_2 > epsilon$1)) ; // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n        // Equivalently, is (x1,y1) coincident with (x2,y2)?\n        // Or, is the radius zero? Line to (x1,y1).\n        else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon$1) || !r) {\n            this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n          } // Otherwise, draw an arc!\n          else {\n              var x20 = x2 - x0,\n                  y20 = y2 - y0,\n                  l21_2 = x21 * x21 + y21 * y21,\n                  l20_2 = x20 * x20 + y20 * y20,\n                  l21 = Math.sqrt(l21_2),\n                  l01 = Math.sqrt(l01_2),\n                  l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n                  t01 = l / l01,\n                  t21 = l / l21; // If the start tangent is not coincident with (x0,y0), line to.\n\n              if (Math.abs(t01 - 1) > epsilon$1) {\n                this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n              }\n\n              this._ += \"A\" + r + \",\" + r + \",0,0,\" + +(y01 * x20 > x01 * y20) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n            }\n    },\n    arc: function (x, y, r, a0, a1, ccw) {\n      x = +x, y = +y, r = +r, ccw = !!ccw;\n      var dx = r * Math.cos(a0),\n          dy = r * Math.sin(a0),\n          x0 = x + dx,\n          y0 = y + dy,\n          cw = 1 ^ ccw,\n          da = ccw ? a0 - a1 : a1 - a0; // Is the radius negative? Error.\n\n      if (r < 0) throw new Error(\"negative radius: \" + r); // Is this path empty? Move to (x0,y0).\n\n      if (this._x1 === null) {\n        this._ += \"M\" + x0 + \",\" + y0;\n      } // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n      else if (Math.abs(this._x1 - x0) > epsilon$1 || Math.abs(this._y1 - y0) > epsilon$1) {\n          this._ += \"L\" + x0 + \",\" + y0;\n        } // Is this arc empty? We’re done.\n\n\n      if (!r) return; // Does the angle go the wrong way? Flip the direction.\n\n      if (da < 0) da = da % tau + tau; // Is this a complete circle? Draw two arcs to complete the circle.\n\n      if (da > tauEpsilon) {\n        this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n      } // Is this arc non-empty? Draw an arc!\n      else if (da > epsilon$1) {\n          this._ += \"A\" + r + \",\" + r + \",0,\" + +(da >= pi) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n        }\n    },\n    rect: function (x, y, w, h) {\n      this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + +w + \"v\" + +h + \"h\" + -w + \"Z\";\n    },\n    toString: function () {\n      return this._;\n    }\n  };\n\n  function constant$1(x) {\n    return function constant() {\n      return x;\n    };\n  }\n\n  function array(x) {\n    return typeof x === \"object\" && \"length\" in x ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n  }\n\n  function Linear(context) {\n    this._context = context;\n  }\n\n  Linear.prototype = {\n    areaStart: function () {\n      this._line = 0;\n    },\n    areaEnd: function () {\n      this._line = NaN;\n    },\n    lineStart: function () {\n      this._point = 0;\n    },\n    lineEnd: function () {\n      if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();\n      this._line = 1 - this._line;\n    },\n    point: function (x, y) {\n      x = +x, y = +y;\n\n      switch (this._point) {\n        case 0:\n          this._point = 1;\n          this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);\n          break;\n\n        case 1:\n          this._point = 2;\n        // proceed\n\n        default:\n          this._context.lineTo(x, y);\n\n          break;\n      }\n    }\n  };\n\n  function curveLinear(context) {\n    return new Linear(context);\n  }\n\n  function x(p) {\n    return p[0];\n  }\n\n  function y(p) {\n    return p[1];\n  }\n\n  function line(x$1, y$1) {\n    var defined = constant$1(true),\n        context = null,\n        curve = curveLinear,\n        output = null;\n    x$1 = typeof x$1 === \"function\" ? x$1 : x$1 === undefined ? x : constant$1(x$1);\n    y$1 = typeof y$1 === \"function\" ? y$1 : y$1 === undefined ? y : constant$1(y$1);\n\n    function line(data) {\n      var i,\n          n = (data = array(data)).length,\n          d,\n          defined0 = false,\n          buffer;\n      if (context == null) output = curve(buffer = path());\n\n      for (i = 0; i <= n; ++i) {\n        if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n          if (defined0 = !defined0) output.lineStart();else output.lineEnd();\n        }\n\n        if (defined0) output.point(+x$1(d, i, data), +y$1(d, i, data));\n      }\n\n      if (buffer) return output = null, buffer + \"\" || null;\n    }\n\n    line.x = function (_) {\n      return arguments.length ? (x$1 = typeof _ === \"function\" ? _ : constant$1(+_), line) : x$1;\n    };\n\n    line.y = function (_) {\n      return arguments.length ? (y$1 = typeof _ === \"function\" ? _ : constant$1(+_), line) : y$1;\n    };\n\n    line.defined = function (_) {\n      return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant$1(!!_), line) : defined;\n    };\n\n    line.curve = function (_) {\n      return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n    };\n\n    line.context = function (_) {\n      return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n    };\n\n    return line;\n  }\n\n  function area(x0, y0, y1) {\n    var x1 = null,\n        defined = constant$1(true),\n        context = null,\n        curve = curveLinear,\n        output = null;\n    x0 = typeof x0 === \"function\" ? x0 : x0 === undefined ? x : constant$1(+x0);\n    y0 = typeof y0 === \"function\" ? y0 : y0 === undefined ? constant$1(0) : constant$1(+y0);\n    y1 = typeof y1 === \"function\" ? y1 : y1 === undefined ? y : constant$1(+y1);\n\n    function area(data) {\n      var i,\n          j,\n          k,\n          n = (data = array(data)).length,\n          d,\n          defined0 = false,\n          buffer,\n          x0z = new Array(n),\n          y0z = new Array(n);\n      if (context == null) output = curve(buffer = path());\n\n      for (i = 0; i <= n; ++i) {\n        if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n          if (defined0 = !defined0) {\n            j = i;\n            output.areaStart();\n            output.lineStart();\n          } else {\n            output.lineEnd();\n            output.lineStart();\n\n            for (k = i - 1; k >= j; --k) {\n              output.point(x0z[k], y0z[k]);\n            }\n\n            output.lineEnd();\n            output.areaEnd();\n          }\n        }\n\n        if (defined0) {\n          x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n          output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n        }\n      }\n\n      if (buffer) return output = null, buffer + \"\" || null;\n    }\n\n    function arealine() {\n      return line().defined(defined).curve(curve).context(context);\n    }\n\n    area.x = function (_) {\n      return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant$1(+_), x1 = null, area) : x0;\n    };\n\n    area.x0 = function (_) {\n      return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant$1(+_), area) : x0;\n    };\n\n    area.x1 = function (_) {\n      return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant$1(+_), area) : x1;\n    };\n\n    area.y = function (_) {\n      return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant$1(+_), y1 = null, area) : y0;\n    };\n\n    area.y0 = function (_) {\n      return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant$1(+_), area) : y0;\n    };\n\n    area.y1 = function (_) {\n      return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant$1(+_), area) : y1;\n    };\n\n    area.lineX0 = area.lineY0 = function () {\n      return arealine().x(x0).y(y0);\n    };\n\n    area.lineY1 = function () {\n      return arealine().x(x0).y(y1);\n    };\n\n    area.lineX1 = function () {\n      return arealine().x(x1).y(y0);\n    };\n\n    area.defined = function (_) {\n      return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant$1(!!_), area) : defined;\n    };\n\n    area.curve = function (_) {\n      return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n    };\n\n    area.context = function (_) {\n      return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n    };\n\n    return area;\n  }\n\n  function stackOffsetNone(series, order) {\n    if (!((n = series.length) > 1)) return;\n\n    for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {\n      s0 = s1, s1 = series[order[i]];\n\n      for (j = 0; j < m; ++j) {\n        s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];\n      }\n    }\n  }\n\n  function none(series) {\n    var n = series.length,\n        o = new Array(n);\n\n    while (--n >= 0) o[n] = n;\n\n    return o;\n  }\n\n  function stackValue(d, key) {\n    return d[key];\n  }\n\n  function stackSeries(key) {\n    const series = [];\n    series.key = key;\n    return series;\n  }\n\n  function stack() {\n    var keys = constant$1([]),\n        order = none,\n        offset = stackOffsetNone,\n        value = stackValue;\n\n    function stack(data) {\n      var sz = Array.from(keys.apply(this, arguments), stackSeries),\n          i,\n          n = sz.length,\n          j = -1,\n          oz;\n\n      for (const d of data) {\n        for (i = 0, ++j; i < n; ++i) {\n          (sz[i][j] = [0, +value(d, sz[i].key, j, data)]).data = d;\n        }\n      }\n\n      for (i = 0, oz = array(order(sz)); i < n; ++i) {\n        sz[oz[i]].index = i;\n      }\n\n      offset(sz, oz);\n      return sz;\n    }\n\n    stack.keys = function (_) {\n      return arguments.length ? (keys = typeof _ === \"function\" ? _ : constant$1(Array.from(_)), stack) : keys;\n    };\n\n    stack.value = function (_) {\n      return arguments.length ? (value = typeof _ === \"function\" ? _ : constant$1(+_), stack) : value;\n    };\n\n    stack.order = function (_) {\n      return arguments.length ? (order = _ == null ? none : typeof _ === \"function\" ? _ : constant$1(Array.from(_)), stack) : order;\n    };\n\n    stack.offset = function (_) {\n      return arguments.length ? (offset = _ == null ? stackOffsetNone : _, stack) : offset;\n    };\n\n    return stack;\n  }\n\n  function useGetLatest(obj) {\n    var ref = React__default['default'].useRef(obj);\n    var getterRef = React__default['default'].useRef();\n    ref.current = obj;\n\n    if (!getterRef.current) {\n      getterRef.current = function () {\n        return ref.current;\n      };\n    }\n\n    return getterRef.current;\n  }\n\n  var useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React__default['default'].useLayoutEffect : React__default['default'].useEffect;\n\n  function getSeriesStatus(series, focusedDatum) {\n    if ((focusedDatum == null ? void 0 : focusedDatum.seriesId) === series.id) {\n      return 'focused';\n    }\n\n    return 'none';\n  }\n\n  function getDatumStatus(datum, focusedDatum) {\n    var _datum$group;\n\n    if (datum === focusedDatum) {\n      return 'focused';\n    }\n\n    if ((_datum$group = datum.group) != null && _datum$group.some(function (groupDatum) {\n      groupDatum.seriesId === (focusedDatum == null ? void 0 : focusedDatum.seriesId) && groupDatum.index === (focusedDatum == null ? void 0 : focusedDatum.index);\n    })) {\n      return 'groupFocused';\n    }\n\n    return 'none';\n  }\n\n  function normalizeColor(style, defaults) {\n    return _extends({}, style, {\n      stroke: style.stroke || style.color || defaults.stroke || defaults.color,\n      fill: style.fill || style.color || defaults.fill || defaults.color\n    });\n  }\n\n  var elementTypes = ['area', 'line', 'rectangle', 'circle'];\n\n  function materializeStyles(style, defaults) {\n    if (style === void 0) {\n      style = {};\n    }\n\n    if (defaults === void 0) {\n      defaults = {};\n    }\n\n    style = normalizeColor(style, defaults);\n\n    for (var i = 0; i < elementTypes.length; i++) {\n      var type = elementTypes[i];\n\n      if (style[type] && defaults[type]) {\n        style[type] = materializeStyles(style[type], defaults);\n      }\n    }\n\n    return style;\n  }\n\n  function translate(x, y) {\n    return \"translate3d(\" + Math.round(x) + \"px, \" + Math.round(y) + \"px, 0)\";\n  }\n\n  function getSecondaryStart(datum, secondaryAxis) {\n    var _secondaryAxis$scale2;\n\n    if (secondaryAxis.stacked) {\n      var _secondaryAxis$scale, _datum$stackData$, _datum$stackData;\n\n      return (_secondaryAxis$scale = secondaryAxis.scale((_datum$stackData$ = (_datum$stackData = datum.stackData) == null ? void 0 : _datum$stackData[0]) != null ? _datum$stackData$ : NaN)) != null ? _secondaryAxis$scale : NaN;\n    }\n\n    return (_secondaryAxis$scale2 = secondaryAxis.scale(0)) != null ? _secondaryAxis$scale2 : NaN;\n  }\n\n  function getSecondary(datum, secondaryAxis) {\n    var _secondaryAxis$scale4;\n\n    if (secondaryAxis.stacked) {\n      var _secondaryAxis$scale3, _datum$stackData$2, _datum$stackData2;\n\n      return (_secondaryAxis$scale3 = secondaryAxis.scale((_datum$stackData$2 = (_datum$stackData2 = datum.stackData) == null ? void 0 : _datum$stackData2[1]) != null ? _datum$stackData$2 : NaN)) != null ? _secondaryAxis$scale3 : NaN;\n    }\n\n    return (_secondaryAxis$scale4 = secondaryAxis.scale(secondaryAxis.getValue(datum.originalDatum))) != null ? _secondaryAxis$scale4 : NaN;\n  }\n\n  function getPrimary(datum, primaryAxis) {\n    var primary;\n\n    if (primaryAxis.stacked) {\n      var _primaryAxis$scale, _datum$stackData$3, _datum$stackData3;\n\n      primary = (_primaryAxis$scale = primaryAxis.scale((_datum$stackData$3 = (_datum$stackData3 = datum.stackData) == null ? void 0 : _datum$stackData3[1]) != null ? _datum$stackData$3 : NaN)) != null ? _primaryAxis$scale : NaN;\n    } else {\n      var _primaryAxis$scale2;\n\n      primary = (_primaryAxis$scale2 = primaryAxis.scale(primaryAxis.getValue(datum.originalDatum))) != null ? _primaryAxis$scale2 : NaN;\n    }\n\n    if (primaryAxis.axisFamily === 'band') {\n      primary = primary + getPrimaryLength(datum, primaryAxis) / 2;\n    }\n\n    return primary;\n  }\n\n  function getPrimaryStart(datum, primaryAxis) {\n    return getPrimary(datum, primaryAxis) - getPrimaryLength(datum, primaryAxis) / 2;\n  }\n\n  function getPrimaryLength(_datum, primaryAxis) {\n    if (primaryAxis.axisFamily === 'band') {\n      var _primaryAxis$minBandS, _primaryAxis$maxBandS;\n\n      return Math.min(Math.max(primaryAxis.scale.bandwidth(), (_primaryAxis$minBandS = primaryAxis.minBandSize) != null ? _primaryAxis$minBandS : 1), (_primaryAxis$maxBandS = primaryAxis.maxBandSize) != null ? _primaryAxis$maxBandS : 99999999);\n    }\n\n    return Math.max(primaryAxis.bandScale.bandwidth(), 1);\n  }\n\n  function getSecondaryLength(datum, secondaryAxis) {\n    var secondary = [getSecondaryStart(datum, secondaryAxis), getSecondary(datum, secondaryAxis)];\n    return Math.abs(secondary[1] - secondary[0]);\n  }\n\n  function getX(datum, primaryAxis, secondaryAxis) {\n    return primaryAxis.isVertical ? getSecondary(datum, secondaryAxis) : getPrimary(datum, primaryAxis);\n  }\n\n  function getY(datum, primaryAxis, secondaryAxis) {\n    return primaryAxis.isVertical ? getPrimary(datum, primaryAxis) : getSecondary(datum, secondaryAxis);\n  }\n\n  function getRectX(datum, primaryAxis, secondaryAxis) {\n    return primaryAxis.isVertical ? getSecondaryStart(datum, secondaryAxis) : getPrimaryStart(datum, primaryAxis);\n  }\n\n  function getRectY(datum, primaryAxis, secondaryAxis) {\n    return primaryAxis.isVertical ? getPrimaryStart(datum, primaryAxis) : getSecondary(datum, secondaryAxis);\n  }\n\n  function getWidth(datum, primaryAxis, secondaryAxis) {\n    return primaryAxis.isVertical ? getSecondaryLength(datum, secondaryAxis) : getPrimaryLength(datum, primaryAxis);\n  }\n\n  function getHeight(datum, primaryAxis, secondaryAxis) {\n    return primaryAxis.isVertical ? getPrimaryLength(datum, primaryAxis) : getSecondaryLength(datum, secondaryAxis);\n  }\n\n  function clampPxToAxis(px, axis) {\n    var range = axis.scale.range();\n\n    if (axis.isVertical) {\n      range.reverse();\n    }\n\n    return Math.max(range[0], Math.min(px, range[1]));\n  }\n\n  function getTickPx(scale, value) {\n    var _scale;\n\n    var px = (_scale = scale(value)) != null ? _scale : NaN; // @ts-ignore\n\n    if (scale.bandwidth) {\n      // @ts-ignore\n      return px + scale.bandwidth() / 2;\n    }\n\n    return px;\n  }\n\n  var chartContext = /*#__PURE__*/React__namespace.createContext(null);\n\n  function ChartContextProvider(_ref) {\n    var value = _ref.value,\n        children = _ref.children;\n    return /*#__PURE__*/React__namespace.createElement(chartContext.Provider, {\n      value: value,\n      children: children\n    });\n  }\n\n  function useChartContext() {\n    return React__namespace.useContext(chartContext)();\n  } // @ts-nocheck\n\n\n  function sign(x) {\n    return x < 0 ? -1 : 1;\n  } // Calculate the slopes of the tangents (Hermite-type interpolation) based on\n  // the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n  // Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n  // NOV(II), P. 443, 1990.\n\n\n  function slope3(that, x2, y2) {\n    var h0 = that._x1 - that._x0,\n        h1 = x2 - that._x1,\n        s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n        s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n        p = (s0 * h1 + s1 * h0) / (h0 + h1);\n    return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n  } // Calculate a one-sided slope.\n\n\n  function slope2(that, t) {\n    var h = that._x1 - that._x0;\n    return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n  } // According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n  // \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n  // with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\n\n\n  function _point(that, t0, t1) {\n    var x0 = that._x0,\n        y0 = that._y0,\n        x1 = that._x1,\n        y1 = that._y1,\n        dx = (x1 - x0) / 3;\n\n    that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n  }\n\n  function MonotoneX(context) {\n    this._context = context;\n  }\n\n  MonotoneX.prototype = {\n    areaStart: function areaStart() {\n      this._line = 0;\n    },\n    areaEnd: function areaEnd() {\n      this._line = NaN;\n    },\n    lineStart: function lineStart() {\n      this._x0 = this._x1 = this._y0 = this._y1 = this._t0 = NaN;\n      this._point = 0;\n    },\n    lineEnd: function lineEnd() {\n      switch (this._point) {\n        case 2:\n          this._context.lineTo(this._x1, this._y1);\n\n          break;\n\n        case 3:\n          _point(this, this._t0, slope2(this, this._t0));\n\n          break;\n      }\n\n      if (this._line || this._line !== 0 && this._point === 1) this._context.closePath();\n      this._line = 1 - this._line;\n    },\n    point: function point(x, y) {\n      var t1 = NaN;\n      x = +x, y = +y;\n      if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n\n      switch (this._point) {\n        case 0:\n          this._point = 1;\n          this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y);\n          break;\n\n        case 1:\n          this._point = 2;\n          break;\n\n        case 2:\n          this._point = 3;\n\n          _point(this, slope2(this, t1 = slope3(this, x, y)), t1);\n\n          break;\n\n        default:\n          _point(this, this._t0, t1 = slope3(this, x, y));\n\n          break;\n      }\n\n      this._x0 = this._x1, this._x1 = x;\n      this._y0 = this._y1, this._y1 = y;\n      this._t0 = t1;\n    }\n  };\n\n  Object.create(MonotoneX.prototype).point = function (x, y) {\n    MonotoneX.prototype.point.call(this, y, x);\n  };\n\n  var monotoneX = function monotoneX(context) {\n    return new MonotoneX(context);\n  };\n\n  function AreaComponent(_ref) {\n    var _secondaryAxis$curve;\n\n    var primaryAxis = _ref.primaryAxis,\n        secondaryAxis = _ref.secondaryAxis,\n        allSeries = _ref.series;\n\n    var _useChartContext = useChartContext(),\n        getSeriesStatusStyle = _useChartContext.getSeriesStatusStyle,\n        getDatumStatusStyle = _useChartContext.getDatumStatusStyle,\n        focusedDatumState = _useChartContext.focusedDatumState,\n        gridDimensions = _useChartContext.gridDimensions;\n\n    var curve = (_secondaryAxis$curve = secondaryAxis.curve) != null ? _secondaryAxis$curve : monotoneX;\n    var focusedDatum = focusedDatumState[0];\n    return /*#__PURE__*/React__default['default'].createElement(\"g\", {\n      style: {\n        transform: translate(gridDimensions.gridX, gridDimensions.gridY)\n      }\n    }, allSeries.map(function (series, i) {\n      var _area$curve, _line$curve;\n\n      var style = getSeriesStatusStyle(series, focusedDatum);\n\n      var lineStyle = _extends({\n        strokeWidth: 2\n      }, style, style.line, {\n        fill: 'none'\n      });\n\n      var areaStyle = _extends({\n        strokeWidth: 2,\n        opacity: 0.5\n      }, style, style.area);\n\n      var areaPath = (_area$curve = area(function (datum) {\n        var _getPrimary;\n\n        return (_getPrimary = getPrimary(datum, primaryAxis)) != null ? _getPrimary : NaN;\n      }, function (datum) {\n        var _getSecondaryStart;\n\n        return clampPxToAxis((_getSecondaryStart = getSecondaryStart(datum, secondaryAxis)) != null ? _getSecondaryStart : NaN, secondaryAxis);\n      }, function (datum) {\n        var _getSecondary;\n\n        return clampPxToAxis((_getSecondary = getSecondary(datum, secondaryAxis)) != null ? _getSecondary : NaN, secondaryAxis);\n      }).curve(curve)(series.datums)) != null ? _area$curve : undefined;\n      var linePath = (_line$curve = line(function (datum) {\n        var _getPrimary2;\n\n        return (_getPrimary2 = getPrimary(datum, primaryAxis)) != null ? _getPrimary2 : NaN;\n      }, function (datum) {\n        var _getSecondary2;\n\n        return (_getSecondary2 = getSecondary(datum, secondaryAxis)) != null ? _getSecondary2 : NaN;\n      }).curve(curve)(series.datums)) != null ? _line$curve : undefined;\n      return /*#__PURE__*/React__default['default'].createElement(\"g\", {\n        key: \"lines-\" + i\n      }, /*#__PURE__*/React__default['default'].createElement(\"path\", {\n        d: areaPath,\n        style: areaStyle\n      }), /*#__PURE__*/React__default['default'].createElement(\"path\", {\n        d: linePath,\n        style: lineStyle\n      }), series.datums.map(function (datum, i) {\n        var _getY, _secondaryAxis$showDa;\n\n        var dataStyle = getDatumStatusStyle(datum, focusedDatum);\n        return /*#__PURE__*/React__default['default'].createElement(\"circle\", {\n          key: i,\n          ref: function ref(el) {\n            datum.element = el;\n          },\n          r: 2,\n          cx: getX(datum, primaryAxis, secondaryAxis),\n          cy: (_getY = getY(datum, primaryAxis, secondaryAxis)) != null ? _getY : NaN,\n          stroke: \"rgba(33,33,33,0.5)\",\n          style: _extends({\n            // @ts-ignore\n            r: 2\n          }, style, style.circle, dataStyle, dataStyle.circle, !((_secondaryAxis$showDa = secondaryAxis.showDatumElements) != null ? _secondaryAxis$showDa : false) ? {\n            opacity: 0\n          } : {})\n        });\n      }));\n    }));\n  }\n\n  function BarComponent(_ref) {\n    var primaryAxis = _ref.primaryAxis,\n        secondaryAxis = _ref.secondaryAxis,\n        allSeries = _ref.series;\n\n    var _useChartContext = useChartContext(),\n        getSeriesStatusStyle = _useChartContext.getSeriesStatusStyle,\n        getDatumStatusStyle = _useChartContext.getDatumStatusStyle,\n        focusedDatumState = _useChartContext.focusedDatumState,\n        gridDimensions = _useChartContext.gridDimensions;\n\n    var focusedDatum = focusedDatumState[0];\n    return /*#__PURE__*/React__default['default'].createElement(\"g\", {\n      style: {\n        transform: translate(gridDimensions.gridX, gridDimensions.gridY)\n      }\n    }, allSeries.map(function (series, i) {\n      var style = getSeriesStatusStyle(series, focusedDatum);\n      return /*#__PURE__*/React__default['default'].createElement(\"g\", {\n        key: \"lines-\" + i\n      }, series.datums.map(function (datum, i) {\n        var _getRectX, _getRectY, _getWidth, _getHeight;\n\n        var dataStyle = getDatumStatusStyle(datum, focusedDatum);\n        var x = (_getRectX = getRectX(datum, primaryAxis, secondaryAxis)) != null ? _getRectX : NaN;\n        var y = (_getRectY = getRectY(datum, primaryAxis, secondaryAxis)) != null ? _getRectY : NaN;\n        var width = (_getWidth = getWidth(datum, primaryAxis, secondaryAxis)) != null ? _getWidth : NaN;\n        var height = (_getHeight = getHeight(datum, primaryAxis, secondaryAxis)) != null ? _getHeight : NaN;\n        return /*#__PURE__*/React__default['default'].createElement(\"rect\", {\n          ref: function ref(el) {\n            datum.element = el;\n          },\n          key: i,\n          x: x,\n          y: y,\n          width: width,\n          height: height,\n          style: _extends({\n            strokeWidth: 0\n          }, style, style.rectangle, dataStyle, dataStyle.rectangle)\n        });\n      }));\n    }));\n  }\n\n  var pathDefaultStyle = {\n    strokeWidth: 2\n  };\n\n  function Line(_ref) {\n    var _secondaryAxis$curve;\n\n    var primaryAxis = _ref.primaryAxis,\n        secondaryAxis = _ref.secondaryAxis,\n        allSeries = _ref.series;\n\n    var _useChartContext = useChartContext(),\n        getSeriesStatusStyle = _useChartContext.getSeriesStatusStyle,\n        getDatumStatusStyle = _useChartContext.getDatumStatusStyle,\n        focusedDatumState = _useChartContext.focusedDatumState,\n        gridDimensions = _useChartContext.gridDimensions;\n\n    var curve = (_secondaryAxis$curve = secondaryAxis.curve) != null ? _secondaryAxis$curve : monotoneX;\n    var focusedDatum = focusedDatumState[0];\n    return /*#__PURE__*/React__default['default'].createElement(\"g\", {\n      style: {\n        transform: translate(gridDimensions.gridX, gridDimensions.gridY)\n      }\n    }, allSeries.map(function (series, i) {\n      var _line$curve;\n\n      var style = getSeriesStatusStyle(series, focusedDatum);\n\n      var lineStyle = _extends({}, pathDefaultStyle, style, style.line, {\n        fill: 'none'\n      });\n\n      var linePath = (_line$curve = line(function (datum) {\n        var _getX;\n\n        return (_getX = getX(datum, primaryAxis, secondaryAxis)) != null ? _getX : NaN;\n      }, function (datum) {\n        var _getY;\n\n        return (_getY = getY(datum, primaryAxis, secondaryAxis)) != null ? _getY : NaN;\n      }).curve(curve)(series.datums)) != null ? _line$curve : undefined;\n      return /*#__PURE__*/React__default['default'].createElement(\"g\", {\n        key: \"lines-\" + i\n      }, series.datums.map(function (datum, i) {\n        var _secondaryAxis$showDa;\n\n        var dataStyle = getDatumStatusStyle(datum, focusedDatum);\n        return /*#__PURE__*/React__default['default'].createElement(\"circle\", {\n          key: i,\n          ref: function ref(el) {\n            datum.element = el;\n          },\n          r: 2,\n          cx: getX(datum, primaryAxis, secondaryAxis),\n          cy: getY(datum, primaryAxis, secondaryAxis),\n          stroke: \"rgba(33,33,33,0.5)\",\n          fill: \"transparent\",\n          style: _extends({\n            // @ts-ignore\n            r: 2\n          }, style, style.circle, dataStyle, dataStyle.circle, !((_secondaryAxis$showDa = secondaryAxis.showDatumElements) != null ? _secondaryAxis$showDa : true) ? {\n            opacity: 0\n          } : {})\n        });\n      }), /*#__PURE__*/React__default['default'].createElement(\"path\", {\n        d: linePath,\n        style: lineStyle\n      }));\n    }));\n  }\n\n  function initRange(domain, range) {\n    switch (arguments.length) {\n      case 0:\n        break;\n\n      case 1:\n        this.range(domain);\n        break;\n\n      default:\n        this.range(range).domain(domain);\n        break;\n    }\n\n    return this;\n  }\n\n  const implicit = Symbol(\"implicit\");\n\n  function ordinal() {\n    var index = new Map(),\n        domain = [],\n        range = [],\n        unknown = implicit;\n\n    function scale(d) {\n      var key = d + \"\",\n          i = index.get(key);\n\n      if (!i) {\n        if (unknown !== implicit) return unknown;\n        index.set(key, i = domain.push(d));\n      }\n\n      return range[(i - 1) % range.length];\n    }\n\n    scale.domain = function (_) {\n      if (!arguments.length) return domain.slice();\n      domain = [], index = new Map();\n\n      for (const value of _) {\n        const key = value + \"\";\n        if (index.has(key)) continue;\n        index.set(key, domain.push(value));\n      }\n\n      return scale;\n    };\n\n    scale.range = function (_) {\n      return arguments.length ? (range = Array.from(_), scale) : range.slice();\n    };\n\n    scale.unknown = function (_) {\n      return arguments.length ? (unknown = _, scale) : unknown;\n    };\n\n    scale.copy = function () {\n      return ordinal(domain, range).unknown(unknown);\n    };\n\n    initRange.apply(scale, arguments);\n    return scale;\n  }\n\n  function band() {\n    var scale = ordinal().unknown(undefined),\n        domain = scale.domain,\n        ordinalRange = scale.range,\n        r0 = 0,\n        r1 = 1,\n        step,\n        bandwidth,\n        round = false,\n        paddingInner = 0,\n        paddingOuter = 0,\n        align = 0.5;\n    delete scale.unknown;\n\n    function rescale() {\n      var n = domain().length,\n          reverse = r1 < r0,\n          start = reverse ? r1 : r0,\n          stop = reverse ? r0 : r1;\n      step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n      if (round) step = Math.floor(step);\n      start += (stop - start - step * (n - paddingInner)) * align;\n      bandwidth = step * (1 - paddingInner);\n      if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n      var values = d3Range(n).map(function (i) {\n        return start + step * i;\n      });\n      return ordinalRange(reverse ? values.reverse() : values);\n    }\n\n    scale.domain = function (_) {\n      return arguments.length ? (domain(_), rescale()) : domain();\n    };\n\n    scale.range = function (_) {\n      return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n    };\n\n    scale.rangeRound = function (_) {\n      return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n    };\n\n    scale.bandwidth = function () {\n      return bandwidth;\n    };\n\n    scale.step = function () {\n      return step;\n    };\n\n    scale.round = function (_) {\n      return arguments.length ? (round = !!_, rescale()) : round;\n    };\n\n    scale.padding = function (_) {\n      return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n    };\n\n    scale.paddingInner = function (_) {\n      return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n    };\n\n    scale.paddingOuter = function (_) {\n      return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n    };\n\n    scale.align = function (_) {\n      return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n    };\n\n    scale.copy = function () {\n      return band(domain(), [r0, r1]).round(round).paddingInner(paddingInner).paddingOuter(paddingOuter).align(align);\n    };\n\n    return initRange.apply(rescale(), arguments);\n  }\n\n  function define(constructor, factory, prototype) {\n    constructor.prototype = factory.prototype = prototype;\n    prototype.constructor = constructor;\n  }\n\n  function extend(parent, definition) {\n    var prototype = Object.create(parent.prototype);\n\n    for (var key in definition) prototype[key] = definition[key];\n\n    return prototype;\n  }\n\n  function Color() {}\n\n  var darker = 0.7;\n  var brighter = 1 / darker;\n  var reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n      reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n      reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n      reHex = /^#([0-9a-f]{3,8})$/,\n      reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n      reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n      reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n      reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n      reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n      reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n  var named = {\n    aliceblue: 0xf0f8ff,\n    antiquewhite: 0xfaebd7,\n    aqua: 0x00ffff,\n    aquamarine: 0x7fffd4,\n    azure: 0xf0ffff,\n    beige: 0xf5f5dc,\n    bisque: 0xffe4c4,\n    black: 0x000000,\n    blanchedalmond: 0xffebcd,\n    blue: 0x0000ff,\n    blueviolet: 0x8a2be2,\n    brown: 0xa52a2a,\n    burlywood: 0xdeb887,\n    cadetblue: 0x5f9ea0,\n    chartreuse: 0x7fff00,\n    chocolate: 0xd2691e,\n    coral: 0xff7f50,\n    cornflowerblue: 0x6495ed,\n    cornsilk: 0xfff8dc,\n    crimson: 0xdc143c,\n    cyan: 0x00ffff,\n    darkblue: 0x00008b,\n    darkcyan: 0x008b8b,\n    darkgoldenrod: 0xb8860b,\n    darkgray: 0xa9a9a9,\n    darkgreen: 0x006400,\n    darkgrey: 0xa9a9a9,\n    darkkhaki: 0xbdb76b,\n    darkmagenta: 0x8b008b,\n    darkolivegreen: 0x556b2f,\n    darkorange: 0xff8c00,\n    darkorchid: 0x9932cc,\n    darkred: 0x8b0000,\n    darksalmon: 0xe9967a,\n    darkseagreen: 0x8fbc8f,\n    darkslateblue: 0x483d8b,\n    darkslategray: 0x2f4f4f,\n    darkslategrey: 0x2f4f4f,\n    darkturquoise: 0x00ced1,\n    darkviolet: 0x9400d3,\n    deeppink: 0xff1493,\n    deepskyblue: 0x00bfff,\n    dimgray: 0x696969,\n    dimgrey: 0x696969,\n    dodgerblue: 0x1e90ff,\n    firebrick: 0xb22222,\n    floralwhite: 0xfffaf0,\n    forestgreen: 0x228b22,\n    fuchsia: 0xff00ff,\n    gainsboro: 0xdcdcdc,\n    ghostwhite: 0xf8f8ff,\n    gold: 0xffd700,\n    goldenrod: 0xdaa520,\n    gray: 0x808080,\n    green: 0x008000,\n    greenyellow: 0xadff2f,\n    grey: 0x808080,\n    honeydew: 0xf0fff0,\n    hotpink: 0xff69b4,\n    indianred: 0xcd5c5c,\n    indigo: 0x4b0082,\n    ivory: 0xfffff0,\n    khaki: 0xf0e68c,\n    lavender: 0xe6e6fa,\n    lavenderblush: 0xfff0f5,\n    lawngreen: 0x7cfc00,\n    lemonchiffon: 0xfffacd,\n    lightblue: 0xadd8e6,\n    lightcoral: 0xf08080,\n    lightcyan: 0xe0ffff,\n    lightgoldenrodyellow: 0xfafad2,\n    lightgray: 0xd3d3d3,\n    lightgreen: 0x90ee90,\n    lightgrey: 0xd3d3d3,\n    lightpink: 0xffb6c1,\n    lightsalmon: 0xffa07a,\n    lightseagreen: 0x20b2aa,\n    lightskyblue: 0x87cefa,\n    lightslategray: 0x778899,\n    lightslategrey: 0x778899,\n    lightsteelblue: 0xb0c4de,\n    lightyellow: 0xffffe0,\n    lime: 0x00ff00,\n    limegreen: 0x32cd32,\n    linen: 0xfaf0e6,\n    magenta: 0xff00ff,\n    maroon: 0x800000,\n    mediumaquamarine: 0x66cdaa,\n    mediumblue: 0x0000cd,\n    mediumorchid: 0xba55d3,\n    mediumpurple: 0x9370db,\n    mediumseagreen: 0x3cb371,\n    mediumslateblue: 0x7b68ee,\n    mediumspringgreen: 0x00fa9a,\n    mediumturquoise: 0x48d1cc,\n    mediumvioletred: 0xc71585,\n    midnightblue: 0x191970,\n    mintcream: 0xf5fffa,\n    mistyrose: 0xffe4e1,\n    moccasin: 0xffe4b5,\n    navajowhite: 0xffdead,\n    navy: 0x000080,\n    oldlace: 0xfdf5e6,\n    olive: 0x808000,\n    olivedrab: 0x6b8e23,\n    orange: 0xffa500,\n    orangered: 0xff4500,\n    orchid: 0xda70d6,\n    palegoldenrod: 0xeee8aa,\n    palegreen: 0x98fb98,\n    paleturquoise: 0xafeeee,\n    palevioletred: 0xdb7093,\n    papayawhip: 0xffefd5,\n    peachpuff: 0xffdab9,\n    peru: 0xcd853f,\n    pink: 0xffc0cb,\n    plum: 0xdda0dd,\n    powderblue: 0xb0e0e6,\n    purple: 0x800080,\n    rebeccapurple: 0x663399,\n    red: 0xff0000,\n    rosybrown: 0xbc8f8f,\n    royalblue: 0x4169e1,\n    saddlebrown: 0x8b4513,\n    salmon: 0xfa8072,\n    sandybrown: 0xf4a460,\n    seagreen: 0x2e8b57,\n    seashell: 0xfff5ee,\n    sienna: 0xa0522d,\n    silver: 0xc0c0c0,\n    skyblue: 0x87ceeb,\n    slateblue: 0x6a5acd,\n    slategray: 0x708090,\n    slategrey: 0x708090,\n    snow: 0xfffafa,\n    springgreen: 0x00ff7f,\n    steelblue: 0x4682b4,\n    tan: 0xd2b48c,\n    teal: 0x008080,\n    thistle: 0xd8bfd8,\n    tomato: 0xff6347,\n    turquoise: 0x40e0d0,\n    violet: 0xee82ee,\n    wheat: 0xf5deb3,\n    white: 0xffffff,\n    whitesmoke: 0xf5f5f5,\n    yellow: 0xffff00,\n    yellowgreen: 0x9acd32\n  };\n  define(Color, color, {\n    copy: function (channels) {\n      return Object.assign(new this.constructor(), this, channels);\n    },\n    displayable: function () {\n      return this.rgb().displayable();\n    },\n    hex: color_formatHex,\n    // Deprecated! Use color.formatHex.\n    formatHex: color_formatHex,\n    formatHsl: color_formatHsl,\n    formatRgb: color_formatRgb,\n    toString: color_formatRgb\n  });\n\n  function color_formatHex() {\n    return this.rgb().formatHex();\n  }\n\n  function color_formatHsl() {\n    return hslConvert(this).formatHsl();\n  }\n\n  function color_formatRgb() {\n    return this.rgb().formatRgb();\n  }\n\n  function color(format) {\n    var m, l;\n    format = (format + \"\").trim().toLowerCase();\n    return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n    : l === 3 ? new Rgb(m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, (m & 0xf) << 4 | m & 0xf, 1) // #f00\n    : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n    : l === 4 ? rgba(m >> 12 & 0xf | m >> 8 & 0xf0, m >> 8 & 0xf | m >> 4 & 0xf0, m >> 4 & 0xf | m & 0xf0, ((m & 0xf) << 4 | m & 0xf) / 0xff) // #f000\n    : null // invalid hex\n    ) : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n    : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n    : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n    : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n    : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n    : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n    : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n    : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0) : null;\n  }\n\n  function rgbn(n) {\n    return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n  }\n\n  function rgba(r, g, b, a) {\n    if (a <= 0) r = g = b = NaN;\n    return new Rgb(r, g, b, a);\n  }\n\n  function rgbConvert(o) {\n    if (!(o instanceof Color)) o = color(o);\n    if (!o) return new Rgb();\n    o = o.rgb();\n    return new Rgb(o.r, o.g, o.b, o.opacity);\n  }\n\n  function rgb$1(r, g, b, opacity) {\n    return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n  }\n\n  function Rgb(r, g, b, opacity) {\n    this.r = +r;\n    this.g = +g;\n    this.b = +b;\n    this.opacity = +opacity;\n  }\n\n  define(Rgb, rgb$1, extend(Color, {\n    brighter: function (k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n    },\n    darker: function (k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n    },\n    rgb: function () {\n      return this;\n    },\n    displayable: function () {\n      return -0.5 <= this.r && this.r < 255.5 && -0.5 <= this.g && this.g < 255.5 && -0.5 <= this.b && this.b < 255.5 && 0 <= this.opacity && this.opacity <= 1;\n    },\n    hex: rgb_formatHex,\n    // Deprecated! Use color.formatHex.\n    formatHex: rgb_formatHex,\n    formatRgb: rgb_formatRgb,\n    toString: rgb_formatRgb\n  }));\n\n  function rgb_formatHex() {\n    return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n  }\n\n  function rgb_formatRgb() {\n    var a = this.opacity;\n    a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"rgb(\" : \"rgba(\") + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \" + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \" + Math.max(0, Math.min(255, Math.round(this.b) || 0)) + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n\n  function hex(value) {\n    value = Math.max(0, Math.min(255, Math.round(value) || 0));\n    return (value < 16 ? \"0\" : \"\") + value.toString(16);\n  }\n\n  function hsla(h, s, l, a) {\n    if (a <= 0) h = s = l = NaN;else if (l <= 0 || l >= 1) h = s = NaN;else if (s <= 0) h = NaN;\n    return new Hsl(h, s, l, a);\n  }\n\n  function hslConvert(o) {\n    if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n    if (!(o instanceof Color)) o = color(o);\n    if (!o) return new Hsl();\n    if (o instanceof Hsl) return o;\n    o = o.rgb();\n    var r = o.r / 255,\n        g = o.g / 255,\n        b = o.b / 255,\n        min = Math.min(r, g, b),\n        max = Math.max(r, g, b),\n        h = NaN,\n        s = max - min,\n        l = (max + min) / 2;\n\n    if (s) {\n      if (r === max) h = (g - b) / s + (g < b) * 6;else if (g === max) h = (b - r) / s + 2;else h = (r - g) / s + 4;\n      s /= l < 0.5 ? max + min : 2 - max - min;\n      h *= 60;\n    } else {\n      s = l > 0 && l < 1 ? 0 : h;\n    }\n\n    return new Hsl(h, s, l, o.opacity);\n  }\n\n  function hsl(h, s, l, opacity) {\n    return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n  }\n\n  function Hsl(h, s, l, opacity) {\n    this.h = +h;\n    this.s = +s;\n    this.l = +l;\n    this.opacity = +opacity;\n  }\n\n  define(Hsl, hsl, extend(Color, {\n    brighter: function (k) {\n      k = k == null ? brighter : Math.pow(brighter, k);\n      return new Hsl(this.h, this.s, this.l * k, this.opacity);\n    },\n    darker: function (k) {\n      k = k == null ? darker : Math.pow(darker, k);\n      return new Hsl(this.h, this.s, this.l * k, this.opacity);\n    },\n    rgb: function () {\n      var h = this.h % 360 + (this.h < 0) * 360,\n          s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n          l = this.l,\n          m2 = l + (l < 0.5 ? l : 1 - l) * s,\n          m1 = 2 * l - m2;\n      return new Rgb(hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2), hsl2rgb(h, m1, m2), hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2), this.opacity);\n    },\n    displayable: function () {\n      return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && 0 <= this.l && this.l <= 1 && 0 <= this.opacity && this.opacity <= 1;\n    },\n    formatHsl: function () {\n      var a = this.opacity;\n      a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n      return (a === 1 ? \"hsl(\" : \"hsla(\") + (this.h || 0) + \", \" + (this.s || 0) * 100 + \"%, \" + (this.l || 0) * 100 + \"%\" + (a === 1 ? \")\" : \", \" + a + \")\");\n    }\n  }));\n  /* From FvD 13.37, CSS Color Module Level 3 */\n\n  function hsl2rgb(h, m1, m2) {\n    return (h < 60 ? m1 + (m2 - m1) * h / 60 : h < 180 ? m2 : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60 : m1) * 255;\n  }\n\n  var constant = x => () => x;\n\n  function linear$1(a, d) {\n    return function (t) {\n      return a + t * d;\n    };\n  }\n\n  function exponential(a, b, y) {\n    return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function (t) {\n      return Math.pow(a + t * b, y);\n    };\n  }\n\n  function gamma(y) {\n    return (y = +y) === 1 ? nogamma : function (a, b) {\n      return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n    };\n  }\n\n  function nogamma(a, b) {\n    var d = b - a;\n    return d ? linear$1(a, d) : constant(isNaN(a) ? b : a);\n  }\n\n  var rgb = function rgbGamma(y) {\n    var color = gamma(y);\n\n    function rgb(start, end) {\n      var r = color((start = rgb$1(start)).r, (end = rgb$1(end)).r),\n          g = color(start.g, end.g),\n          b = color(start.b, end.b),\n          opacity = nogamma(start.opacity, end.opacity);\n      return function (t) {\n        start.r = r(t);\n        start.g = g(t);\n        start.b = b(t);\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    rgb.gamma = rgbGamma;\n    return rgb;\n  }(1);\n\n  function numberArray(a, b) {\n    if (!b) b = [];\n    var n = a ? Math.min(b.length, a.length) : 0,\n        c = b.slice(),\n        i;\n    return function (t) {\n      for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n\n      return c;\n    };\n  }\n\n  function isNumberArray(x) {\n    return ArrayBuffer.isView(x) && !(x instanceof DataView);\n  }\n\n  function genericArray(a, b) {\n    var nb = b ? b.length : 0,\n        na = a ? Math.min(nb, a.length) : 0,\n        x = new Array(na),\n        c = new Array(nb),\n        i;\n\n    for (i = 0; i < na; ++i) x[i] = interpolate(a[i], b[i]);\n\n    for (; i < nb; ++i) c[i] = b[i];\n\n    return function (t) {\n      for (i = 0; i < na; ++i) c[i] = x[i](t);\n\n      return c;\n    };\n  }\n\n  function date$1(a, b) {\n    var d = new Date();\n    return a = +a, b = +b, function (t) {\n      return d.setTime(a * (1 - t) + b * t), d;\n    };\n  }\n\n  function interpolateNumber(a, b) {\n    return a = +a, b = +b, function (t) {\n      return a * (1 - t) + b * t;\n    };\n  }\n\n  function object(a, b) {\n    var i = {},\n        c = {},\n        k;\n    if (a === null || typeof a !== \"object\") a = {};\n    if (b === null || typeof b !== \"object\") b = {};\n\n    for (k in b) {\n      if (k in a) {\n        i[k] = interpolate(a[k], b[k]);\n      } else {\n        c[k] = b[k];\n      }\n    }\n\n    return function (t) {\n      for (k in i) c[k] = i[k](t);\n\n      return c;\n    };\n  }\n\n  var reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n      reB = new RegExp(reA.source, \"g\");\n\n  function zero(b) {\n    return function () {\n      return b;\n    };\n  }\n\n  function one(b) {\n    return function (t) {\n      return b(t) + \"\";\n    };\n  }\n\n  function string(a, b) {\n    var bi = reA.lastIndex = reB.lastIndex = 0,\n        // scan index for next number in b\n    am,\n        // current match in a\n    bm,\n        // current match in b\n    bs,\n        // string preceding current number in b, if any\n    i = -1,\n        // index in s\n    s = [],\n        // string constants and placeholders\n    q = []; // number interpolators\n    // Coerce inputs to strings.\n\n    a = a + \"\", b = b + \"\"; // Interpolate pairs of numbers in a & b.\n\n    while ((am = reA.exec(a)) && (bm = reB.exec(b))) {\n      if ((bs = bm.index) > bi) {\n        // a string precedes the next number in b\n        bs = b.slice(bi, bs);\n        if (s[i]) s[i] += bs; // coalesce with previous string\n        else s[++i] = bs;\n      }\n\n      if ((am = am[0]) === (bm = bm[0])) {\n        // numbers in a & b match\n        if (s[i]) s[i] += bm; // coalesce with previous string\n        else s[++i] = bm;\n      } else {\n        // interpolate non-matching numbers\n        s[++i] = null;\n        q.push({\n          i: i,\n          x: interpolateNumber(am, bm)\n        });\n      }\n\n      bi = reB.lastIndex;\n    } // Add remains of b.\n\n\n    if (bi < b.length) {\n      bs = b.slice(bi);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    } // Special optimization for only a single match.\n    // Otherwise, interpolate each of the numbers and rejoin the string.\n\n\n    return s.length < 2 ? q[0] ? one(q[0].x) : zero(b) : (b = q.length, function (t) {\n      for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n\n      return s.join(\"\");\n    });\n  }\n\n  function interpolate(a, b) {\n    var t = typeof b,\n        c;\n    return b == null || t === \"boolean\" ? constant(b) : (t === \"number\" ? interpolateNumber : t === \"string\" ? (c = color(b)) ? (b = c, rgb) : string : b instanceof color ? rgb : b instanceof Date ? date$1 : isNumberArray(b) ? numberArray : Array.isArray(b) ? genericArray : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object : interpolateNumber)(a, b);\n  }\n\n  function interpolateRound(a, b) {\n    return a = +a, b = +b, function (t) {\n      return Math.round(a * (1 - t) + b * t);\n    };\n  }\n\n  function constants(x) {\n    return function () {\n      return x;\n    };\n  }\n\n  function number$1(x) {\n    return +x;\n  }\n\n  var unit = [0, 1];\n\n  function identity$1(x) {\n    return x;\n  }\n\n  function normalize(a, b) {\n    return (b -= a = +a) ? function (x) {\n      return (x - a) / b;\n    } : constants(isNaN(b) ? NaN : 0.5);\n  }\n\n  function clamper(a, b) {\n    var t;\n    if (a > b) t = a, a = b, b = t;\n    return function (x) {\n      return Math.max(a, Math.min(b, x));\n    };\n  } // normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n  // interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\n\n\n  function bimap(domain, range, interpolate) {\n    var d0 = domain[0],\n        d1 = domain[1],\n        r0 = range[0],\n        r1 = range[1];\n    if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n    return function (x) {\n      return r0(d0(x));\n    };\n  }\n\n  function polymap(domain, range, interpolate) {\n    var j = Math.min(domain.length, range.length) - 1,\n        d = new Array(j),\n        r = new Array(j),\n        i = -1; // Reverse descending domains.\n\n    if (domain[j] < domain[0]) {\n      domain = domain.slice().reverse();\n      range = range.slice().reverse();\n    }\n\n    while (++i < j) {\n      d[i] = normalize(domain[i], domain[i + 1]);\n      r[i] = interpolate(range[i], range[i + 1]);\n    }\n\n    return function (x) {\n      var i = bisectRight(domain, x, 1, j) - 1;\n      return r[i](d[i](x));\n    };\n  }\n\n  function copy(source, target) {\n    return target.domain(source.domain()).range(source.range()).interpolate(source.interpolate()).clamp(source.clamp()).unknown(source.unknown());\n  }\n\n  function transformer() {\n    var domain = unit,\n        range = unit,\n        interpolate$1 = interpolate,\n        transform,\n        untransform,\n        unknown,\n        clamp = identity$1,\n        piecewise,\n        output,\n        input;\n\n    function rescale() {\n      var n = Math.min(domain.length, range.length);\n      if (clamp !== identity$1) clamp = clamper(domain[0], domain[n - 1]);\n      piecewise = n > 2 ? polymap : bimap;\n      output = input = null;\n      return scale;\n    }\n\n    function scale(x) {\n      return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate$1)))(transform(clamp(x)));\n    }\n\n    scale.invert = function (y) {\n      return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n    };\n\n    scale.domain = function (_) {\n      return arguments.length ? (domain = Array.from(_, number$1), rescale()) : domain.slice();\n    };\n\n    scale.range = function (_) {\n      return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n    };\n\n    scale.rangeRound = function (_) {\n      return range = Array.from(_), interpolate$1 = interpolateRound, rescale();\n    };\n\n    scale.clamp = function (_) {\n      return arguments.length ? (clamp = _ ? true : identity$1, rescale()) : clamp !== identity$1;\n    };\n\n    scale.interpolate = function (_) {\n      return arguments.length ? (interpolate$1 = _, rescale()) : interpolate$1;\n    };\n\n    scale.unknown = function (_) {\n      return arguments.length ? (unknown = _, scale) : unknown;\n    };\n\n    return function (t, u) {\n      transform = t, untransform = u;\n      return rescale();\n    };\n  }\n\n  function continuous() {\n    return transformer()(identity$1, identity$1);\n  }\n\n  function formatDecimal(x) {\n    return Math.abs(x = Math.round(x)) >= 1e21 ? x.toLocaleString(\"en\").replace(/,/g, \"\") : x.toString(10);\n  } // Computes the decimal coefficient and exponent of the specified number x with\n  // significant digits p, where x is positive and p is in [1, 21] or undefined.\n  // For example, formatDecimalParts(1.23) returns [\"123\", 0].\n\n\n  function formatDecimalParts(x, p) {\n    if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n\n    var i,\n        coefficient = x.slice(0, i); // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n    // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n\n    return [coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient, +x.slice(i + 1)];\n  }\n\n  function exponent(x) {\n    return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n  }\n\n  function formatGroup(grouping, thousands) {\n    return function (value, width) {\n      var i = value.length,\n          t = [],\n          j = 0,\n          g = grouping[0],\n          length = 0;\n\n      while (i > 0 && g > 0) {\n        if (length + g + 1 > width) g = Math.max(1, width - length);\n        t.push(value.substring(i -= g, i + g));\n        if ((length += g + 1) > width) break;\n        g = grouping[j = (j + 1) % grouping.length];\n      }\n\n      return t.reverse().join(thousands);\n    };\n  }\n\n  function formatNumerals(numerals) {\n    return function (value) {\n      return value.replace(/[0-9]/g, function (i) {\n        return numerals[+i];\n      });\n    };\n  } // [[fill]align][sign][symbol][0][width][,][.precision][~][type]\n\n\n  var re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\n  function formatSpecifier(specifier) {\n    if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n    var match;\n    return new FormatSpecifier({\n      fill: match[1],\n      align: match[2],\n      sign: match[3],\n      symbol: match[4],\n      zero: match[5],\n      width: match[6],\n      comma: match[7],\n      precision: match[8] && match[8].slice(1),\n      trim: match[9],\n      type: match[10]\n    });\n  }\n\n  formatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\n  function FormatSpecifier(specifier) {\n    this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n    this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n    this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n    this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n    this.zero = !!specifier.zero;\n    this.width = specifier.width === undefined ? undefined : +specifier.width;\n    this.comma = !!specifier.comma;\n    this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n    this.trim = !!specifier.trim;\n    this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n  }\n\n  FormatSpecifier.prototype.toString = function () {\n    return this.fill + this.align + this.sign + this.symbol + (this.zero ? \"0\" : \"\") + (this.width === undefined ? \"\" : Math.max(1, this.width | 0)) + (this.comma ? \",\" : \"\") + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0)) + (this.trim ? \"~\" : \"\") + this.type;\n  }; // Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\n\n\n  function formatTrim(s) {\n    out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n      switch (s[i]) {\n        case \".\":\n          i0 = i1 = i;\n          break;\n\n        case \"0\":\n          if (i0 === 0) i0 = i;\n          i1 = i;\n          break;\n\n        default:\n          if (!+s[i]) break out;\n          if (i0 > 0) i0 = 0;\n          break;\n      }\n    }\n\n    return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n  }\n\n  var prefixExponent;\n\n  function formatPrefixAuto(x, p) {\n    var d = formatDecimalParts(x, p);\n    if (!d) return x + \"\";\n    var coefficient = d[0],\n        exponent = d[1],\n        i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n        n = coefficient.length;\n    return i === n ? coefficient : i > n ? coefficient + new Array(i - n + 1).join(\"0\") : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i) : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n  }\n\n  function formatRounded(x, p) {\n    var d = formatDecimalParts(x, p);\n    if (!d) return x + \"\";\n    var coefficient = d[0],\n        exponent = d[1];\n    return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1) : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n  }\n\n  var formatTypes = {\n    \"%\": (x, p) => (x * 100).toFixed(p),\n    \"b\": x => Math.round(x).toString(2),\n    \"c\": x => x + \"\",\n    \"d\": formatDecimal,\n    \"e\": (x, p) => x.toExponential(p),\n    \"f\": (x, p) => x.toFixed(p),\n    \"g\": (x, p) => x.toPrecision(p),\n    \"o\": x => Math.round(x).toString(8),\n    \"p\": (x, p) => formatRounded(x * 100, p),\n    \"r\": formatRounded,\n    \"s\": formatPrefixAuto,\n    \"X\": x => Math.round(x).toString(16).toUpperCase(),\n    \"x\": x => Math.round(x).toString(16)\n  };\n\n  function identity(x) {\n    return x;\n  }\n\n  var map = Array.prototype.map,\n      prefixes = [\"y\", \"z\", \"a\", \"f\", \"p\", \"n\", \"µ\", \"m\", \"\", \"k\", \"M\", \"G\", \"T\", \"P\", \"E\", \"Z\", \"Y\"];\n\n  function formatLocale$1(locale) {\n    var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n        currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n        currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n        decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n        numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n        percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n        minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n        nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n    function newFormat(specifier) {\n      specifier = formatSpecifier(specifier);\n      var fill = specifier.fill,\n          align = specifier.align,\n          sign = specifier.sign,\n          symbol = specifier.symbol,\n          zero = specifier.zero,\n          width = specifier.width,\n          comma = specifier.comma,\n          precision = specifier.precision,\n          trim = specifier.trim,\n          type = specifier.type; // The \"n\" type is an alias for \",g\".\n\n      if (type === \"n\") comma = true, type = \"g\"; // The \"\" type, and any invalid type, is an alias for \".12~g\".\n      else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\"; // If zero fill is specified, padding goes after sign and before digits.\n\n      if (zero || fill === \"0\" && align === \"=\") zero = true, fill = \"0\", align = \"=\"; // Compute the prefix and suffix.\n      // For SI-prefix, the suffix is lazily computed.\n\n      var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n          suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\"; // What format function should we use?\n      // Is this an integer type?\n      // Can this type generate exponential notation?\n\n      var formatType = formatTypes[type],\n          maybeSuffix = /[defgprs%]/.test(type); // Set the default precision if not specified,\n      // or clamp the specified precision to the supported range.\n      // For significant precision, it must be in [1, 21].\n      // For fixed precision, it must be in [0, 20].\n\n      precision = precision === undefined ? 6 : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision)) : Math.max(0, Math.min(20, precision));\n\n      function format(value) {\n        var valuePrefix = prefix,\n            valueSuffix = suffix,\n            i,\n            n,\n            c;\n\n        if (type === \"c\") {\n          valueSuffix = formatType(value) + valueSuffix;\n          value = \"\";\n        } else {\n          value = +value; // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n\n          var valueNegative = value < 0 || 1 / value < 0; // Perform the initial formatting.\n\n          value = isNaN(value) ? nan : formatType(Math.abs(value), precision); // Trim insignificant zeros.\n\n          if (trim) value = formatTrim(value); // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n\n          if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false; // Compute the prefix and suffix.\n\n          valuePrefix = (valueNegative ? sign === \"(\" ? sign : minus : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n          valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\"); // Break the formatted value into the integer “value” part that can be\n          // grouped, and fractional or exponential “suffix” part that is not.\n\n          if (maybeSuffix) {\n            i = -1, n = value.length;\n\n            while (++i < n) {\n              if (c = value.charCodeAt(i), 48 > c || c > 57) {\n                valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n                value = value.slice(0, i);\n                break;\n              }\n            }\n          }\n        } // If the fill character is not \"0\", grouping is applied before padding.\n\n\n        if (comma && !zero) value = group(value, Infinity); // Compute the padding.\n\n        var length = valuePrefix.length + value.length + valueSuffix.length,\n            padding = length < width ? new Array(width - length + 1).join(fill) : \"\"; // If the fill character is \"0\", grouping is applied after padding.\n\n        if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\"; // Reconstruct the final output based on the desired alignment.\n\n        switch (align) {\n          case \"<\":\n            value = valuePrefix + value + valueSuffix + padding;\n            break;\n\n          case \"=\":\n            value = valuePrefix + padding + value + valueSuffix;\n            break;\n\n          case \"^\":\n            value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length);\n            break;\n\n          default:\n            value = padding + valuePrefix + value + valueSuffix;\n            break;\n        }\n\n        return numerals(value);\n      }\n\n      format.toString = function () {\n        return specifier + \"\";\n      };\n\n      return format;\n    }\n\n    function formatPrefix(specifier, value) {\n      var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n          e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n          k = Math.pow(10, -e),\n          prefix = prefixes[8 + e / 3];\n      return function (value) {\n        return f(k * value) + prefix;\n      };\n    }\n\n    return {\n      format: newFormat,\n      formatPrefix: formatPrefix\n    };\n  }\n\n  var locale$1;\n  var format;\n  var formatPrefix;\n  defaultLocale$1({\n    thousands: \",\",\n    grouping: [3],\n    currency: [\"$\", \"\"]\n  });\n\n  function defaultLocale$1(definition) {\n    locale$1 = formatLocale$1(definition);\n    format = locale$1.format;\n    formatPrefix = locale$1.formatPrefix;\n    return locale$1;\n  }\n\n  function precisionFixed(step) {\n    return Math.max(0, -exponent(Math.abs(step)));\n  }\n\n  function precisionPrefix(step, value) {\n    return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n  }\n\n  function precisionRound(step, max) {\n    step = Math.abs(step), max = Math.abs(max) - step;\n    return Math.max(0, exponent(max) - exponent(step)) + 1;\n  }\n\n  function tickFormat(start, stop, count, specifier) {\n    var step = tickStep(start, stop, count),\n        precision;\n    specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n\n    switch (specifier.type) {\n      case \"s\":\n        {\n          var value = Math.max(Math.abs(start), Math.abs(stop));\n          if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n          return formatPrefix(specifier, value);\n        }\n\n      case \"\":\n      case \"e\":\n      case \"g\":\n      case \"p\":\n      case \"r\":\n        {\n          if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n          break;\n        }\n\n      case \"f\":\n      case \"%\":\n        {\n          if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n          break;\n        }\n    }\n\n    return format(specifier);\n  }\n\n  function linearish(scale) {\n    var domain = scale.domain;\n\n    scale.ticks = function (count) {\n      var d = domain();\n      return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n    };\n\n    scale.tickFormat = function (count, specifier) {\n      var d = domain();\n      return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n    };\n\n    scale.nice = function (count) {\n      if (count == null) count = 10;\n      var d = domain();\n      var i0 = 0;\n      var i1 = d.length - 1;\n      var start = d[i0];\n      var stop = d[i1];\n      var prestep;\n      var step;\n      var maxIter = 10;\n\n      if (stop < start) {\n        step = start, start = stop, stop = step;\n        step = i0, i0 = i1, i1 = step;\n      }\n\n      while (maxIter-- > 0) {\n        step = tickIncrement(start, stop, count);\n\n        if (step === prestep) {\n          d[i0] = start;\n          d[i1] = stop;\n          return domain(d);\n        } else if (step > 0) {\n          start = Math.floor(start / step) * step;\n          stop = Math.ceil(stop / step) * step;\n        } else if (step < 0) {\n          start = Math.ceil(start * step) / step;\n          stop = Math.floor(stop * step) / step;\n        } else {\n          break;\n        }\n\n        prestep = step;\n      }\n\n      return scale;\n    };\n\n    return scale;\n  }\n\n  function linear() {\n    var scale = continuous();\n\n    scale.copy = function () {\n      return copy(scale, linear());\n    };\n\n    initRange.apply(scale, arguments);\n    return linearish(scale);\n  }\n\n  function nice(domain, interval) {\n    domain = domain.slice();\n    var i0 = 0,\n        i1 = domain.length - 1,\n        x0 = domain[i0],\n        x1 = domain[i1],\n        t;\n\n    if (x1 < x0) {\n      t = i0, i0 = i1, i1 = t;\n      t = x0, x0 = x1, x1 = t;\n    }\n\n    domain[i0] = interval.floor(x0);\n    domain[i1] = interval.ceil(x1);\n    return domain;\n  }\n\n  function transformLog(x) {\n    return Math.log(x);\n  }\n\n  function transformExp(x) {\n    return Math.exp(x);\n  }\n\n  function transformLogn(x) {\n    return -Math.log(-x);\n  }\n\n  function transformExpn(x) {\n    return -Math.exp(-x);\n  }\n\n  function pow10(x) {\n    return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n  }\n\n  function powp(base) {\n    return base === 10 ? pow10 : base === Math.E ? Math.exp : function (x) {\n      return Math.pow(base, x);\n    };\n  }\n\n  function logp(base) {\n    return base === Math.E ? Math.log : base === 10 && Math.log10 || base === 2 && Math.log2 || (base = Math.log(base), function (x) {\n      return Math.log(x) / base;\n    });\n  }\n\n  function reflect(f) {\n    return function (x) {\n      return -f(-x);\n    };\n  }\n\n  function loggish(transform) {\n    var scale = transform(transformLog, transformExp),\n        domain = scale.domain,\n        base = 10,\n        logs,\n        pows;\n\n    function rescale() {\n      logs = logp(base), pows = powp(base);\n\n      if (domain()[0] < 0) {\n        logs = reflect(logs), pows = reflect(pows);\n        transform(transformLogn, transformExpn);\n      } else {\n        transform(transformLog, transformExp);\n      }\n\n      return scale;\n    }\n\n    scale.base = function (_) {\n      return arguments.length ? (base = +_, rescale()) : base;\n    };\n\n    scale.domain = function (_) {\n      return arguments.length ? (domain(_), rescale()) : domain();\n    };\n\n    scale.ticks = function (count) {\n      var d = domain(),\n          u = d[0],\n          v = d[d.length - 1],\n          r;\n      if (r = v < u) i = u, u = v, v = i;\n      var i = logs(u),\n          j = logs(v),\n          p,\n          k,\n          t,\n          n = count == null ? 10 : +count,\n          z = [];\n\n      if (!(base % 1) && j - i < n) {\n        i = Math.floor(i), j = Math.ceil(j);\n        if (u > 0) for (; i <= j; ++i) {\n          for (k = 1, p = pows(i); k < base; ++k) {\n            t = p * k;\n            if (t < u) continue;\n            if (t > v) break;\n            z.push(t);\n          }\n        } else for (; i <= j; ++i) {\n          for (k = base - 1, p = pows(i); k >= 1; --k) {\n            t = p * k;\n            if (t < u) continue;\n            if (t > v) break;\n            z.push(t);\n          }\n        }\n        if (z.length * 2 < n) z = ticks(u, v, n);\n      } else {\n        z = ticks(i, j, Math.min(j - i, n)).map(pows);\n      }\n\n      return r ? z.reverse() : z;\n    };\n\n    scale.tickFormat = function (count, specifier) {\n      if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n      if (typeof specifier !== \"function\") specifier = format(specifier);\n      if (count === Infinity) return specifier;\n      if (count == null) count = 10;\n      var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n\n      return function (d) {\n        var i = d / pows(Math.round(logs(d)));\n        if (i * base < base - 0.5) i *= base;\n        return i <= k ? specifier(d) : \"\";\n      };\n    };\n\n    scale.nice = function () {\n      return domain(nice(domain(), {\n        floor: function (x) {\n          return pows(Math.floor(logs(x)));\n        },\n        ceil: function (x) {\n          return pows(Math.ceil(logs(x)));\n        }\n      }));\n    };\n\n    return scale;\n  }\n\n  function log() {\n    var scale = loggish(transformer()).domain([1, 10]);\n\n    scale.copy = function () {\n      return copy(scale, log()).base(scale.base());\n    };\n\n    initRange.apply(scale, arguments);\n    return scale;\n  }\n\n  var t0 = new Date(),\n      t1 = new Date();\n\n  function newInterval(floori, offseti, count, field) {\n    function interval(date) {\n      return floori(date = arguments.length === 0 ? new Date() : new Date(+date)), date;\n    }\n\n    interval.floor = function (date) {\n      return floori(date = new Date(+date)), date;\n    };\n\n    interval.ceil = function (date) {\n      return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n    };\n\n    interval.round = function (date) {\n      var d0 = interval(date),\n          d1 = interval.ceil(date);\n      return date - d0 < d1 - date ? d0 : d1;\n    };\n\n    interval.offset = function (date, step) {\n      return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n    };\n\n    interval.range = function (start, stop, step) {\n      var range = [],\n          previous;\n      start = interval.ceil(start);\n      step = step == null ? 1 : Math.floor(step);\n      if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n\n      do range.push(previous = new Date(+start)), offseti(start, step), floori(start); while (previous < start && start < stop);\n\n      return range;\n    };\n\n    interval.filter = function (test) {\n      return newInterval(function (date) {\n        if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n      }, function (date, step) {\n        if (date >= date) {\n          if (step < 0) while (++step <= 0) {\n            while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n\n          } else while (--step >= 0) {\n            while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n\n          }\n        }\n      });\n    };\n\n    if (count) {\n      interval.count = function (start, end) {\n        t0.setTime(+start), t1.setTime(+end);\n        floori(t0), floori(t1);\n        return Math.floor(count(t0, t1));\n      };\n\n      interval.every = function (step) {\n        step = Math.floor(step);\n        return !isFinite(step) || !(step > 0) ? null : !(step > 1) ? interval : interval.filter(field ? function (d) {\n          return field(d) % step === 0;\n        } : function (d) {\n          return interval.count(0, d) % step === 0;\n        });\n      };\n    }\n\n    return interval;\n  }\n\n  var millisecond = newInterval(function () {// noop\n  }, function (date, step) {\n    date.setTime(+date + step);\n  }, function (start, end) {\n    return end - start;\n  }); // An optimized implementation for this simple case.\n\n  millisecond.every = function (k) {\n    k = Math.floor(k);\n    if (!isFinite(k) || !(k > 0)) return null;\n    if (!(k > 1)) return millisecond;\n    return newInterval(function (date) {\n      date.setTime(Math.floor(date / k) * k);\n    }, function (date, step) {\n      date.setTime(+date + step * k);\n    }, function (start, end) {\n      return (end - start) / k;\n    });\n  };\n\n  const durationSecond = 1000;\n  const durationMinute = durationSecond * 60;\n  const durationHour = durationMinute * 60;\n  const durationDay = durationHour * 24;\n  const durationWeek = durationDay * 7;\n  const durationMonth = durationDay * 30;\n  const durationYear = durationDay * 365;\n  var second = newInterval(function (date) {\n    date.setTime(date - date.getMilliseconds());\n  }, function (date, step) {\n    date.setTime(+date + step * durationSecond);\n  }, function (start, end) {\n    return (end - start) / durationSecond;\n  }, function (date) {\n    return date.getUTCSeconds();\n  });\n  var minute = newInterval(function (date) {\n    date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n  }, function (date, step) {\n    date.setTime(+date + step * durationMinute);\n  }, function (start, end) {\n    return (end - start) / durationMinute;\n  }, function (date) {\n    return date.getMinutes();\n  });\n  var hour = newInterval(function (date) {\n    date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n  }, function (date, step) {\n    date.setTime(+date + step * durationHour);\n  }, function (start, end) {\n    return (end - start) / durationHour;\n  }, function (date) {\n    return date.getHours();\n  });\n  var day = newInterval(date => date.setHours(0, 0, 0, 0), (date, step) => date.setDate(date.getDate() + step), (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay, date => date.getDate() - 1);\n\n  function weekday(i) {\n    return newInterval(function (date) {\n      date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n      date.setHours(0, 0, 0, 0);\n    }, function (date, step) {\n      date.setDate(date.getDate() + step * 7);\n    }, function (start, end) {\n      return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n    });\n  }\n\n  var sunday = weekday(0);\n  var monday = weekday(1);\n  weekday(2);\n  weekday(3);\n  var thursday = weekday(4);\n  weekday(5);\n  weekday(6);\n  var month = newInterval(function (date) {\n    date.setDate(1);\n    date.setHours(0, 0, 0, 0);\n  }, function (date, step) {\n    date.setMonth(date.getMonth() + step);\n  }, function (start, end) {\n    return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n  }, function (date) {\n    return date.getMonth();\n  });\n  var year = newInterval(function (date) {\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function (date, step) {\n    date.setFullYear(date.getFullYear() + step);\n  }, function (start, end) {\n    return end.getFullYear() - start.getFullYear();\n  }, function (date) {\n    return date.getFullYear();\n  }); // An optimized implementation for this simple case.\n\n  year.every = function (k) {\n    return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function (date) {\n      date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n      date.setMonth(0, 1);\n      date.setHours(0, 0, 0, 0);\n    }, function (date, step) {\n      date.setFullYear(date.getFullYear() + step * k);\n    });\n  };\n\n  var utcMinute = newInterval(function (date) {\n    date.setUTCSeconds(0, 0);\n  }, function (date, step) {\n    date.setTime(+date + step * durationMinute);\n  }, function (start, end) {\n    return (end - start) / durationMinute;\n  }, function (date) {\n    return date.getUTCMinutes();\n  });\n  var utcHour = newInterval(function (date) {\n    date.setUTCMinutes(0, 0, 0);\n  }, function (date, step) {\n    date.setTime(+date + step * durationHour);\n  }, function (start, end) {\n    return (end - start) / durationHour;\n  }, function (date) {\n    return date.getUTCHours();\n  });\n  var utcDay = newInterval(function (date) {\n    date.setUTCHours(0, 0, 0, 0);\n  }, function (date, step) {\n    date.setUTCDate(date.getUTCDate() + step);\n  }, function (start, end) {\n    return (end - start) / durationDay;\n  }, function (date) {\n    return date.getUTCDate() - 1;\n  });\n\n  function utcWeekday(i) {\n    return newInterval(function (date) {\n      date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n      date.setUTCHours(0, 0, 0, 0);\n    }, function (date, step) {\n      date.setUTCDate(date.getUTCDate() + step * 7);\n    }, function (start, end) {\n      return (end - start) / durationWeek;\n    });\n  }\n\n  var utcSunday = utcWeekday(0);\n  var utcMonday = utcWeekday(1);\n  utcWeekday(2);\n  utcWeekday(3);\n  var utcThursday = utcWeekday(4);\n  utcWeekday(5);\n  utcWeekday(6);\n  var utcMonth = newInterval(function (date) {\n    date.setUTCDate(1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function (date, step) {\n    date.setUTCMonth(date.getUTCMonth() + step);\n  }, function (start, end) {\n    return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n  }, function (date) {\n    return date.getUTCMonth();\n  });\n  var utcYear = newInterval(function (date) {\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function (date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step);\n  }, function (start, end) {\n    return end.getUTCFullYear() - start.getUTCFullYear();\n  }, function (date) {\n    return date.getUTCFullYear();\n  }); // An optimized implementation for this simple case.\n\n  utcYear.every = function (k) {\n    return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : newInterval(function (date) {\n      date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n      date.setUTCMonth(0, 1);\n      date.setUTCHours(0, 0, 0, 0);\n    }, function (date, step) {\n      date.setUTCFullYear(date.getUTCFullYear() + step * k);\n    });\n  };\n\n  function ticker(year, month, week, day, hour, minute) {\n    const tickIntervals = [[second, 1, durationSecond], [second, 5, 5 * durationSecond], [second, 15, 15 * durationSecond], [second, 30, 30 * durationSecond], [minute, 1, durationMinute], [minute, 5, 5 * durationMinute], [minute, 15, 15 * durationMinute], [minute, 30, 30 * durationMinute], [hour, 1, durationHour], [hour, 3, 3 * durationHour], [hour, 6, 6 * durationHour], [hour, 12, 12 * durationHour], [day, 1, durationDay], [day, 2, 2 * durationDay], [week, 1, durationWeek], [month, 1, durationMonth], [month, 3, 3 * durationMonth], [year, 1, durationYear]];\n\n    function ticks(start, stop, count) {\n      const reverse = stop < start;\n      if (reverse) [start, stop] = [stop, start];\n      const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n      const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n\n      return reverse ? ticks.reverse() : ticks;\n    }\n\n    function tickInterval(start, stop, count) {\n      const target = Math.abs(stop - start) / count;\n      const i = bisector(([,, step]) => step).right(tickIntervals, target);\n      if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n      if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n      const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n      return t.every(step);\n    }\n\n    return [ticks, tickInterval];\n  }\n\n  const [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcSunday, utcDay, utcHour, utcMinute);\n  const [timeTicks, timeTickInterval] = ticker(year, month, sunday, day, hour, minute);\n\n  function localDate(d) {\n    if (0 <= d.y && d.y < 100) {\n      var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n      date.setFullYear(d.y);\n      return date;\n    }\n\n    return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n  }\n\n  function utcDate(d) {\n    if (0 <= d.y && d.y < 100) {\n      var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n      date.setUTCFullYear(d.y);\n      return date;\n    }\n\n    return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n  }\n\n  function newDate(y, m, d) {\n    return {\n      y: y,\n      m: m,\n      d: d,\n      H: 0,\n      M: 0,\n      S: 0,\n      L: 0\n    };\n  }\n\n  function formatLocale(locale) {\n    var locale_dateTime = locale.dateTime,\n        locale_date = locale.date,\n        locale_time = locale.time,\n        locale_periods = locale.periods,\n        locale_weekdays = locale.days,\n        locale_shortWeekdays = locale.shortDays,\n        locale_months = locale.months,\n        locale_shortMonths = locale.shortMonths;\n    var periodRe = formatRe(locale_periods),\n        periodLookup = formatLookup(locale_periods),\n        weekdayRe = formatRe(locale_weekdays),\n        weekdayLookup = formatLookup(locale_weekdays),\n        shortWeekdayRe = formatRe(locale_shortWeekdays),\n        shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n        monthRe = formatRe(locale_months),\n        monthLookup = formatLookup(locale_months),\n        shortMonthRe = formatRe(locale_shortMonths),\n        shortMonthLookup = formatLookup(locale_shortMonths);\n    var formats = {\n      \"a\": formatShortWeekday,\n      \"A\": formatWeekday,\n      \"b\": formatShortMonth,\n      \"B\": formatMonth,\n      \"c\": null,\n      \"d\": formatDayOfMonth,\n      \"e\": formatDayOfMonth,\n      \"f\": formatMicroseconds,\n      \"g\": formatYearISO,\n      \"G\": formatFullYearISO,\n      \"H\": formatHour24,\n      \"I\": formatHour12,\n      \"j\": formatDayOfYear,\n      \"L\": formatMilliseconds,\n      \"m\": formatMonthNumber,\n      \"M\": formatMinutes,\n      \"p\": formatPeriod,\n      \"q\": formatQuarter,\n      \"Q\": formatUnixTimestamp,\n      \"s\": formatUnixTimestampSeconds,\n      \"S\": formatSeconds,\n      \"u\": formatWeekdayNumberMonday,\n      \"U\": formatWeekNumberSunday,\n      \"V\": formatWeekNumberISO,\n      \"w\": formatWeekdayNumberSunday,\n      \"W\": formatWeekNumberMonday,\n      \"x\": null,\n      \"X\": null,\n      \"y\": formatYear,\n      \"Y\": formatFullYear,\n      \"Z\": formatZone,\n      \"%\": formatLiteralPercent\n    };\n    var utcFormats = {\n      \"a\": formatUTCShortWeekday,\n      \"A\": formatUTCWeekday,\n      \"b\": formatUTCShortMonth,\n      \"B\": formatUTCMonth,\n      \"c\": null,\n      \"d\": formatUTCDayOfMonth,\n      \"e\": formatUTCDayOfMonth,\n      \"f\": formatUTCMicroseconds,\n      \"g\": formatUTCYearISO,\n      \"G\": formatUTCFullYearISO,\n      \"H\": formatUTCHour24,\n      \"I\": formatUTCHour12,\n      \"j\": formatUTCDayOfYear,\n      \"L\": formatUTCMilliseconds,\n      \"m\": formatUTCMonthNumber,\n      \"M\": formatUTCMinutes,\n      \"p\": formatUTCPeriod,\n      \"q\": formatUTCQuarter,\n      \"Q\": formatUnixTimestamp,\n      \"s\": formatUnixTimestampSeconds,\n      \"S\": formatUTCSeconds,\n      \"u\": formatUTCWeekdayNumberMonday,\n      \"U\": formatUTCWeekNumberSunday,\n      \"V\": formatUTCWeekNumberISO,\n      \"w\": formatUTCWeekdayNumberSunday,\n      \"W\": formatUTCWeekNumberMonday,\n      \"x\": null,\n      \"X\": null,\n      \"y\": formatUTCYear,\n      \"Y\": formatUTCFullYear,\n      \"Z\": formatUTCZone,\n      \"%\": formatLiteralPercent\n    };\n    var parses = {\n      \"a\": parseShortWeekday,\n      \"A\": parseWeekday,\n      \"b\": parseShortMonth,\n      \"B\": parseMonth,\n      \"c\": parseLocaleDateTime,\n      \"d\": parseDayOfMonth,\n      \"e\": parseDayOfMonth,\n      \"f\": parseMicroseconds,\n      \"g\": parseYear,\n      \"G\": parseFullYear,\n      \"H\": parseHour24,\n      \"I\": parseHour24,\n      \"j\": parseDayOfYear,\n      \"L\": parseMilliseconds,\n      \"m\": parseMonthNumber,\n      \"M\": parseMinutes,\n      \"p\": parsePeriod,\n      \"q\": parseQuarter,\n      \"Q\": parseUnixTimestamp,\n      \"s\": parseUnixTimestampSeconds,\n      \"S\": parseSeconds,\n      \"u\": parseWeekdayNumberMonday,\n      \"U\": parseWeekNumberSunday,\n      \"V\": parseWeekNumberISO,\n      \"w\": parseWeekdayNumberSunday,\n      \"W\": parseWeekNumberMonday,\n      \"x\": parseLocaleDate,\n      \"X\": parseLocaleTime,\n      \"y\": parseYear,\n      \"Y\": parseFullYear,\n      \"Z\": parseZone,\n      \"%\": parseLiteralPercent\n    }; // These recursive directive definitions must be deferred.\n\n    formats.x = newFormat(locale_date, formats);\n    formats.X = newFormat(locale_time, formats);\n    formats.c = newFormat(locale_dateTime, formats);\n    utcFormats.x = newFormat(locale_date, utcFormats);\n    utcFormats.X = newFormat(locale_time, utcFormats);\n    utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n    function newFormat(specifier, formats) {\n      return function (date) {\n        var string = [],\n            i = -1,\n            j = 0,\n            n = specifier.length,\n            c,\n            pad,\n            format;\n        if (!(date instanceof Date)) date = new Date(+date);\n\n        while (++i < n) {\n          if (specifier.charCodeAt(i) === 37) {\n            string.push(specifier.slice(j, i));\n            if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);else pad = c === \"e\" ? \" \" : \"0\";\n            if (format = formats[c]) c = format(date, pad);\n            string.push(c);\n            j = i + 1;\n          }\n        }\n\n        string.push(specifier.slice(j, i));\n        return string.join(\"\");\n      };\n    }\n\n    function newParse(specifier, Z) {\n      return function (string) {\n        var d = newDate(1900, undefined, 1),\n            i = parseSpecifier(d, specifier, string += \"\", 0),\n            week,\n            day$1;\n        if (i != string.length) return null; // If a UNIX timestamp is specified, return it.\n\n        if (\"Q\" in d) return new Date(d.Q);\n        if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0)); // If this is utcParse, never use the local timezone.\n\n        if (Z && !(\"Z\" in d)) d.Z = 0; // The am-pm flag is 0 for AM, and 1 for PM.\n\n        if (\"p\" in d) d.H = d.H % 12 + d.p * 12; // If the month was not specified, inherit from the quarter.\n\n        if (d.m === undefined) d.m = \"q\" in d ? d.q : 0; // Convert day-of-week and week-of-year to day-of-year.\n\n        if (\"V\" in d) {\n          if (d.V < 1 || d.V > 53) return null;\n          if (!(\"w\" in d)) d.w = 1;\n\n          if (\"Z\" in d) {\n            week = utcDate(newDate(d.y, 0, 1)), day$1 = week.getUTCDay();\n            week = day$1 > 4 || day$1 === 0 ? utcMonday.ceil(week) : utcMonday(week);\n            week = utcDay.offset(week, (d.V - 1) * 7);\n            d.y = week.getUTCFullYear();\n            d.m = week.getUTCMonth();\n            d.d = week.getUTCDate() + (d.w + 6) % 7;\n          } else {\n            week = localDate(newDate(d.y, 0, 1)), day$1 = week.getDay();\n            week = day$1 > 4 || day$1 === 0 ? monday.ceil(week) : monday(week);\n            week = day.offset(week, (d.V - 1) * 7);\n            d.y = week.getFullYear();\n            d.m = week.getMonth();\n            d.d = week.getDate() + (d.w + 6) % 7;\n          }\n        } else if (\"W\" in d || \"U\" in d) {\n          if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n          day$1 = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n          d.m = 0;\n          d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day$1 + 5) % 7 : d.w + d.U * 7 - (day$1 + 6) % 7;\n        } // If a time zone is specified, all fields are interpreted as UTC and then\n        // offset according to the specified time zone.\n\n\n        if (\"Z\" in d) {\n          d.H += d.Z / 100 | 0;\n          d.M += d.Z % 100;\n          return utcDate(d);\n        } // Otherwise, all fields are in local time.\n\n\n        return localDate(d);\n      };\n    }\n\n    function parseSpecifier(d, specifier, string, j) {\n      var i = 0,\n          n = specifier.length,\n          m = string.length,\n          c,\n          parse;\n\n      while (i < n) {\n        if (j >= m) return -1;\n        c = specifier.charCodeAt(i++);\n\n        if (c === 37) {\n          c = specifier.charAt(i++);\n          parse = parses[c in pads ? specifier.charAt(i++) : c];\n          if (!parse || (j = parse(d, string, j)) < 0) return -1;\n        } else if (c != string.charCodeAt(j++)) {\n          return -1;\n        }\n      }\n\n      return j;\n    }\n\n    function parsePeriod(d, string, i) {\n      var n = periodRe.exec(string.slice(i));\n      return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n\n    function parseShortWeekday(d, string, i) {\n      var n = shortWeekdayRe.exec(string.slice(i));\n      return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n\n    function parseWeekday(d, string, i) {\n      var n = weekdayRe.exec(string.slice(i));\n      return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n\n    function parseShortMonth(d, string, i) {\n      var n = shortMonthRe.exec(string.slice(i));\n      return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n\n    function parseMonth(d, string, i) {\n      var n = monthRe.exec(string.slice(i));\n      return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n    }\n\n    function parseLocaleDateTime(d, string, i) {\n      return parseSpecifier(d, locale_dateTime, string, i);\n    }\n\n    function parseLocaleDate(d, string, i) {\n      return parseSpecifier(d, locale_date, string, i);\n    }\n\n    function parseLocaleTime(d, string, i) {\n      return parseSpecifier(d, locale_time, string, i);\n    }\n\n    function formatShortWeekday(d) {\n      return locale_shortWeekdays[d.getDay()];\n    }\n\n    function formatWeekday(d) {\n      return locale_weekdays[d.getDay()];\n    }\n\n    function formatShortMonth(d) {\n      return locale_shortMonths[d.getMonth()];\n    }\n\n    function formatMonth(d) {\n      return locale_months[d.getMonth()];\n    }\n\n    function formatPeriod(d) {\n      return locale_periods[+(d.getHours() >= 12)];\n    }\n\n    function formatQuarter(d) {\n      return 1 + ~~(d.getMonth() / 3);\n    }\n\n    function formatUTCShortWeekday(d) {\n      return locale_shortWeekdays[d.getUTCDay()];\n    }\n\n    function formatUTCWeekday(d) {\n      return locale_weekdays[d.getUTCDay()];\n    }\n\n    function formatUTCShortMonth(d) {\n      return locale_shortMonths[d.getUTCMonth()];\n    }\n\n    function formatUTCMonth(d) {\n      return locale_months[d.getUTCMonth()];\n    }\n\n    function formatUTCPeriod(d) {\n      return locale_periods[+(d.getUTCHours() >= 12)];\n    }\n\n    function formatUTCQuarter(d) {\n      return 1 + ~~(d.getUTCMonth() / 3);\n    }\n\n    return {\n      format: function (specifier) {\n        var f = newFormat(specifier += \"\", formats);\n\n        f.toString = function () {\n          return specifier;\n        };\n\n        return f;\n      },\n      parse: function (specifier) {\n        var p = newParse(specifier += \"\", false);\n\n        p.toString = function () {\n          return specifier;\n        };\n\n        return p;\n      },\n      utcFormat: function (specifier) {\n        var f = newFormat(specifier += \"\", utcFormats);\n\n        f.toString = function () {\n          return specifier;\n        };\n\n        return f;\n      },\n      utcParse: function (specifier) {\n        var p = newParse(specifier += \"\", true);\n\n        p.toString = function () {\n          return specifier;\n        };\n\n        return p;\n      }\n    };\n  }\n\n  var pads = {\n    \"-\": \"\",\n    \"_\": \" \",\n    \"0\": \"0\"\n  },\n      numberRe = /^\\s*\\d+/,\n      // note: ignores next directive\n  percentRe = /^%/,\n      requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\n  function pad(value, fill, width) {\n    var sign = value < 0 ? \"-\" : \"\",\n        string = (sign ? -value : value) + \"\",\n        length = string.length;\n    return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n  }\n\n  function requote(s) {\n    return s.replace(requoteRe, \"\\\\$&\");\n  }\n\n  function formatRe(names) {\n    return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n  }\n\n  function formatLookup(names) {\n    return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n  }\n\n  function parseWeekdayNumberSunday(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 1));\n    return n ? (d.w = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseWeekdayNumberMonday(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 1));\n    return n ? (d.u = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseWeekNumberSunday(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.U = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseWeekNumberISO(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.V = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseWeekNumberMonday(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.W = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseFullYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 4));\n    return n ? (d.y = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n  }\n\n  function parseZone(d, string, i) {\n    var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n    return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n  }\n\n  function parseQuarter(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 1));\n    return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n  }\n\n  function parseMonthNumber(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n  }\n\n  function parseDayOfMonth(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.d = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseDayOfYear(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 3));\n    return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseHour24(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.H = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseMinutes(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.M = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseSeconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 2));\n    return n ? (d.S = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseMilliseconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 3));\n    return n ? (d.L = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseMicroseconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i, i + 6));\n    return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n  }\n\n  function parseLiteralPercent(d, string, i) {\n    var n = percentRe.exec(string.slice(i, i + 1));\n    return n ? i + n[0].length : -1;\n  }\n\n  function parseUnixTimestamp(d, string, i) {\n    var n = numberRe.exec(string.slice(i));\n    return n ? (d.Q = +n[0], i + n[0].length) : -1;\n  }\n\n  function parseUnixTimestampSeconds(d, string, i) {\n    var n = numberRe.exec(string.slice(i));\n    return n ? (d.s = +n[0], i + n[0].length) : -1;\n  }\n\n  function formatDayOfMonth(d, p) {\n    return pad(d.getDate(), p, 2);\n  }\n\n  function formatHour24(d, p) {\n    return pad(d.getHours(), p, 2);\n  }\n\n  function formatHour12(d, p) {\n    return pad(d.getHours() % 12 || 12, p, 2);\n  }\n\n  function formatDayOfYear(d, p) {\n    return pad(1 + day.count(year(d), d), p, 3);\n  }\n\n  function formatMilliseconds(d, p) {\n    return pad(d.getMilliseconds(), p, 3);\n  }\n\n  function formatMicroseconds(d, p) {\n    return formatMilliseconds(d, p) + \"000\";\n  }\n\n  function formatMonthNumber(d, p) {\n    return pad(d.getMonth() + 1, p, 2);\n  }\n\n  function formatMinutes(d, p) {\n    return pad(d.getMinutes(), p, 2);\n  }\n\n  function formatSeconds(d, p) {\n    return pad(d.getSeconds(), p, 2);\n  }\n\n  function formatWeekdayNumberMonday(d) {\n    var day = d.getDay();\n    return day === 0 ? 7 : day;\n  }\n\n  function formatWeekNumberSunday(d, p) {\n    return pad(sunday.count(year(d) - 1, d), p, 2);\n  }\n\n  function dISO(d) {\n    var day = d.getDay();\n    return day >= 4 || day === 0 ? thursday(d) : thursday.ceil(d);\n  }\n\n  function formatWeekNumberISO(d, p) {\n    d = dISO(d);\n    return pad(thursday.count(year(d), d) + (year(d).getDay() === 4), p, 2);\n  }\n\n  function formatWeekdayNumberSunday(d) {\n    return d.getDay();\n  }\n\n  function formatWeekNumberMonday(d, p) {\n    return pad(monday.count(year(d) - 1, d), p, 2);\n  }\n\n  function formatYear(d, p) {\n    return pad(d.getFullYear() % 100, p, 2);\n  }\n\n  function formatYearISO(d, p) {\n    d = dISO(d);\n    return pad(d.getFullYear() % 100, p, 2);\n  }\n\n  function formatFullYear(d, p) {\n    return pad(d.getFullYear() % 10000, p, 4);\n  }\n\n  function formatFullYearISO(d, p) {\n    var day = d.getDay();\n    d = day >= 4 || day === 0 ? thursday(d) : thursday.ceil(d);\n    return pad(d.getFullYear() % 10000, p, 4);\n  }\n\n  function formatZone(d) {\n    var z = d.getTimezoneOffset();\n    return (z > 0 ? \"-\" : (z *= -1, \"+\")) + pad(z / 60 | 0, \"0\", 2) + pad(z % 60, \"0\", 2);\n  }\n\n  function formatUTCDayOfMonth(d, p) {\n    return pad(d.getUTCDate(), p, 2);\n  }\n\n  function formatUTCHour24(d, p) {\n    return pad(d.getUTCHours(), p, 2);\n  }\n\n  function formatUTCHour12(d, p) {\n    return pad(d.getUTCHours() % 12 || 12, p, 2);\n  }\n\n  function formatUTCDayOfYear(d, p) {\n    return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n  }\n\n  function formatUTCMilliseconds(d, p) {\n    return pad(d.getUTCMilliseconds(), p, 3);\n  }\n\n  function formatUTCMicroseconds(d, p) {\n    return formatUTCMilliseconds(d, p) + \"000\";\n  }\n\n  function formatUTCMonthNumber(d, p) {\n    return pad(d.getUTCMonth() + 1, p, 2);\n  }\n\n  function formatUTCMinutes(d, p) {\n    return pad(d.getUTCMinutes(), p, 2);\n  }\n\n  function formatUTCSeconds(d, p) {\n    return pad(d.getUTCSeconds(), p, 2);\n  }\n\n  function formatUTCWeekdayNumberMonday(d) {\n    var dow = d.getUTCDay();\n    return dow === 0 ? 7 : dow;\n  }\n\n  function formatUTCWeekNumberSunday(d, p) {\n    return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n  }\n\n  function UTCdISO(d) {\n    var day = d.getUTCDay();\n    return day >= 4 || day === 0 ? utcThursday(d) : utcThursday.ceil(d);\n  }\n\n  function formatUTCWeekNumberISO(d, p) {\n    d = UTCdISO(d);\n    return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n  }\n\n  function formatUTCWeekdayNumberSunday(d) {\n    return d.getUTCDay();\n  }\n\n  function formatUTCWeekNumberMonday(d, p) {\n    return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n  }\n\n  function formatUTCYear(d, p) {\n    return pad(d.getUTCFullYear() % 100, p, 2);\n  }\n\n  function formatUTCYearISO(d, p) {\n    d = UTCdISO(d);\n    return pad(d.getUTCFullYear() % 100, p, 2);\n  }\n\n  function formatUTCFullYear(d, p) {\n    return pad(d.getUTCFullYear() % 10000, p, 4);\n  }\n\n  function formatUTCFullYearISO(d, p) {\n    var day = d.getUTCDay();\n    d = day >= 4 || day === 0 ? utcThursday(d) : utcThursday.ceil(d);\n    return pad(d.getUTCFullYear() % 10000, p, 4);\n  }\n\n  function formatUTCZone() {\n    return \"+0000\";\n  }\n\n  function formatLiteralPercent() {\n    return \"%\";\n  }\n\n  function formatUnixTimestamp(d) {\n    return +d;\n  }\n\n  function formatUnixTimestampSeconds(d) {\n    return Math.floor(+d / 1000);\n  }\n\n  var locale;\n  var timeFormat;\n  var utcFormat;\n  defaultLocale({\n    dateTime: \"%x, %X\",\n    date: \"%-m/%-d/%Y\",\n    time: \"%-I:%M:%S %p\",\n    periods: [\"AM\", \"PM\"],\n    days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n    shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n    months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n    shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n  });\n\n  function defaultLocale(definition) {\n    locale = formatLocale(definition);\n    timeFormat = locale.format;\n    utcFormat = locale.utcFormat;\n    return locale;\n  }\n\n  function date(t) {\n    return new Date(t);\n  }\n\n  function number(t) {\n    return t instanceof Date ? +t : +new Date(+t);\n  }\n\n  function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n    var scale = continuous(),\n        invert = scale.invert,\n        domain = scale.domain;\n    var formatMillisecond = format(\".%L\"),\n        formatSecond = format(\":%S\"),\n        formatMinute = format(\"%I:%M\"),\n        formatHour = format(\"%I %p\"),\n        formatDay = format(\"%a %d\"),\n        formatWeek = format(\"%b %d\"),\n        formatMonth = format(\"%B\"),\n        formatYear = format(\"%Y\");\n\n    function tickFormat(date) {\n      return (second(date) < date ? formatMillisecond : minute(date) < date ? formatSecond : hour(date) < date ? formatMinute : day(date) < date ? formatHour : month(date) < date ? week(date) < date ? formatDay : formatWeek : year(date) < date ? formatMonth : formatYear)(date);\n    }\n\n    scale.invert = function (y) {\n      return new Date(invert(y));\n    };\n\n    scale.domain = function (_) {\n      return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n    };\n\n    scale.ticks = function (interval) {\n      var d = domain();\n      return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    };\n\n    scale.tickFormat = function (count, specifier) {\n      return specifier == null ? tickFormat : format(specifier);\n    };\n\n    scale.nice = function (interval) {\n      var d = domain();\n      if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n      return interval ? domain(nice(d, interval)) : scale;\n    };\n\n    scale.copy = function () {\n      return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n    };\n\n    return scale;\n  }\n\n  function time() {\n    return initRange.apply(calendar(timeTicks, timeTickInterval, year, month, sunday, day, hour, minute, second, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n  }\n\n  function utcTime() {\n    return initRange.apply(calendar(utcTicks, utcTickInterval, utcYear, utcMonth, utcSunday, utcDay, utcHour, utcMinute, second, utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]), arguments);\n  }\n\n  function defaultAxisOptions(options) {\n    var _options$elementType, _options$minTickPaddi, _options$tickLabelRot, _options$innerBandPad, _options$outerBandPad, _options$show, _options$stacked;\n\n    return _extends({}, options, {\n      elementType: (_options$elementType = options.elementType) != null ? _options$elementType : 'line',\n      minTickPaddingForRotation: (_options$minTickPaddi = options.minTickPaddingForRotation) != null ? _options$minTickPaddi : 10,\n      tickLabelRotationDeg: (_options$tickLabelRot = options.tickLabelRotationDeg) != null ? _options$tickLabelRot : 60,\n      innerBandPadding: (_options$innerBandPad = options.innerBandPadding) != null ? _options$innerBandPad : 0.6,\n      outerBandPadding: (_options$outerBandPad = options.outerBandPadding) != null ? _options$outerBandPad : 0.2,\n      show: (_options$show = options.show) != null ? _options$show : true,\n      stacked: (_options$stacked = options.stacked) != null ? _options$stacked : false\n    });\n  }\n\n  function buildAxisLinear(isPrimary, userOptions, series, gridDimensions, width, height) {\n    var options = defaultAxisOptions(userOptions);\n\n    if (!options.position) {\n      throw new Error(\"Chart axes must have a valid 'position' property\");\n    }\n\n    var isVertical = ['left', 'right'].indexOf(options.position) > -1; // Now we need to figure out the range\n\n    var range = isVertical ? [gridDimensions.gridHeight, 0] : [0, gridDimensions.gridWidth];\n    var outerRange = isVertical ? [height, 0] : [0, width]; // Give the scale a home\n\n    return options.scaleType === 'time' || options.scaleType === 'localTime' ? buildTimeAxis(isPrimary, options, series, isVertical, range, outerRange) : options.scaleType === 'linear' || options.scaleType === 'log' ? buildLinearAxis(isPrimary, options, series, isVertical, range, outerRange) : options.scaleType === 'band' ? buildBandAxis(options, series, isVertical, range, outerRange) : function () {\n      throw new Error('Invalid scale type');\n    }();\n  }\n\n  function buildTimeAxis(isPrimary, options, series, isVertical, range, outerRange) {\n    var scaleFn = options.scaleType === 'localTime' ? time : utcTime; // Now set the range\n\n    var scale = scaleFn(range);\n    var allDatums = series.map(function (d) {\n      return d.datums;\n    }).flat();\n\n    var _extent = extent(allDatums, function (datum) {\n      return options.getValue(datum.originalDatum);\n    }),\n        minValue = _extent[0],\n        maxValue = _extent[1];\n\n    var shouldNice = true;\n\n    if (typeof options.min === 'number') {\n      minValue = min([options.min, minValue]);\n      shouldNice = false;\n    }\n\n    if (typeof options.max === 'number') {\n      maxValue = max([options.max, maxValue]);\n      shouldNice = false;\n    }\n\n    if (typeof options.hardMin === 'number') {\n      minValue = options.hardMin;\n      shouldNice = false;\n    }\n\n    if (typeof options.hardMax === 'number') {\n      maxValue = options.hardMax;\n      shouldNice = false;\n    }\n\n    if (minValue === undefined || maxValue === undefined) {\n      console.info({\n        options: options,\n        series: series,\n        range: range,\n        values: allDatums.map(function (d) {\n          return options.getValue(d.originalDatum);\n        })\n      });\n      throw new Error('Invalid scale min/max');\n    } // Set the domain\n\n\n    scale.domain([minValue, maxValue]);\n\n    if (options.invert) {\n      scale.domain(Array.from(scale.domain()).reverse());\n    }\n\n    if (shouldNice) {\n      scale.nice();\n    }\n\n    var outerScale = scale.copy().range(outerRange); // Supplmentary band scale\n\n    var bandScale = isPrimary ? buildImpliedBandScale(options, scale, series, range) : undefined;\n    var defaultFormat = scale.tickFormat();\n    var formatters = {};\n\n    var scaleFormat = function scaleFormat(value) {\n      var _options$formatters$s, _options$formatters;\n\n      return (_options$formatters$s = (_options$formatters = options.formatters) == null ? void 0 : _options$formatters.scale == null ? void 0 : _options$formatters.scale(value, _extends({}, formatters, {\n        scale: undefined\n      }))) != null ? _options$formatters$s : defaultFormat(value);\n    };\n\n    var tooltipFormat = function tooltipFormat(value) {\n      var _options$formatters$t, _options$formatters2;\n\n      return (_options$formatters$t = (_options$formatters2 = options.formatters) == null ? void 0 : _options$formatters2.tooltip == null ? void 0 : _options$formatters2.tooltip(value, _extends({}, formatters, {\n        tooltip: undefined\n      }))) != null ? _options$formatters$t : scaleFormat(value);\n    };\n\n    var cursorFormat = function cursorFormat(value) {\n      var _options$formatters$c, _options$formatters3;\n\n      return (_options$formatters$c = (_options$formatters3 = options.formatters) == null ? void 0 : _options$formatters3.cursor == null ? void 0 : _options$formatters3.cursor(value, _extends({}, formatters, {\n        cursor: undefined\n      }))) != null ? _options$formatters$c : tooltipFormat(value);\n    };\n\n    Object.assign(formatters, {\n      \"default\": defaultFormat,\n      scale: scaleFormat,\n      tooltip: tooltipFormat,\n      cursor: cursorFormat\n    });\n    return _extends({}, options, {\n      axisFamily: 'time',\n      isVertical: isVertical,\n      scale: scale,\n      range: range,\n      outerScale: outerScale,\n      bandScale: bandScale,\n      formatters: formatters\n    });\n  }\n\n  function buildLinearAxis(isPrimary, options, series, isVertical, range, outerRange) {\n    var scale = options.scaleType === 'log' ? log() : linear();\n    var allDatums = series.map(function (d) {\n      return d.datums;\n    }).flat(2);\n\n    var _ref = options.stacked ? extent(series.map(function (s) {\n      return s.datums.map(function (datum) {\n        var _datum$stackData;\n\n        return (_datum$stackData = datum.stackData) != null ? _datum$stackData : [];\n      });\n    }).flat(2)) : extent(allDatums, function (datum) {\n      return options.getValue(datum.originalDatum);\n    }),\n        minValue = _ref[0],\n        maxValue = _ref[1];\n\n    var shouldNice = true;\n\n    if (typeof options.min === 'number') {\n      minValue = min([options.min, minValue]);\n      shouldNice = false;\n    }\n\n    if (typeof options.max === 'number') {\n      maxValue = max([options.max, maxValue]);\n      shouldNice = false;\n    }\n\n    if (typeof options.minDomainLength === 'number' && !(minValue === undefined || maxValue === undefined)) {\n      var mid = median([minValue, maxValue]);\n      var top = mid + options.minDomainLength / 2;\n      var bottom = mid - options.minDomainLength / 2;\n      maxValue = Math.max(top, maxValue);\n      minValue = Math.min(bottom, minValue);\n    }\n\n    if (typeof options.hardMin === 'number') {\n      minValue = options.hardMin;\n      shouldNice = false;\n    }\n\n    if (typeof options.hardMax === 'number') {\n      maxValue = options.hardMax;\n      shouldNice = false;\n    }\n\n    if (minValue === undefined || maxValue === undefined) {\n      console.info({\n        options: options,\n        series: series,\n        range: range,\n        values: allDatums.map(function (d) {\n          return options.getValue(d.originalDatum);\n        })\n      });\n      throw new Error('Invalid scale min/max');\n    } // Set the domain\n\n\n    scale.domain([minValue, maxValue]);\n\n    if (options.invert) {\n      scale.domain(Array.from(scale.domain()).reverse());\n    }\n\n    scale.range(range);\n\n    if (shouldNice) {\n      scale.nice();\n    }\n\n    var outerScale = scale.copy().range(outerRange);\n    var bandScale = isPrimary ? buildImpliedBandScale(options, scale, series, range) : undefined;\n    var defaultFormat = scale.tickFormat();\n    var formatters = {};\n\n    var scaleFormat = function scaleFormat(value) {\n      var _options$formatters$s2, _options$formatters4;\n\n      return (_options$formatters$s2 = (_options$formatters4 = options.formatters) == null ? void 0 : _options$formatters4.scale == null ? void 0 : _options$formatters4.scale(value, _extends({}, formatters, {\n        scale: undefined\n      }))) != null ? _options$formatters$s2 : defaultFormat(value);\n    };\n\n    var tooltipFormat = function tooltipFormat(value) {\n      var _options$formatters$t2, _options$formatters5;\n\n      return (_options$formatters$t2 = (_options$formatters5 = options.formatters) == null ? void 0 : _options$formatters5.tooltip == null ? void 0 : _options$formatters5.tooltip(value, _extends({}, formatters, {\n        tooltip: undefined\n      }))) != null ? _options$formatters$t2 : scaleFormat(value);\n    };\n\n    var cursorFormat = function cursorFormat(value) {\n      var _options$formatters$c2, _options$formatters6;\n\n      return (_options$formatters$c2 = (_options$formatters6 = options.formatters) == null ? void 0 : _options$formatters6.cursor == null ? void 0 : _options$formatters6.cursor(value, _extends({}, formatters, {\n        cursor: undefined\n      }))) != null ? _options$formatters$c2 : tooltipFormat(value);\n    };\n\n    Object.assign(formatters, {\n      \"default\": defaultFormat,\n      scale: scaleFormat,\n      tooltip: tooltipFormat,\n      cursor: cursorFormat\n    });\n    return _extends({}, options, {\n      axisFamily: 'linear',\n      isVertical: isVertical,\n      scale: scale,\n      range: range,\n      outerScale: outerScale,\n      bandScale: bandScale,\n      formatters: formatters\n    });\n  }\n\n  function buildBandAxis(options, series, isVertical, range, outerRange) {\n    var _options$outerBandPad2, _options$innerBandPad2;\n\n    var domain = Array.from(new Set(series.map(function (d) {\n      return d.datums;\n    }).flat().map(function (datum) {\n      return options.getValue(datum.originalDatum);\n    })));\n    var scale = band(domain, range).round(false).paddingOuter((_options$outerBandPad2 = options.outerBandPadding) != null ? _options$outerBandPad2 : 0).paddingInner((_options$innerBandPad2 = options.innerBandPadding) != null ? _options$innerBandPad2 : 0); // Invert if necessary\n\n    if (options.invert) {\n      scale.domain(Array.from(scale.domain()).reverse());\n    }\n\n    var outerScale = scale.copy().range(outerRange);\n\n    var defaultFormat = function defaultFormat(d) {\n      return d;\n    };\n\n    var formatters = {};\n\n    var scaleFormat = function scaleFormat(value) {\n      var _options$formatters$s3, _options$formatters7;\n\n      return (_options$formatters$s3 = (_options$formatters7 = options.formatters) == null ? void 0 : _options$formatters7.scale == null ? void 0 : _options$formatters7.scale(value, _extends({}, formatters, {\n        scale: undefined\n      }))) != null ? _options$formatters$s3 : defaultFormat(value);\n    };\n\n    var tooltipFormat = function tooltipFormat(value) {\n      var _options$formatters$t3, _options$formatters8;\n\n      return (_options$formatters$t3 = (_options$formatters8 = options.formatters) == null ? void 0 : _options$formatters8.tooltip == null ? void 0 : _options$formatters8.tooltip(value, _extends({}, formatters, {\n        tooltip: undefined\n      }))) != null ? _options$formatters$t3 : scaleFormat(value);\n    };\n\n    var cursorFormat = function cursorFormat(value) {\n      var _options$formatters$c3, _options$formatters9;\n\n      return (_options$formatters$c3 = (_options$formatters9 = options.formatters) == null ? void 0 : _options$formatters9.cursor == null ? void 0 : _options$formatters9.cursor(value, _extends({}, formatters, {\n        cursor: undefined\n      }))) != null ? _options$formatters$c3 : tooltipFormat(value);\n    };\n\n    Object.assign(formatters, {\n      \"default\": defaultFormat,\n      scale: scaleFormat,\n      tooltip: tooltipFormat,\n      cursor: cursorFormat\n    });\n    return _extends({}, options, {\n      axisFamily: 'band',\n      isVertical: isVertical,\n      scale: scale,\n      range: range,\n      outerScale: outerScale,\n      formatters: formatters\n    });\n  } //\n\n\n  function buildImpliedBandScale(options, scale, series, range) {\n    var _options$outerBandPad3, _options$innerBandPad3; // Find the two closest points along axis\n\n\n    var impliedBandWidth = Math.max.apply(Math, range);\n    series.forEach(function (serie) {\n      serie.datums.forEach(function (d1) {\n        var _options$getValue;\n\n        var one = scale((_options$getValue = options.getValue(d1.originalDatum)) != null ? _options$getValue : NaN);\n        serie.datums.forEach(function (d2) {\n          var _options$getValue2;\n\n          var two = scale((_options$getValue2 = options.getValue(d2.originalDatum)) != null ? _options$getValue2 : NaN);\n\n          if (one === two) {\n            return;\n          }\n\n          var r = [one, two].sort();\n          var diff = Math.abs(r[1] - r[0]);\n\n          if (diff < impliedBandWidth) {\n            impliedBandWidth = diff;\n          }\n        });\n      });\n    });\n    var bandRange = Math.max.apply(Math, range);\n    var bandDomain = d3Range(bandRange / impliedBandWidth);\n    var bandScale = band(bandDomain, range).round(false).paddingOuter((_options$outerBandPad3 = options.outerBandPadding) != null ? _options$outerBandPad3 : 0).paddingInner((_options$innerBandPad3 = options.innerBandPadding) != null ? _options$innerBandPad3 : 0);\n    return bandScale;\n  }\n\n  var getElBox = function getElBox(el) {\n    var rect = el.getBoundingClientRect();\n    return {\n      top: Math.round(rect.top),\n      right: Math.round(rect.right),\n      bottom: Math.round(rect.bottom),\n      left: Math.round(rect.left),\n      width: Math.round(rect.width),\n      height: Math.round(rect.height),\n      x: Math.round(rect.x),\n      y: Math.round(rect.y)\n    };\n  };\n\n  function useMeasure(_ref) {\n    var axis = _ref.axis,\n        elRef = _ref.elRef,\n        gridDimensions = _ref.gridDimensions,\n        setShowRotated = _ref.setShowRotated;\n\n    var _useChartContext = useChartContext(),\n        axisDimensionsState = _useChartContext.axisDimensionsState;\n\n    var axisDimensions = axisDimensionsState[0],\n        setAxisDimensions = axisDimensionsState[1];\n    var axisDimension = React__default['default'].useMemo(function () {\n      var _axisDimensions;\n\n      return (_axisDimensions = axisDimensions[axis.position]) == null ? void 0 : _axisDimensions[axis.id];\n    }, [axisDimensions, axis.position, axis.id]); // const isLooping = useIsLooping()\n\n    var measureRotation = React__default['default'].useCallback(function () {\n      var _widestLabel2;\n\n      if (!elRef.current) {\n        return;\n      }\n\n      var gridSize = !axis.isVertical ? gridDimensions.gridWidth : gridDimensions.gridHeight;\n      var staticLabelDims = Array.from(elRef.current.querySelectorAll('.Axis-Group.outer .tickLabel')).map(function (el) {\n        return getElBox(el);\n      }); // Determine the largest labels on the axis\n\n      var widestLabel;\n      staticLabelDims.forEach(function (label) {\n        var _widestLabel;\n\n        var resolvedLabel = (_widestLabel = widestLabel) != null ? _widestLabel : {\n          width: 0\n        };\n\n        if (label.width > 0 && label.width > resolvedLabel.width) {\n          widestLabel = label;\n        }\n      });\n      var smallestTickGap = gridSize;\n\n      if (staticLabelDims.length > 1) {\n        staticLabelDims.forEach(function (current, i) {\n          var prev = staticLabelDims[i - 1];\n\n          if (prev) {\n            smallestTickGap = Math.min(smallestTickGap, axis.isVertical ? current.top - prev.top : current.left - prev.left);\n          }\n        });\n      }\n\n      var shouldRotate = (((_widestLabel2 = widestLabel) == null ? void 0 : _widestLabel2.width) || 0) + axis.minTickPaddingForRotation > smallestTickGap; // if (!isLooping) {\n      // Rotate ticks for non-time horizontal axes\n\n      if (!axis.isVertical) {\n        setShowRotated(shouldRotate);\n      } // }\n\n    }, [elRef, axis.isVertical, axis.minTickPaddingForRotation, gridDimensions.gridWidth, gridDimensions.gridHeight, setShowRotated]);\n    var measureDimensions = React__default['default'].useCallback(function () {\n      if (!elRef.current) {\n        if (axisDimension) {\n          // If the entire axis is hidden, then we need to remove the axis dimensions\n          setAxisDimensions(function (old) {\n            var _old$axis$position, _extends2;\n\n            var newAxes = _extends({}, (_old$axis$position = old[axis.position]) != null ? _old$axis$position : {});\n\n            delete newAxes[axis.id];\n            return _extends({}, old, (_extends2 = {}, _extends2[axis.position] = newAxes, _extends2));\n          });\n        }\n\n        return;\n      }\n\n      var newDimensions = {\n        width: 0,\n        height: 0,\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0\n      };\n      var domainEl = elRef.current.querySelector(\".Axis-Group.inner .domain\");\n\n      if (!domainEl) {\n        return;\n      }\n\n      var domainDims = getElBox(domainEl);\n      var measureDims = Array.from(elRef.current.querySelectorAll('.Axis-Group.inner .tickLabel')).map(function (el) {\n        return getElBox(el);\n      }); // Determine the largest labels on the axis\n\n      var widestRealLabel = measureDims[0];\n      var tallestRealLabel = measureDims[0];\n      measureDims.forEach(function (d) {\n        if (d.width > 0 && d.width > widestRealLabel.width) {\n          widestRealLabel = d;\n        }\n\n        if (d.height > 0 && d.height > tallestRealLabel.height) {\n          tallestRealLabel = d;\n        }\n      }); // Axis overflow measurements\n\n      if (!axis.isVertical) {\n        var _tallestRealLabel$hei, _tallestRealLabel;\n\n        if (measureDims.length) {\n          var leftMostLabelDim = measureDims.reduce(function (d, labelDim) {\n            return labelDim.left < d.left ? labelDim : d;\n          });\n          var rightMostLabelDim = measureDims.reduce(function (d, labelDim) {\n            return labelDim.right > d.right ? labelDim : d;\n          });\n          newDimensions.left = Math.round(Math.max(0, domainDims.left - (leftMostLabelDim == null ? void 0 : leftMostLabelDim.left)));\n          newDimensions.right = Math.round(Math.max(0, (rightMostLabelDim == null ? void 0 : rightMostLabelDim.right) - domainDims.right));\n        }\n\n        newDimensions.height = Math.round( // Math.max(axis.tickSizeInner, axis.tickSizeOuter) +\n        8 + axis.minTickPaddingForRotation + ((_tallestRealLabel$hei = (_tallestRealLabel = tallestRealLabel) == null ? void 0 : _tallestRealLabel.height) != null ? _tallestRealLabel$hei : 0));\n      } else {\n        var _widestRealLabel$widt, _widestRealLabel;\n\n        if (measureDims.length) {\n          var topMostLabelDim = measureDims.reduce(function (d, labelDim) {\n            return labelDim.top < d.top ? labelDim : d;\n          });\n          var bottomMostLabelDim = measureDims.reduce(function (d, labelDim) {\n            return labelDim.bottom > d.bottom ? labelDim : d;\n          });\n          newDimensions.top = Math.round(Math.max(0, domainDims.top - (topMostLabelDim == null ? void 0 : topMostLabelDim.top)));\n          newDimensions.bottom = Math.round(Math.max(0, (bottomMostLabelDim == null ? void 0 : bottomMostLabelDim.bottom) - domainDims.bottom));\n        }\n\n        newDimensions.width = Math.round( // Math.max(axis.tickSizeInner, axis.tickSizeOuter) +\n        8 + axis.minTickPaddingForRotation + ((_widestRealLabel$widt = (_widestRealLabel = widestRealLabel) == null ? void 0 : _widestRealLabel.width) != null ? _widestRealLabel$widt : 0));\n      } // Only update the axisDimensions if something has changed\n\n\n      if ( // !isLooping &&\n      !axisDimensions || !axisDimension || Object.keys(newDimensions).some(function (key) {\n        // @ts-ignore\n        return newDimensions[key] !== axisDimension[key];\n      })) {\n        setAxisDimensions(function (old) {\n          var _old$axis$position2, _extends3, _extends4;\n\n          return _extends({}, old, (_extends4 = {}, _extends4[axis.position] = _extends({}, (_old$axis$position2 = old[axis.position]) != null ? _old$axis$position2 : {}, (_extends3 = {}, _extends3[axis.id] = newDimensions, _extends3)), _extends4));\n        });\n      }\n    }, [axis.id, axis.isVertical, axis.position, axis.minTickPaddingForRotation, axisDimension, axisDimensions, elRef, setAxisDimensions]); // Measure after if needed\n\n    useIsomorphicLayoutEffect(function () {\n      measureRotation();\n    }, [measureRotation]);\n    useIsomorphicLayoutEffect(function () {\n      measureDimensions();\n    }, [measureRotation]);\n  }\n\n  function AxisLinearComp(axis) {\n    var _React$useState = React__default['default'].useState(false),\n        showRotated = _React$useState[0],\n        setShowRotated = _React$useState[1];\n\n    var _useChartContext = useChartContext(),\n        getOptions = _useChartContext.getOptions,\n        gridDimensions = _useChartContext.gridDimensions,\n        width = _useChartContext.width,\n        height = _useChartContext.height;\n\n    var _getOptions = getOptions(),\n        dark = _getOptions.dark,\n        showDebugAxes = _getOptions.showDebugAxes;\n\n    var elRef = React__default['default'].useRef(null);\n    useMeasure({\n      axis: axis,\n      elRef: elRef,\n      gridDimensions: gridDimensions,\n      showRotated: showRotated,\n      setShowRotated: setShowRotated\n    });\n\n    var renderAxis = function renderAxis(isOuter) {\n      var isRotated = !isOuter && showRotated;\n      var scale = isOuter ? axis.outerScale : axis.scale;\n\n      var _scale$range = scale.range(),\n          rangeStart = _scale$range[0],\n          rangeEnd = _scale$range[1];\n\n      var getTicks = function getTicks(scale, num) {\n        if (scale.ticks) {\n          return scale.ticks(num);\n        }\n\n        return scale.domain();\n      };\n\n      var resolvedHeight = isOuter ? height : gridDimensions.gridHeight;\n      var resolvedWidth = isOuter ? width : gridDimensions.gridWidth;\n\n      var _ref = axis.position === 'left' ? [{\n        x: 0,\n        y: rangeStart\n      }, {\n        x: 0,\n        y: rangeEnd\n      }] : axis.position === 'right' ? [{\n        x: resolvedWidth,\n        y: rangeStart\n      }, {\n        x: resolvedWidth,\n        y: rangeEnd\n      }] : axis.position === 'top' ? [{\n        x: rangeStart,\n        y: 0\n      }, {\n        x: rangeEnd,\n        y: 0\n      }] : [{\n        x: rangeStart,\n        y: resolvedHeight\n      }, {\n        x: rangeEnd,\n        y: resolvedHeight\n      }],\n          lineFrom = _ref[0],\n          lineTo = _ref[1];\n\n      return /*#__PURE__*/React__default['default'].createElement(\"g\", {\n        key: \"Axis-Group \" + (isOuter ? 'outer' : 'inner'),\n        className: \"Axis-Group \" + (isOuter ? 'outer' : 'inner'),\n        style: {\n          transform: isOuter ? undefined : translate(gridDimensions.gridX, gridDimensions.gridY)\n        }\n      }, /*#__PURE__*/React__default['default'].createElement(\"g\", {\n        className: \"Axis\",\n        style: _extends({}, isOuter ? {\n          opacity: showDebugAxes ? 0.5 : 0,\n          pointerEvents: 'none'\n        } : {\n          opacity: 1,\n          pointerEvents: 'all'\n        })\n      }, /*#__PURE__*/React__default['default'].createElement(\"line\", {\n        className: \"domain\",\n        x1: lineFrom.x,\n        y1: lineFrom.y,\n        x2: lineTo.x,\n        y2: lineTo.y,\n        stroke: dark ? 'rgba(255,255,255, .2)' : 'rgba(0,0,0, .2)'\n      }), getTicks(scale, 10).map(function (tick, i) {\n        var _axis$showGrid;\n\n        var px = getTickPx(scale, tick);\n\n        var _ref2 = axis.position === 'left' ? [{\n          x: 0,\n          y: px\n        }, {\n          x: -8,\n          y: px\n        }, {\n          x: resolvedWidth,\n          y: px\n        }] : axis.position === 'right' ? [{\n          x: resolvedWidth,\n          y: px\n        }, {\n          x: resolvedWidth + 8,\n          y: px\n        }, {\n          x: 0,\n          y: px\n        }] : axis.position === 'top' ? [{\n          x: px,\n          y: 0\n        }, {\n          x: px,\n          y: -8\n        }, {\n          x: px,\n          y: resolvedHeight\n        }] : [{\n          x: px,\n          y: resolvedHeight\n        }, {\n          x: px,\n          y: resolvedHeight + 8\n        }, {\n          x: px,\n          y: 0\n        }],\n            tickFrom = _ref2[0],\n            tickTo = _ref2[1],\n            gridTo = _ref2[2];\n\n        var tickLabelX = tickTo.x,\n            tickLabelY = tickTo.y;\n\n        if (axis.position === 'top') {\n          tickLabelY -= 5;\n        } else if (axis.position === 'bottom') {\n          tickLabelY += 5;\n        } else if (axis.position === 'left') {\n          tickLabelX -= 5;\n        } else if (axis.position === 'right') {\n          tickLabelX += 5;\n        }\n\n        return /*#__PURE__*/React__default['default'].createElement(\"g\", {\n          key: \"vx-tick-\" + tick + \"-\" + i,\n          className: 'tick'\n        }, ((_axis$showGrid = axis.showGrid) != null ? _axis$showGrid : true) && !isOuter ? /*#__PURE__*/React__default['default'].createElement(\"line\", {\n          x1: tickFrom.x,\n          y1: tickFrom.y,\n          x2: gridTo.x,\n          y2: gridTo.y,\n          stroke: dark ? 'rgba(255,255,255, .05)' : 'rgba(0,0,0, .05)'\n        }) : null, !isOuter ? /*#__PURE__*/React__default['default'].createElement(\"line\", {\n          x1: tickFrom.x,\n          y1: tickFrom.y,\n          x2: tickTo.x,\n          y2: tickTo.y,\n          stroke: dark ? 'rgba(255,255,255, .2)' : 'rgba(0,0,0, .2)'\n        }) : null, /*#__PURE__*/React__default['default'].createElement(\"text\", {\n          className: \"tickLabel\",\n          style: {\n            fontSize: 10,\n            fill: dark ? 'rgba(255,255,255, .7)' : 'rgba(0,0,0, .7)',\n            dominantBaseline: isRotated ? 'central' : axis.position === 'bottom' ? 'hanging' : axis.position === 'top' ? 'alphabetic' : 'central',\n            textAnchor: isRotated ? 'end' : axis.position === 'right' ? 'start' : axis.position === 'left' ? 'end' : 'middle'\n          },\n          transform: \"translate(\" + tickLabelX + \", \" + tickLabelY + \") rotate(\" + (isRotated ? axis.position === 'top' ? 60 : -60 : 0) + \")\"\n        }, axis.formatters.scale(tick)));\n      })));\n    };\n\n    return axis.show ? /*#__PURE__*/React__default['default'].createElement(\"g\", {\n      ref: elRef\n    }, renderAxis(false), renderAxis(true)) : null;\n  }\n\n  function usePrevious(val) {\n    var ref = React__default['default'].useRef();\n    useIsomorphicLayoutEffect(function () {\n      ref.current = val;\n    }, [val]);\n    return ref.current;\n  }\n\n  function useLatestWhen(obj, when) {\n    if (when === void 0) {\n      when = true;\n    }\n\n    var ref = React__default['default'].useRef(when ? obj : null);\n\n    if (when) {\n      ref.current = obj;\n    }\n\n    return ref.current;\n  }\n\n  function usePortalElement() {\n    var _React$useState = React__namespace.useState(),\n        portalEl = _React$useState[0],\n        setPortalEl = _React$useState[1];\n\n    useIsomorphicLayoutEffect(function () {\n      if (!portalEl) {\n        var element = document.getElementById('react-charts-portal');\n\n        if (!element) {\n          element = document.createElement('div');\n          element.setAttribute('id', 'react-charts-portal');\n          Object.assign(element.style, {\n            pointerEvents: 'none',\n            position: 'fixed',\n            left: 0,\n            right: 0,\n            top: 0,\n            bottom: 0,\n            'z-index': 99999999999\n          });\n          document.body.append(element);\n        }\n\n        setPortalEl(element);\n      }\n    });\n    return portalEl;\n  }\n\n  var props = [\"bottom\", \"height\", \"left\", \"right\", \"top\", \"width\"];\n\n  var rectChanged = function rectChanged(a, b) {\n    if (a === void 0) {\n      a = {};\n    }\n\n    if (b === void 0) {\n      b = {};\n    }\n\n    return props.some(function (prop) {\n      return a[prop] !== b[prop];\n    });\n  };\n\n  var observedNodes = /*#__PURE__*/new Map();\n  var rafId;\n\n  var run = function run() {\n    var changedStates = [];\n    observedNodes.forEach(function (state, node) {\n      var newRect = node.getBoundingClientRect();\n\n      if (rectChanged(newRect, state.rect)) {\n        state.rect = newRect;\n        changedStates.push(state);\n      }\n    });\n    changedStates.forEach(function (state) {\n      state.callbacks.forEach(function (cb) {\n        return cb(state.rect);\n      });\n    });\n    rafId = window.requestAnimationFrame(run);\n  };\n\n  function observeRect(node, cb) {\n    return {\n      observe: function observe() {\n        var wasEmpty = observedNodes.size === 0;\n\n        if (observedNodes.has(node)) {\n          observedNodes.get(node).callbacks.push(cb);\n        } else {\n          observedNodes.set(node, {\n            rect: undefined,\n            hasRectChanged: false,\n            callbacks: [cb]\n          });\n        }\n\n        if (wasEmpty) run();\n      },\n      unobserve: function unobserve() {\n        var state = observedNodes.get(node);\n\n        if (state) {\n          // Remove the callback\n          var index = state.callbacks.indexOf(cb);\n          if (index >= 0) state.callbacks.splice(index, 1); // Remove the node reference\n\n          if (!state.callbacks.length) observedNodes[\"delete\"](node); // Stop the loop\n\n          if (!observedNodes.size) cancelAnimationFrame(rafId);\n        }\n      }\n    };\n  }\n\n  function useRect(node, enabled) {\n    var _React$useState = React__default['default'].useState(node),\n        element = _React$useState[0],\n        setElement = _React$useState[1];\n\n    var _React$useState2 = React__default['default'].useState({\n      width: 0,\n      height: 0\n    }),\n        rect = _React$useState2[0],\n        setRect = _React$useState2[1];\n\n    var rectRef = React__default['default'].useRef(rect);\n    rectRef.current = rect;\n    useIsomorphicLayoutEffect(function () {\n      if (node !== element) {\n        setElement(node);\n      }\n    });\n    useIsomorphicLayoutEffect(function () {\n      if (enabled && element) {\n        setRect(element.getBoundingClientRect());\n      }\n    }, [element, enabled]);\n    React__default['default'].useEffect(function () {\n      if (!element || !enabled) {\n        return;\n      }\n\n      var observer = observeRect(element, function (newRect) {\n        setRect(newRect);\n      });\n      observer.observe();\n      return function () {\n        observer.unobserve();\n      };\n    }, [element, enabled]); // const resolvedRect = React.useMemo(() => {\n    //   if (!element || !(element as Element).tagName) {\n    //     return rect\n    //   }\n    //   const styles = window.getComputedStyle(element as Element)\n    //   return {\n    //     x: rect.x,\n    //     y: rect.y,\n    //     width:\n    //       rect.width -\n    //       parseInt(styles.borderLeftWidth) -\n    //       parseInt(styles.borderRightWidth),\n    //     height:\n    //       rect.height -\n    //       parseInt(styles.borderTopWidth) -\n    //       parseInt(styles.borderBottomWidth),\n    //     top: rect.top,\n    //     right: rect.right,\n    //     bottom: rect.bottom,\n    //     left: rect.left,\n    //   }\n    // }, [element, rect])\n\n    return rect;\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _isNativeReflectConstruct() {\n    if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n    if (Reflect.construct.sham) return false;\n    if (typeof Proxy === \"function\") return true;\n\n    try {\n      Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  function _construct(Parent, args, Class) {\n    if (_isNativeReflectConstruct()) {\n      _construct = Reflect.construct;\n    } else {\n      _construct = function _construct(Parent, args, Class) {\n        var a = [null];\n        a.push.apply(a, args);\n        var Constructor = Function.bind.apply(Parent, a);\n        var instance = new Constructor();\n        if (Class) _setPrototypeOf(instance, Class.prototype);\n        return instance;\n      };\n    }\n\n    return _construct.apply(null, arguments);\n  } // Super fast physics simulations for JavaScript\n  // Copyright 2014 Ralph Thomas\n  // Licensed under the Apache License, Version 2.0\n  // https://github.com/iamralpht/gravitas.js\n  // Adapted to TypeScript and customized by Tanner Linsley (@tannerlinsley)\n\n\n  var epsilon = 0.001;\n\n  function almostEqual(a, b) {\n    return a > b - epsilon && a < b + epsilon;\n  }\n\n  function almostZero(a) {\n    return almostEqual(a, 0);\n  }\n\n  var Spring = /*#__PURE__*/function () {\n    function Spring(init, mass, springConstant, damping) {\n      this._m = mass;\n      this._k = springConstant;\n      this._c = damping;\n      this._solution = null;\n      this.endPosition = init;\n      this._startTime = 0;\n    }\n\n    var _proto = Spring.prototype;\n\n    _proto.x = function x(dt) {\n      if (dt === undefined) {\n        dt = (new Date().getTime() - this._startTime) / 1000.0;\n      }\n\n      return this._solution ? this.endPosition + this._solution.x(dt) : this.endPosition;\n    };\n\n    _proto.dx = function dx(dt) {\n      if (dt === undefined) {\n        dt = (new Date().getTime() - this._startTime) / 1000.0;\n      }\n\n      return this._solution ? this._solution.dx(dt) : 0;\n    };\n\n    _proto.setEnd = function setEnd(x) {\n      var t = new Date().getTime();\n      var velocity = 0;\n      var position = this.endPosition;\n\n      if (this._solution) {\n        // Don't whack incoming velocity.\n        if (almostZero(velocity)) velocity = this._solution.dx((t - this._startTime) / 1000.0);\n        position = this._solution.x((t - this._startTime) / 1000.0);\n        if (almostZero(velocity)) velocity = 0;\n        if (almostZero(position)) position = 0;\n        position += this.endPosition;\n      }\n\n      if (this._solution && almostZero(position - x) && almostZero(velocity)) {\n        return;\n      }\n\n      this.endPosition = x;\n      this._solution = this._solve(position - this.endPosition, velocity);\n      this._startTime = t;\n    };\n\n    _proto.snap = function snap(x) {\n      this._startTime = new Date().getTime();\n      this.endPosition = x;\n      this._solution = {\n        x: function x() {\n          return 0;\n        },\n        dx: function dx() {\n          return 0;\n        }\n      };\n    };\n\n    _proto.done = function done() {\n      return almostEqual(this.x(), this.endPosition) && almostZero(this.dx());\n    } // reconfigure(mass: number, springConstant: number, damping: number) {\n    //   this._m = mass\n    //   this._k = springConstant\n    //   this._c = damping\n    //   if (this.done()) {\n    //     return\n    //   }\n    //   this._solution = this._solve(this.x() - this.endPosition, this.dx())\n    //   this._startTime = new Date().getTime()\n    // }\n    // springConstant() {\n    //   return this._k\n    // }\n    // damping() {\n    //   return this._c\n    // }\n    ;\n\n    _proto._solve = function _solve(initial, velocity) {\n      var c = this._c;\n      var m = this._m;\n      var k = this._k; // Solve the quadratic equation; root = (-c +/- sqrt(c^2 - 4mk)) / 2m.\n\n      var cmk = c * c - 4 * m * k;\n\n      if (cmk === 0) {\n        // The spring is critically damped.\n        // x = (c1 + c2*t) * e ^(-c/2m)*t\n        var r = -c / (2 * m);\n        var c1 = initial;\n        var c2 = velocity / (r * initial);\n        return {\n          x: function x(t) {\n            return (c1 + c2 * t) * Math.pow(Math.E, r * t);\n          },\n          dx: function dx(t) {\n            var pow = Math.pow(Math.E, r * t);\n            return r * (c1 + c2 * t) * pow + c2 * pow;\n          }\n        };\n      } else if (cmk > 0) {\n        // The spring is overdamped; no bounces.\n        // x = c1*e^(r1*t) + c2*e^(r2t)\n        // Need to find r1 and r2, the roots, then solve c1 and c2.\n        var r1 = (-c - Math.sqrt(cmk)) / (2 * m);\n        var r2 = (-c + Math.sqrt(cmk)) / (2 * m);\n\n        var _c = (velocity - r1 * initial) / (r2 - r1);\n\n        var _c2 = initial - _c;\n\n        return {\n          x: function x(t) {\n            return _c2 * Math.pow(Math.E, r1 * t) + _c * Math.pow(Math.E, r2 * t);\n          },\n          dx: function dx(t) {\n            return _c2 * r1 * Math.pow(Math.E, r1 * t) + _c * r2 * Math.pow(Math.E, r2 * t);\n          }\n        };\n      } else {\n        // The spring is underdamped, it has imaginary roots.\n        // r = -(c / 2*m) +- w*i\n        // w = sqrt(4mk - c^2) / 2m\n        // x = (e^-(c/2m)t) * (c1 * cos(wt) + c2 * sin(wt))\n        var w = Math.sqrt(4 * m * k - c * c) / (2 * m);\n\n        var _r = -(c / 2 * m);\n\n        var _c3 = initial;\n\n        var _c4 = (velocity - _r * initial) / w;\n\n        return {\n          x: function x(t) {\n            return Math.pow(Math.E, _r * t) * (_c3 * Math.cos(w * t) + _c4 * Math.sin(w * t));\n          },\n          dx: function dx(t) {\n            var power = Math.pow(Math.E, _r * t);\n            var cos = Math.cos(w * t);\n            var sin = Math.sin(w * t);\n            return power * (_c4 * w * cos - _c3 * w * sin) + _r * power * (_c4 * sin + _c3 * cos);\n          }\n        };\n      }\n    };\n\n    return Spring;\n  }();\n\n  function useSpring(value, config, cb, immediate, debug) {\n    var springRef = React__default['default'].useRef(_construct(Spring, [value].concat(config)));\n    var getValue = useGetLatest(value);\n\n    var _useRaf = useRaf(function () {\n      cb(springRef.current.x());\n      return springRef.current.done();\n    }),\n        startRaf = _useRaf[0],\n        stopRaf = _useRaf[1]; // Immediate\n\n\n    React__default['default'].useEffect(function () {\n      if (immediate) {\n        springRef.current.snap(getValue());\n        startRaf();\n        return;\n      }\n\n      springRef.current.setEnd(value);\n      startRaf();\n    }, [debug, getValue, immediate, startRaf, stopRaf, value]);\n    React__default['default'].useEffect(function () {\n      return function () {\n        stopRaf();\n      };\n    }, [stopRaf]);\n    return springRef.current;\n  }\n\n  function useRaf(callback) {\n    var raf = React__default['default'].useRef(null);\n    var rafCallback = React__default['default'].useRef(callback);\n    rafCallback.current = callback;\n    var tick = React__default['default'].useCallback(function () {\n      if (rafCallback.current()) return;\n      raf.current = requestAnimationFrame(tick);\n    }, []);\n    return [React__default['default'].useMemo(function () {\n      return tick;\n    }, [tick]), React__default['default'].useMemo(function () {\n      return function () {\n        return raf.current && cancelAnimationFrame(raf.current);\n      };\n    }, [])];\n  } //\n\n\n  var getLineBackgroundColor = function getLineBackgroundColor(dark) {\n    return dark ? 'rgba(255,255,255,.3)' : 'rgba(0, 26, 39, 0.3)';\n  };\n\n  var getBackgroundColor$1 = function getBackgroundColor(dark) {\n    return dark ? 'rgba(255,255,255,.9)' : 'rgba(0, 26, 39, 0.9)';\n  };\n\n  function defaultCursor(options) {\n    var _options$show, _options$showLine, _options$showLabel;\n\n    return _extends({}, options, {\n      show: (_options$show = options.show) != null ? _options$show : true,\n      showLine: (_options$showLine = options.showLine) != null ? _options$showLine : true,\n      showLabel: (_options$showLabel = options.showLabel) != null ? _options$showLabel : true\n    });\n  }\n\n  function Cursors() {\n    var _getOptions$primaryCu, _getOptions$secondary;\n\n    var _useChartContext = useChartContext(),\n        getOptions = _useChartContext.getOptions;\n\n    var primaryOptions = (_getOptions$primaryCu = getOptions().primaryCursor) != null ? _getOptions$primaryCu : true;\n    var secondaryOptions = (_getOptions$secondary = getOptions().secondaryCursor) != null ? _getOptions$secondary : true;\n    var resolvedPrimaryOptions = React__default['default'].useMemo(function () {\n      return defaultCursor(!primaryOptions ? {\n        show: false\n      } : typeof primaryOptions === 'boolean' ? {} : primaryOptions);\n    }, [primaryOptions]);\n    var resolvedSecondaryOptions = React__default['default'].useMemo(function () {\n      return defaultCursor(!secondaryOptions ? {\n        show: false\n      } : typeof secondaryOptions === 'boolean' ? {} : secondaryOptions);\n    }, [secondaryOptions]);\n    return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, /*#__PURE__*/React__default['default'].createElement(Cursor, {\n      primary: true,\n      options: resolvedPrimaryOptions\n    }), /*#__PURE__*/React__default['default'].createElement(Cursor, {\n      options: resolvedSecondaryOptions\n    }));\n  }\n\n  function Cursor(props) {\n    var _props$options$value, _ref, _ref2, _ref3, _ref4;\n\n    var _useChartContext2 = useChartContext(),\n        getOptions = _useChartContext2.getOptions,\n        svgRef = _useChartContext2.svgRef,\n        gridDimensions = _useChartContext2.gridDimensions,\n        focusedDatumState = _useChartContext2.focusedDatumState,\n        primaryAxis = _useChartContext2.primaryAxis,\n        secondaryAxes = _useChartContext2.secondaryAxes;\n\n    var getTooltipOptions = useGetLatest(props.options);\n    var focusedDatum = focusedDatumState[0];\n    var latestFocusedDatum = useLatestWhen(focusedDatum, !!focusedDatum);\n    var secondaryAxis = secondaryAxes.find(function (d) {\n      return d.id === props.options.axisId || (latestFocusedDatum == null ? void 0 : latestFocusedDatum.secondaryAxisId);\n    });\n    var axis = props.primary ? primaryAxis : secondaryAxis;\n    var siblingAxis = props.primary ? secondaryAxis : primaryAxis;\n\n    var resolveValue = function resolveValue(d) {\n      var _d$stackData;\n\n      return d ? axis.stacked ? (_d$stackData = d.stackData) == null ? void 0 : _d$stackData[1] : axis.getValue(d == null ? void 0 : d.originalDatum) : undefined;\n    };\n\n    var datumValue = resolveValue(focusedDatum);\n    React__default['default'].useEffect(function () {\n      var _getTooltipOptions;\n\n      (_getTooltipOptions = getTooltipOptions()) == null ? void 0 : _getTooltipOptions.onChange == null ? void 0 : _getTooltipOptions.onChange(datumValue);\n    }, [getTooltipOptions, datumValue]);\n    var value = (_props$options$value = props.options.value) != null ? _props$options$value : datumValue;\n    var latestPropsValue = useLatestWhen(props.options.value, props.options.value != null);\n    var latestDatumValue = useLatestWhen(resolveValue(latestFocusedDatum), resolveValue(latestFocusedDatum) != null);\n    var latestValue = latestPropsValue != null ? latestPropsValue : latestDatumValue; // Get the sibling range\n\n    var siblingRange = siblingAxis.scale.range();\n    var x;\n    var y;\n    var x1;\n    var x2;\n    var y1;\n    var y2;\n    var alignPctX;\n    var alignPctY;\n    var bandWidth = axis.axisFamily === 'band' ? axis.scale.bandwidth() : 1;\n    var show = typeof value !== 'undefined' && !Number.isNaN(value);\n    var px = axis.scale(value); // Vertical alignment\n\n    if (axis.isVertical) {\n      var _y, _y2;\n\n      y = px;\n      y1 = ((_y = y) != null ? _y : 0) - 1;\n      y2 = ((_y2 = y) != null ? _y2 : 0) + bandWidth;\n\n      if (axis.position === 'left') {\n        x1 = siblingRange[0];\n        x2 = siblingRange[1];\n      } else {\n        x1 = siblingRange[1];\n        x2 = siblingRange[0];\n      }\n    } else {\n      var _x, _x2;\n\n      x = px;\n      x1 = ((_x = x) != null ? _x : 0) - 1;\n      x2 = ((_x2 = x) != null ? _x2 : 0) + bandWidth;\n\n      if (axis.position === 'top') {\n        y1 = siblingRange[0];\n        y2 = siblingRange[1];\n      } else {\n        y1 = siblingRange[1];\n        y2 = siblingRange[0];\n      }\n    }\n\n    var lineStartX = Math.min(x1, x2);\n    var lineStartY = Math.min(y1, y2);\n    var lineEndX = Math.max(x1, x2);\n    var lineEndY = Math.max(y1, y2);\n    var lineHeight = Math.max(lineEndY - lineStartY, 0);\n    var lineWidth = Math.max(lineEndX - lineStartX, 0);\n    var bubbleX;\n    var bubbleY; // Bubble placement\n\n    if (axis.isVertical) {\n      if (axis.position === 'left') {\n        bubbleX = lineStartX;\n      } else {\n        bubbleX = lineEndX;\n      }\n\n      bubbleY = lineStartY + lineHeight / 2;\n    } else {\n      if (axis.position === 'top') {\n        bubbleY = lineStartY;\n      } else {\n        bubbleY = lineEndY;\n      }\n\n      bubbleX = lineStartX + lineWidth / 2;\n    } // Bubble anchoring\n\n\n    if (axis.isVertical) {\n      alignPctY = -50;\n\n      if (axis.position === 'left') {\n        alignPctX = -100;\n      } else {\n        alignPctX = 0;\n      }\n    } else {\n      alignPctX = -50;\n\n      if (axis.position === 'top') {\n        alignPctY = -100;\n      } else {\n        alignPctY = 0;\n      }\n    }\n\n    var formattedValue = axis.formatters.cursor(latestValue);\n    var svgRect = useRect(svgRef.current, show);\n    var lineRef = React__default['default'].useRef(null);\n    var bubbleRef = React__default['default'].useRef(null);\n    var latestLineStartX = useLatestWhen(lineStartX, px != null);\n    var latestLineStartY = useLatestWhen(lineStartY, px != null);\n    var latestBubbleX = useLatestWhen(bubbleX, px != null);\n    var latestBubbleY = useLatestWhen(bubbleY, px != null);\n    var previousTruePx = usePrevious(px);\n    var immediate = previousTruePx == null && px !== null;\n    lineStartX = (_ref = px != null ? lineStartX : latestLineStartX) != null ? _ref : NaN;\n    lineStartY = (_ref2 = px != null ? lineStartY : latestLineStartY) != null ? _ref2 : NaN;\n    bubbleX = (_ref3 = px != null ? bubbleX : latestBubbleX) != null ? _ref3 : NaN;\n    bubbleY = (_ref4 = px != null ? bubbleY : latestBubbleY) != null ? _ref4 : NaN;\n    var lineXSpring = useSpring(lineStartX, [1, 210, 20], function () {\n      if (lineRef.current) {\n        lineRef.current.style.transform = \"translate(\" + lineXSpring.x() + \"px, \" + lineYSpring.x() + \"px)\";\n      }\n    }, immediate);\n    var lineYSpring = useSpring(lineStartY, [1, 210, 20], function () {\n      if (lineRef.current) {\n        lineRef.current.style.transform = \"translate(\" + lineXSpring.x() + \"px, \" + lineYSpring.x() + \"px)\";\n      }\n    }, immediate);\n    var bubbleXSpring = useSpring(bubbleX, [1, 210, 20], function () {\n      if (bubbleRef.current) {\n        bubbleRef.current.style.transform = \"translate(\" + bubbleXSpring.x() + \"px, \" + bubbleYSpring.x() + \"px)\";\n      }\n    }, immediate);\n    var bubbleYSpring = useSpring(bubbleY, [1, 210, 20], function () {\n      if (bubbleRef.current) {\n        bubbleRef.current.style.transform = \"translate(\" + bubbleXSpring.x() + \"px, \" + bubbleYSpring.x() + \"px)\";\n      }\n    }, immediate);\n    var portalEl = usePortalElement();\n    return portalEl ? /*#__PURE__*/ReactDOM__default['default'].createPortal( /*#__PURE__*/React__default['default'].createElement(\"div\", {\n      style: {\n        fontFamily: 'sans-serif',\n        pointerEvents: 'none',\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        transform: translate(svgRect.left + gridDimensions.gridX, svgRect.top + gridDimensions.gridY),\n        opacity: show ? 1 : 0,\n        transition: 'opacity .3s ease'\n      },\n      className: \"Cursor\"\n    }, props.options.showLine ? /*#__PURE__*/React__default['default'].createElement(\"div\", {\n      ref: lineRef,\n      style: {\n        width: lineWidth + \"px\",\n        height: lineHeight + \"px\",\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        background: getLineBackgroundColor(getOptions().dark)\n      }\n    }) : null, props.options.showLabel ? /*#__PURE__*/React__default['default'].createElement(\"div\", {\n      ref: bubbleRef,\n      style: {\n        position: 'absolute',\n        top: 0,\n        left: 0\n      }\n    }, /*#__PURE__*/React__default['default'].createElement(\"div\", {\n      style: {\n        padding: '5px',\n        fontSize: '10px',\n        background: getBackgroundColor$1(getOptions().dark),\n        color: getBackgroundColor$1(!getOptions().dark),\n        borderRadius: '3px',\n        position: 'relative',\n        transform: \"translate3d(\" + alignPctX + \"%, \" + alignPctY + \"%, 0)\",\n        whiteSpace: 'nowrap'\n      }\n    }, formattedValue)) : null), portalEl) : null;\n  } //\n  // These are the keys used internally to look up and measure\n  // different sides of a bounding box within another\n\n\n  var sideSchemas = {\n    left: {\n      side: 'left',\n      startKey: 'left',\n      lengthKey: 'width',\n      crossStartKey: 'top',\n      crossLengthKey: 'height',\n      fromEnd: false\n    },\n    right: {\n      side: 'right',\n      startKey: 'left',\n      lengthKey: 'width',\n      crossStartKey: 'top',\n      crossLengthKey: 'height',\n      fromEnd: true\n    },\n    top: {\n      side: 'top',\n      startKey: 'top',\n      lengthKey: 'height',\n      crossStartKey: 'left',\n      crossLengthKey: 'width',\n      fromEnd: false\n    },\n    bottom: {\n      side: 'bottom',\n      startKey: 'top',\n      lengthKey: 'height',\n      crossStartKey: 'left',\n      crossLengthKey: 'width',\n      fromEnd: true\n    }\n  }; // This is the final Tootlip component. It's a render prop\n  // that lets you attach handlers to elements, and render a tooltip\n  // anchored to them in relation to the parent portal container (either the only\n  // one defined or the one referenced by Id).\n\n  function useAnchor(options) {\n    var portalDims = useRect(options.portalEl, options.show);\n    var anchorDims = useRect(options.anchorEl, options.show);\n    var tooltipDims = useRect(options.tooltipEl, options.show);\n    var sides = React__default['default'].useMemo(function () {\n      var preSides = Array.isArray(options.side) ? options.side : [options.side];\n      return preSides.map(function (alignStr) {\n        var _ref = alignStr.split(' '),\n            side = _ref[0],\n            _ref$ = _ref[1],\n            align = _ref$ === void 0 ? 'center' : _ref$;\n\n        var incompatibleSide = !['top', 'right', 'bottom', 'left'].find(function (d) {\n          return side === d;\n        });\n\n        if (incompatibleSide) {\n          throw new Error(\"react-sticker: \\\"\" + side + \"\\\" is not a valid side! Must be one of ['top', 'right', 'bottom', 'left'].\");\n        }\n\n        var incompatibleAlign = !['center', 'start', 'end', 'top', 'right', 'bottom', 'left'].find(function (d) {\n          return align === d;\n        });\n\n        if (incompatibleAlign) {\n          throw new Error(\"react-sticker: \\\"\" + align + \"\\\" is not a valid side-alignment! Must be one of ['center', 'start', 'end', 'top', 'right', 'bottom', 'left'].\");\n        }\n\n        return [side, align];\n      }); // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [JSON.stringify(options.side)]); // IF we have all of the dimensions needed to calculate\n    // fits, then calculate the fit\n\n    var ready = portalDims && tooltipDims && anchorDims;\n    var fit = React__default['default'].useMemo(function () {\n      return ready && options.show ? fitOnBestSide({\n        portalDims: portalDims,\n        tooltipDims: tooltipDims,\n        anchorDims: anchorDims,\n        sides: sides,\n        useLargest: options.useLargest\n      }) : null;\n    }, [anchorDims, options.show, options.useLargest, portalDims, ready, sides, tooltipDims]);\n    return {\n      fit: fit,\n      style: _extends({\n        position: 'absolute',\n        visibility: ready ? 'visible' : 'hidden'\n      }, fit == null ? void 0 : fit.style)\n    };\n  } // This function selects the best side for the tooltip by using\n  // the ranked fits.\n\n\n  function fitOnBestSide(_ref2) {\n    var portalDims = _ref2.portalDims,\n        tooltipDims = _ref2.tooltipDims,\n        anchorDims = _ref2.anchorDims,\n        sides = _ref2.sides,\n        useLargest = _ref2.useLargest;\n    var fits = sides.map(function (_ref3) {\n      var side = _ref3[0],\n          align = _ref3[1];\n      return measureFit(_extends({}, sideSchemas[side], {\n        align: align,\n        portalDims: portalDims,\n        tooltipDims: tooltipDims,\n        anchorDims: anchorDims\n      }));\n    });\n\n    if (useLargest) {\n      fits.sort(function (a, b) {\n        return b.fitRatio - a.fitRatio;\n      });\n      return fits[0];\n    }\n\n    return fits.find(function (fit) {\n      return fit.fitRatio >= 1;\n    }) || fits[0];\n  } // This function takes a side and bunch of calculated dimensions from\n  // the portal, tooltip and target. Then it returns\n  // the percentage fit and the style to achieve this specific fit\n\n\n  function measureFit(_ref4) {\n    var _style;\n\n    var side = _ref4.side,\n        align = _ref4.align,\n        startKey = _ref4.startKey,\n        lengthKey = _ref4.lengthKey,\n        crossStartKey = _ref4.crossStartKey,\n        crossLengthKey = _ref4.crossLengthKey,\n        fromEnd = _ref4.fromEnd,\n        portalDims = _ref4.portalDims,\n        tooltipDims = _ref4.tooltipDims,\n        anchorDims = _ref4.anchorDims;\n    var parentStart = portalDims[startKey];\n    var parentLength = portalDims[lengthKey];\n    var crossParentStart = portalDims[crossStartKey];\n    var crossParentLength = portalDims[crossLengthKey];\n    var anchorStart = anchorDims[startKey] - portalDims[startKey];\n    var anchorLength = anchorDims[lengthKey];\n    var crossAnchorStart = anchorDims[crossStartKey];\n    var crossAnchorLength = anchorDims[crossLengthKey];\n    var crossAnchorWidth = anchorDims[crossLengthKey];\n    var targetLength = tooltipDims[lengthKey];\n    var crossTargetLength = tooltipDims[crossLengthKey];\n    var targetStart;\n    var fitRatio;\n\n    if (!fromEnd) {\n      targetStart = anchorStart - targetLength;\n      fitRatio = Math.min(anchorStart / targetLength);\n    } else {\n      targetStart = anchorStart + anchorLength;\n      fitRatio = (parentLength - (anchorStart + anchorLength)) / targetLength;\n    }\n\n    targetStart = Math.max(parentStart, Math.min(targetStart, parentLength));\n    var crossTargetStart;\n\n    if (startKey === 'left') {\n      if (align === 'top') {\n        align = 'start';\n      } else if (align === 'bottom') {\n        align = 'end';\n      }\n    } else {\n      if (align === 'left') {\n        align = 'start';\n      } else if (align === 'right') {\n        align = 'end';\n      }\n    }\n\n    if (!['start', 'center', 'end'].includes(align)) {\n      align = 'center';\n    }\n\n    if (align === 'start') {\n      crossTargetStart = crossAnchorStart;\n    } else if (align === 'end') {\n      crossTargetStart = crossAnchorStart + crossAnchorWidth - crossTargetLength;\n    } else {\n      crossTargetStart = crossAnchorStart + crossAnchorLength / 2 - crossTargetLength / 2;\n    }\n\n    crossTargetStart = Math.max(crossParentStart, Math.min(crossTargetStart, crossParentLength - crossTargetLength));\n    return {\n      side: side,\n      align: align,\n      startKey: startKey,\n      lengthKey: lengthKey,\n      crossStartKey: crossStartKey,\n      crossLengthKey: crossLengthKey,\n      fromEnd: fromEnd,\n      portalDims: portalDims,\n      tooltipDims: tooltipDims,\n      anchorDims: anchorDims,\n      fitRatio: fitRatio,\n      style: (_style = {}, _style[startKey] = targetStart, _style[crossStartKey] = crossTargetStart, _style)\n    };\n  } //\n  //\n\n\n  var showCount = 10;\n  var triangleSize = 7;\n\n  var getBackgroundColor = function getBackgroundColor(dark) {\n    return dark ? 'rgba(255,255,255,.9)' : 'rgba(0, 26, 39, 0.9)';\n  };\n\n  function tooltipRenderer(props) {\n    return /*#__PURE__*/React__default['default'].createElement(TooltipRenderer, props);\n  }\n\n  function TooltipRenderer(props) {\n    var _props$focusedDatum$g, _props$focusedDatum, _focusedDatum$group, _focusedDatum$group2;\n\n    var latestFit = useLatestWhen(props.anchor.fit, !!props.anchor.fit);\n\n    if (!props.focusedDatum) {\n      return null;\n    }\n\n    var primaryAxis = props.primaryAxis,\n        secondaryAxis = props.secondaryAxis,\n        getDatumStyle = props.getDatumStyle,\n        focusedDatum = props.focusedDatum;\n\n    var _props$getOptions = props.getOptions(),\n        groupingMode = _props$getOptions.groupingMode,\n        dark = _props$getOptions.dark;\n\n    var groupDatums = (_props$focusedDatum$g = (_props$focusedDatum = props.focusedDatum) == null ? void 0 : _props$focusedDatum.group) != null ? _props$focusedDatum$g : [];\n    var resolvedShowCount = showCount;\n    var length = groupDatums.length; // Get the focused series' index\n\n    var activeIndex = groupDatums.findIndex(function (d) {\n      return d === focusedDatum;\n    }); // Get the start by going back half of the showCount\n\n    var start = activeIndex > -1 ? activeIndex - resolvedShowCount / 2 : 0; // Make sure it's at least 0\n\n    start = Math.max(start, 0); // Use the start and add the showCount to get the end\n\n    var end = activeIndex > -1 ? start + resolvedShowCount : length; // Don't let the end go passed the length\n\n    end = Math.min(end, length); // Double check we aren't clipping the start\n\n    start = Math.max(end - resolvedShowCount, 0); // Slice the datums by start and end\n\n    var visibleSortedGroupDatums = groupDatums.slice(start, end); // Detect if we have previous items\n\n    var hasPrevious = start > 0; // Or next items\n\n    var hasNext = end < length;\n    var finalAlign = (latestFit == null ? void 0 : latestFit.side) + \"-\" + (latestFit == null ? void 0 : latestFit.align);\n    var arrowPosition;\n    var triangleStyles;\n\n    if (!arrowPosition) {\n      if (finalAlign === 'left-center') {\n        arrowPosition = 'right';\n      } else if (finalAlign === 'right-center') {\n        arrowPosition = 'left';\n      } else if (finalAlign === 'top-center') {\n        arrowPosition = 'bottom';\n      } else if (finalAlign === 'bottom-center') {\n        arrowPosition = 'top';\n      } else if (finalAlign === 'right-start') {\n        arrowPosition = 'bottomLeft';\n      } else if (finalAlign === 'right-end') {\n        arrowPosition = 'topLeft';\n      } else if (finalAlign === 'left-start') {\n        arrowPosition = 'bottomRight';\n      } else if (finalAlign === 'left-end') {\n        arrowPosition = 'topRight';\n      }\n    }\n\n    var backgroundColor = getBackgroundColor(dark);\n\n    if (arrowPosition === 'bottom') {\n      triangleStyles = {\n        top: '100%',\n        left: '50%',\n        transform: 'translate3d(-50%, 0%, 0)',\n        borderLeft: triangleSize * 0.8 + \"px solid transparent\",\n        borderRight: triangleSize * 0.8 + \"px solid transparent\",\n        borderTop: triangleSize + \"px solid \" + backgroundColor\n      };\n    } else if (arrowPosition === 'top') {\n      triangleStyles = {\n        top: '0%',\n        left: '50%',\n        transform: 'translate3d(-50%, -100%, 0)',\n        borderLeft: triangleSize * 0.8 + \"px solid transparent\",\n        borderRight: triangleSize * 0.8 + \"px solid transparent\",\n        borderBottom: triangleSize + \"px solid \" + backgroundColor\n      };\n    } else if (arrowPosition === 'right') {\n      triangleStyles = {\n        top: '50%',\n        left: '100%',\n        transform: 'translate3d(0%, -50%, 0)',\n        borderTop: triangleSize * 0.8 + \"px solid transparent\",\n        borderBottom: triangleSize * 0.8 + \"px solid transparent\",\n        borderLeft: triangleSize + \"px solid \" + backgroundColor\n      };\n    } else if (arrowPosition === 'left') {\n      triangleStyles = {\n        top: '50%',\n        left: '0%',\n        transform: 'translate3d(-100%, -50%, 0)',\n        borderTop: triangleSize * 0.8 + \"px solid transparent\",\n        borderBottom: triangleSize * 0.8 + \"px solid transparent\",\n        borderRight: triangleSize + \"px solid \" + backgroundColor\n      };\n    } else if (arrowPosition === 'topRight') {\n      triangleStyles = {\n        top: '0%',\n        left: '100%',\n        transform: 'translate3d(-50%, -50%, 0) rotate(-45deg)',\n        borderTop: triangleSize * 0.8 + \"px solid transparent\",\n        borderBottom: triangleSize * 0.8 + \"px solid transparent\",\n        borderLeft: triangleSize * 2 + \"px solid \" + backgroundColor\n      };\n    } else if (arrowPosition === 'bottomRight') {\n      triangleStyles = {\n        top: '100%',\n        left: '100%',\n        transform: 'translate3d(-50%, -50%, 0) rotate(45deg)',\n        borderTop: triangleSize * 0.8 + \"px solid transparent\",\n        borderBottom: triangleSize * 0.8 + \"px solid transparent\",\n        borderLeft: triangleSize * 2 + \"px solid \" + backgroundColor\n      };\n    } else if (arrowPosition === 'topLeft') {\n      triangleStyles = {\n        top: '0%',\n        left: '0%',\n        transform: 'translate3d(-50%, -50%, 0) rotate(45deg)',\n        borderTop: triangleSize * 0.8 + \"px solid transparent\",\n        borderBottom: triangleSize * 0.8 + \"px solid transparent\",\n        borderRight: triangleSize * 2 + \"px solid \" + backgroundColor\n      };\n    } else if (arrowPosition === 'bottomLeft') {\n      triangleStyles = {\n        top: '100%',\n        left: '0%',\n        transform: 'translate3d(-50%, -50%, 0) rotate(-45deg)',\n        borderTop: triangleSize * 0.8 + \"px solid transparent\",\n        borderBottom: triangleSize * 0.8 + \"px solid transparent\",\n        borderRight: triangleSize * 2 + \"px solid \" + backgroundColor\n      };\n    } else {\n      triangleStyles = {\n        opacity: 0\n      };\n    }\n\n    return /*#__PURE__*/React__default['default'].createElement(\"div\", {\n      style: {\n        position: 'relative',\n        fontSize: '10px',\n        padding: '5px',\n        background: getBackgroundColor(dark),\n        color: dark ? 'black' : 'white',\n        borderRadius: '3px'\n      }\n    }, /*#__PURE__*/React__default['default'].createElement(\"div\", {\n      style: _extends({\n        position: 'absolute',\n        width: 0,\n        height: 0\n      }, triangleStyles)\n    }), /*#__PURE__*/React__default['default'].createElement(\"div\", null, /*#__PURE__*/React__default['default'].createElement(\"div\", {\n      style: {\n        marginBottom: '3px',\n        textAlign: 'center'\n      }\n    }, groupingMode === 'series' ? /*#__PURE__*/React__default['default'].createElement(\"strong\", null, focusedDatum.seriesLabel) : groupingMode === 'secondary' ? /*#__PURE__*/React__default['default'].createElement(\"strong\", null, secondaryAxis.formatters.tooltip(secondaryAxis.getValue(focusedDatum.originalDatum))) : /*#__PURE__*/React__default['default'].createElement(\"strong\", null, primaryAxis.formatters.tooltip(primaryAxis.getValue(focusedDatum.originalDatum)))), /*#__PURE__*/React__default['default'].createElement(\"table\", {\n      style: {\n        whiteSpace: 'nowrap'\n      }\n    }, /*#__PURE__*/React__default['default'].createElement(\"tbody\", null, hasPrevious ? /*#__PURE__*/React__default['default'].createElement(\"tr\", {\n      style: {\n        opacity: 0.8\n      }\n    }, /*#__PURE__*/React__default['default'].createElement(\"td\", null), /*#__PURE__*/React__default['default'].createElement(\"td\", null, \"...\"), /*#__PURE__*/React__default['default'].createElement(\"td\", null)) : null, visibleSortedGroupDatums.map(function (sortedDatum, i) {\n      var active = sortedDatum === focusedDatum;\n      return /*#__PURE__*/React__default['default'].createElement(\"tr\", {\n        key: i,\n        style: {\n          opacity: active ? 1 : 0.8,\n          fontWeight: active ? 'bold' : undefined\n        }\n      }, /*#__PURE__*/React__default['default'].createElement(\"td\", {\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        }\n      }, /*#__PURE__*/React__default['default'].createElement(\"svg\", {\n        width: \"14\",\n        height: \"14\"\n      }, /*#__PURE__*/React__default['default'].createElement(\"circle\", {\n        cx: \"7\",\n        cy: \"7\",\n        r: \"5\",\n        style: _extends({}, getDatumStyle(sortedDatum), {\n          stroke: dark ? 'black' : 'white',\n          strokeWidth: active ? 2 : 1\n        })\n      }))), groupingMode === 'series' ? /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, /*#__PURE__*/React__default['default'].createElement(\"td\", null, primaryAxis.formatters.tooltip(primaryAxis.getValue(sortedDatum.originalDatum)), \": \\xA0\"), /*#__PURE__*/React__default['default'].createElement(\"td\", {\n        style: {\n          textAlign: 'right'\n        }\n      }, secondaryAxis.formatters.tooltip(secondaryAxis.getValue(sortedDatum.originalDatum)))) : groupingMode === 'secondary' ? /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, /*#__PURE__*/React__default['default'].createElement(\"td\", null, sortedDatum.seriesLabel, \": \\xA0\"), /*#__PURE__*/React__default['default'].createElement(\"td\", {\n        style: {\n          textAlign: 'right'\n        }\n      }, primaryAxis.formatters.tooltip(primaryAxis.getValue(sortedDatum.originalDatum)))) : /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, null, /*#__PURE__*/React__default['default'].createElement(\"td\", null, sortedDatum.seriesLabel, \": \\xA0\"), /*#__PURE__*/React__default['default'].createElement(\"td\", {\n        style: {\n          textAlign: 'right'\n        }\n      }, secondaryAxis.formatters.tooltip(secondaryAxis.getValue(sortedDatum.originalDatum)))));\n    }), hasNext ? /*#__PURE__*/React__default['default'].createElement(\"tr\", {\n      style: {\n        opacity: 0.8\n      }\n    }, /*#__PURE__*/React__default['default'].createElement(\"td\", null), /*#__PURE__*/React__default['default'].createElement(\"td\", null, \"...\"), /*#__PURE__*/React__default['default'].createElement(\"td\", null)) : null, secondaryAxis.stacked && ((_focusedDatum$group = focusedDatum.group) != null ? _focusedDatum$group : []).length > 1 ? /*#__PURE__*/React__default['default'].createElement(\"tr\", null, /*#__PURE__*/React__default['default'].createElement(\"td\", {\n      style: {\n        paddingTop: '5px'\n      }\n    }, /*#__PURE__*/React__default['default'].createElement(\"div\", {\n      style: {\n        width: '12px',\n        height: '12px',\n        backgroundColor: dark ? 'rgba(0, 26, 39, 0.3)' : 'rgba(255,255,255,.2)',\n        borderRadius: '50px'\n      }\n    })), /*#__PURE__*/React__default['default'].createElement(\"td\", {\n      style: {\n        paddingTop: '5px'\n      }\n    }, \"Total: \\xA0\"), /*#__PURE__*/React__default['default'].createElement(\"td\", {\n      style: {\n        paddingTop: '5px'\n      }\n    }, secondaryAxis.formatters.scale(sum((_focusedDatum$group2 = focusedDatum.group) != null ? _focusedDatum$group2 : [], function (d) {\n      return secondaryAxis.getValue(d.originalDatum);\n    })))) : null))));\n  }\n\n  var _excluded$1 = [\"visibility\"];\n\n  function defaultTooltip(options) {\n    var _options$align, _options$alignPriorit, _options$padding, _options$tooltipArrow, _options$render;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    return _extends({}, options, {\n      align: (_options$align = options.align) != null ? _options$align : 'auto',\n      alignPriority: (_options$alignPriorit = options.alignPriority) != null ? _options$alignPriorit : ['right', 'topRight', 'bottomRight', 'left', 'topLeft', 'bottomLeft', 'top', 'bottom'],\n      padding: (_options$padding = options.padding) != null ? _options$padding : 5,\n      tooltipArrowPadding: (_options$tooltipArrow = options.tooltipArrowPadding) != null ? _options$tooltipArrow : 7,\n      // anchor: options.anchor ?? 'closest',\n      render: (_options$render = options.render) != null ? _options$render : tooltipRenderer\n    });\n  }\n\n  function Tooltip() {\n    var _getOptions$tooltip, _secondaryAxes$find, _useLatestWhen;\n\n    var _useChartContext = useChartContext(),\n        focusedDatumState = _useChartContext.focusedDatumState,\n        getOptions = _useChartContext.getOptions,\n        primaryAxis = _useChartContext.primaryAxis,\n        secondaryAxes = _useChartContext.secondaryAxes,\n        getDatumStatusStyle = _useChartContext.getDatumStatusStyle,\n        svgRef = _useChartContext.svgRef;\n\n    var focusedDatum = focusedDatumState[0];\n    var latestFocusedDatum = useLatestWhen(focusedDatum, !!focusedDatum);\n    var preTooltipOptions = (_getOptions$tooltip = getOptions().tooltip) != null ? _getOptions$tooltip : true;\n    var secondaryAxis = (_secondaryAxes$find = secondaryAxes.find(function (d) {\n      return d.id === (latestFocusedDatum == null ? void 0 : latestFocusedDatum.secondaryAxisId);\n    })) != null ? _secondaryAxes$find : secondaryAxes[0];\n    var tooltipOptions = React__default['default'].useMemo(function () {\n      return defaultTooltip(typeof preTooltipOptions === 'boolean' ? {} : preTooltipOptions);\n    }, [preTooltipOptions]);\n    var portalEl = usePortalElement();\n\n    var _React$useState = React__default['default'].useState(),\n        tooltipEl = _React$useState[0],\n        setTooltipEl = _React$useState[1];\n\n    var svgRect = useRect(svgRef.current, !!(focusedDatum != null && focusedDatum.element));\n    var anchorEl = React__default['default'].useMemo(function () {\n      var _latestFocusedDatum$e, _latestFocusedDatum$e2, _anchorRect$left, _anchorRect$top, _anchorRect$width, _anchorRect$height;\n\n      var anchorRect = (_latestFocusedDatum$e = latestFocusedDatum == null ? void 0 : (_latestFocusedDatum$e2 = latestFocusedDatum.element) == null ? void 0 : _latestFocusedDatum$e2.getBoundingClientRect()) != null ? _latestFocusedDatum$e : null;\n\n      if (!anchorRect) {\n        return null;\n      }\n\n      if (!svgRect) return;\n      var translateX = (_anchorRect$left = anchorRect.left) != null ? _anchorRect$left : 0;\n      var translateY = (_anchorRect$top = anchorRect.top) != null ? _anchorRect$top : 0;\n      var width = (_anchorRect$width = anchorRect.width) != null ? _anchorRect$width : 0;\n      var height = (_anchorRect$height = anchorRect.height) != null ? _anchorRect$height : 0;\n      var box = {\n        x: translateY,\n        y: translateX,\n        top: translateY,\n        left: translateX,\n        bottom: translateY + width,\n        right: translateX + height,\n        width: width,\n        height: height,\n        toJSON: function toJSON() {\n          return {};\n        }\n      };\n\n      box.toJSON = function () {\n        return box;\n      };\n\n      return {\n        getBoundingClientRect: function getBoundingClientRect() {\n          return box;\n        }\n      };\n    }, [latestFocusedDatum == null ? void 0 : latestFocusedDatum.element, svgRect]);\n    var anchor = useAnchor({\n      show: !!focusedDatum,\n      portalEl: portalEl,\n      anchorEl: anchorEl,\n      tooltipEl: tooltipEl,\n      side: ['right', 'left', 'top', 'bottom']\n    });\n    var previousAnchor = usePrevious(anchor);\n    var latestStableAnchor = (_useLatestWhen = useLatestWhen(anchor, !!anchor.fit)) != null ? _useLatestWhen : anchor;\n    var _latestStableAnchor$s = latestStableAnchor.style;\n    _latestStableAnchor$s.visibility;\n\n    var anchorStyle = _objectWithoutPropertiesLoose(_latestStableAnchor$s, _excluded$1);\n\n    var tooltipRef = React__default['default'].useRef(null);\n    var immediate = Number.isNaN(previousAnchor == null ? void 0 : previousAnchor.style.left);\n    var tooltipXSpring = useSpring(anchorStyle.left || 0, [1, 210, 30], function () {\n      if (tooltipRef.current) {\n        tooltipRef.current.style.transform = \"translate(\" + tooltipXSpring.x() + \"px, \" + tooltipYSpring.x() + \"px)\";\n      }\n    }, immediate);\n    var tooltipYSpring = useSpring(anchorStyle.top || 0, [1, 210, 30], function () {\n      if (tooltipRef.current) {\n        tooltipRef.current.style.transform = \"translate(\" + tooltipXSpring.x() + \"px, \" + tooltipYSpring.x() + \"px)\";\n      }\n    }, immediate); // const springProps = useSpring({\n    //   ...anchorStyle,\n    //   left: anchorStyle.left || 0,\n    //   top: anchorStyle.top || 0,\n    //   config: { mass: 1, tension: 210, friction: 30 },\n    //   immediate: key => {\n    //     if (['left', 'top'].includes(key)) {\n    //       return Number.isNaN(previousAnchor?.style.left)\n    //     }\n    //     return false\n    //   },\n    // })\n\n    var show = !!preTooltipOptions;\n    var latestFit = useLatestWhen(anchor.fit, !!anchor.fit);\n    return show && portalEl ? /*#__PURE__*/ReactDOM__default['default'].createPortal( /*#__PURE__*/React__default['default'].createElement(\"div\", {\n      ref: tooltipRef,\n      style: {\n        position: anchorStyle.position,\n        opacity: !!focusedDatum ? 1 : 0,\n        transition: 'opacity .3s ease'\n      }\n    }, /*#__PURE__*/React__default['default'].createElement(\"div\", {\n      ref: function ref(el) {\n        return setTooltipEl(el);\n      },\n      style: _extends({\n        fontFamily: 'sans-serif'\n      }, (latestFit == null ? void 0 : latestFit.startKey) === 'left' ? {\n        padding: '0 10px'\n      } : {\n        padding: '10px 0'\n      })\n    }, tooltipOptions.render({\n      getOptions: getOptions,\n      focusedDatum: latestFocusedDatum,\n      primaryAxis: primaryAxis,\n      secondaryAxis: secondaryAxis,\n      getDatumStyle: function getDatumStyle(datum) {\n        return getDatumStatusStyle(datum, focusedDatum);\n      },\n      anchor: anchor\n    }))), portalEl) : null;\n  }\n\n  function Voronoi() {\n    var _useChartContext = useChartContext(),\n        getOptions = _useChartContext.getOptions,\n        focusedDatumState = _useChartContext.focusedDatumState;\n\n    var setFocusedDatum = focusedDatumState[1];\n\n    var _getOptions = getOptions(),\n        onFocusDatum = _getOptions.onFocusDatum,\n        onClickDatum = _getOptions.onClickDatum,\n        tooltip = _getOptions.tooltip,\n        primaryCursor = _getOptions.primaryCursor,\n        secondaryCursor = _getOptions.secondaryCursor,\n        showVoronoi = _getOptions.showVoronoi,\n        groupingMode = _getOptions.groupingMode;\n\n    var handleFocus = React__default['default'].useCallback(function (datum) {\n      var _getOptions$onFocusDa, _getOptions2;\n\n      (_getOptions$onFocusDa = (_getOptions2 = getOptions()).onFocusDatum) == null ? void 0 : _getOptions$onFocusDa.call(_getOptions2, datum);\n      setFocusedDatum(datum);\n    }, [getOptions, setFocusedDatum]);\n    var needsVoronoi = onFocusDatum || onClickDatum || tooltip || primaryCursor || secondaryCursor || showVoronoi; // Don't render until we have all dependencies\n\n    if (!needsVoronoi) {\n      return null;\n    }\n\n    var props = {\n      handleFocus: handleFocus\n    };\n\n    if (groupingMode === 'primary') {\n      return /*#__PURE__*/React__default['default'].createElement(PrimaryVoronoi, props);\n    }\n\n    return null; // return <ClosestVoronoi {...props} />\n  }\n\n  function PrimaryVoronoi(_ref) {\n    var handleFocus = _ref.handleFocus;\n\n    var _useChartContext2 = useChartContext(),\n        primaryAxis = _useChartContext2.primaryAxis,\n        series = _useChartContext2.series,\n        secondaryAxes = _useChartContext2.secondaryAxes,\n        getOptions = _useChartContext2.getOptions,\n        gridDimensions = _useChartContext2.gridDimensions,\n        groupedDatums = _useChartContext2.groupedDatums;\n\n    return React__default['default'].useMemo(function () {\n      var columns = series[0].datums.filter(function (datum) {\n        var primaryValue = primaryAxis.getValue(datum.originalDatum);\n        return primaryValue !== 'undefined' && primaryValue !== null;\n      }).map(function (datum, i, all) {\n        var _primaryAxis$scale$ra, _groupedDatums$get;\n\n        var prev = all[i - 1];\n        var next = all[i + 1];\n        var primaryValue = primaryAxis.getValue(datum.originalDatum);\n        var primaryPx = getPrimary(datum, primaryAxis);\n        var range = (_primaryAxis$scale$ra = primaryAxis == null ? void 0 : primaryAxis.scale.range()) != null ? _primaryAxis$scale$ra : [0, 0];\n        var primaryStart = range[0],\n            primaryEnd = range[1];\n\n        if (prev) {\n          var prevPx = getPrimary(prev, primaryAxis);\n          primaryStart = primaryPx - (primaryPx - prevPx) / 2;\n        }\n\n        if (next) {\n          var nextPx = getPrimary(next, primaryAxis);\n          primaryEnd = primaryPx + (nextPx - primaryPx) / 2;\n        }\n\n        var datums = (_groupedDatums$get = groupedDatums.get(\"\" + primaryValue)) != null ? _groupedDatums$get : [];\n        datums.sort(function (a, b) {\n          var _aAxis$scale, _a$stackData, _bAxis$scale, _b$stackData;\n\n          var aAxis = secondaryAxes.find(function (d) {\n            return d.id === a.secondaryAxisId;\n          });\n          var bAxis = secondaryAxes.find(function (d) {\n            return d.id === b.secondaryAxisId;\n          });\n          var aPx = (_aAxis$scale = aAxis == null ? void 0 : aAxis.scale(aAxis.stacked ? (_a$stackData = a.stackData) == null ? void 0 : _a$stackData[1] : aAxis == null ? void 0 : aAxis.getValue(a.originalDatum))) != null ? _aAxis$scale : NaN;\n          var bPx = (_bAxis$scale = bAxis == null ? void 0 : bAxis.scale(bAxis.stacked ? (_b$stackData = b.stackData) == null ? void 0 : _b$stackData[1] : bAxis == null ? void 0 : bAxis.getValue(b.originalDatum))) != null ? _bAxis$scale : NaN;\n          return aPx - bPx;\n        });\n        return {\n          primaryStart: primaryStart,\n          primaryEnd: primaryEnd,\n          primaryPx: primaryPx,\n          datumBoundaries: datums.filter(function (datum) {\n            var secondaryAxis = secondaryAxes.find(function (d) {\n              return d.id === datum.secondaryAxisId;\n            });\n            var secondaryValue = secondaryAxis == null ? void 0 : secondaryAxis.getValue(datum.originalDatum);\n            return typeof secondaryValue !== 'undefined' && secondaryValue !== null;\n          }).map(function (datum, i, all) {\n            var _secondaryAxis$scale3, _secondaryAxis$scale$2;\n\n            var prev = all[i - 1];\n            var next = all[i + 1];\n            var secondaryAxis = secondaryAxes.find(function (d) {\n              return d.id === datum.secondaryAxisId;\n            });\n\n            if (secondaryAxis != null && secondaryAxis.stacked) {\n              var _secondaryAxis$scale$, _datum$stackData, _datum$stackData2;\n\n              var _range = (_secondaryAxis$scale$ = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$ : [0, 0];\n\n              var stackData = [(_datum$stackData = datum.stackData) == null ? void 0 : _datum$stackData[0], (_datum$stackData2 = datum.stackData) == null ? void 0 : _datum$stackData2[1]];\n\n              if (secondaryAxis != null && secondaryAxis.isVertical) {\n                _range.reverse();\n\n                stackData.reverse();\n              }\n\n              var _secondaryStart = _range[0],\n                  _secondaryEnd = _range[1];\n\n              if (prev) {\n                var _secondaryAxis$scale, _stackData$;\n\n                _secondaryStart = (_secondaryAxis$scale = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$ = stackData[0]) != null ? _stackData$ : NaN)) != null ? _secondaryAxis$scale : NaN;\n              }\n\n              if (next) {\n                var _secondaryAxis$scale2, _stackData$2;\n\n                _secondaryEnd = (_secondaryAxis$scale2 = secondaryAxis == null ? void 0 : secondaryAxis.scale((_stackData$2 = stackData[1]) != null ? _stackData$2 : NaN)) != null ? _secondaryAxis$scale2 : NaN;\n              }\n\n              return {\n                secondaryStart: _secondaryStart,\n                secondaryEnd: _secondaryEnd,\n                datum: datum\n              };\n            }\n\n            var value = (_secondaryAxis$scale3 = secondaryAxis == null ? void 0 : secondaryAxis.scale(secondaryAxis == null ? void 0 : secondaryAxis.getValue(datum.originalDatum))) != null ? _secondaryAxis$scale3 : NaN;\n            var range = (_secondaryAxis$scale$2 = secondaryAxis == null ? void 0 : secondaryAxis.scale.range()) != null ? _secondaryAxis$scale$2 : [0, 0];\n\n            if (secondaryAxis != null && secondaryAxis.isVertical) {\n              range.reverse();\n            }\n\n            var secondaryStart = range[0],\n                secondaryEnd = range[1];\n\n            if (prev) {\n              var _prevAxis$scale;\n\n              var prevAxis = secondaryAxes.find(function (d) {\n                return d.id === (prev == null ? void 0 : prev.secondaryAxisId);\n              });\n              var prevValue = (_prevAxis$scale = prevAxis == null ? void 0 : prevAxis.scale(prevAxis == null ? void 0 : prevAxis.getValue(prev.originalDatum))) != null ? _prevAxis$scale : NaN;\n              secondaryStart = value - (value - prevValue) / 2;\n            }\n\n            if (next) {\n              var _nextAxis$scale;\n\n              var nextAxis = secondaryAxes.find(function (d) {\n                return d.id === (next == null ? void 0 : next.secondaryAxisId);\n              });\n              var nextValue = (_nextAxis$scale = nextAxis == null ? void 0 : nextAxis.scale(nextAxis == null ? void 0 : nextAxis.getValue(next.originalDatum))) != null ? _nextAxis$scale : NaN;\n              secondaryEnd = value + (nextValue - value) / 2;\n            }\n\n            return {\n              secondaryStart: secondaryStart,\n              secondaryEnd: secondaryEnd,\n              datum: datum\n            };\n          })\n        };\n      });\n      return /*#__PURE__*/React__default['default'].createElement(\"g\", {\n        onMouseLeave: function onMouseLeave() {\n          return handleFocus(null);\n        },\n        style: {\n          transform: translate(gridDimensions.gridX, gridDimensions.gridY)\n        }\n      }, columns.map(function (column) {\n        return /*#__PURE__*/React__default['default'].createElement(React__default['default'].Fragment, {\n          key: column.primaryPx\n        }, column.datumBoundaries.map(function (datumBoundary) {\n          var x1 = !primaryAxis.isVertical ? column.primaryStart : datumBoundary.secondaryStart;\n          var x2 = !primaryAxis.isVertical ? column.primaryEnd : datumBoundary.secondaryEnd;\n          var y1 = !primaryAxis.isVertical ? datumBoundary.secondaryStart : column.primaryStart;\n          var y2 = !primaryAxis.isVertical ? datumBoundary.secondaryEnd : column.primaryEnd;\n          var x = Math.min(x1, x2);\n          var y = Math.min(y1, y2);\n          var xEnd = Math.max(x1, x2);\n          var yEnd = Math.max(y1, y2);\n          var height = Math.max(yEnd - y, 0);\n          var width = Math.max(xEnd - x, 0);\n          return /*#__PURE__*/React__default['default'].createElement(\"rect\", {\n            key: column.primaryPx + \"_\" + datumBoundary.datum.seriesIndex,\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n            className: 'action-voronoi',\n            onMouseEnter: function onMouseEnter() {\n              return handleFocus(datumBoundary.datum);\n            },\n            style: {\n              fill: getOptions().dark ? '#ffffff33' : 'rgba(0,0,0,0.2)',\n              strokeWidth: 1,\n              stroke: getOptions().dark ? 'white' : 'black',\n              opacity: getOptions().showVoronoi ? 1 : 0\n            }\n          });\n        }));\n      }));\n    }, [getOptions, gridDimensions.gridX, gridDimensions.gridY, groupedDatums, handleFocus, primaryAxis, secondaryAxes, series]);\n  } // function ClosestVoronoi({\n  //   stackData,\n  //   extent,\n  //   handleFocus,\n  //   showVoronoi,\n  // }: {\n  //   stackData: Series[]\n  //   extent: number[][]\n  //   handleFocus: (datum: Datum | null) => void\n  //   showVoronoi: boolean\n  // }) {\n  //   let polygons = null\n  //   const voronoiData: { x: number; y: number; datum: Datum }[] = []\n  //   stackData.forEach(series => {\n  //     series.datums\n  //       .filter(d => d.defined)\n  //       .forEach(datum => {\n  //         datum.boundingPoints.forEach(boundingPoint => {\n  //           if (\n  //             typeof datum.x !== 'number' ||\n  //             typeof datum.y !== 'number' ||\n  //             Number.isNaN(datum.y) ||\n  //             Number.isNaN(datum.x)\n  //           ) {\n  //             return\n  //           }\n  //           voronoiData.push({\n  //             x: boundingPoint.x,\n  //             y: boundingPoint.y,\n  //             datum,\n  //           })\n  //         })\n  //       })\n  //   })\n  //   const delaunay = Delaunay.from(\n  //     voronoiData,\n  //     d => Math.max(d.x, 0),\n  //     d => Math.max(d.y, 0)\n  //   )\n  //   const flatExtent = extent.flat().map(d => Math.max(d, 0))\n  //   const voronoi = delaunay.voronoi(flatExtent)\n  //   polygons = voronoi.cellPolygons()\n  //   polygons = Array.from(polygons)\n  //   return (\n  //     <g>\n  //       {polygons.map((points, i) => {\n  //         const index = points.index\n  //         const datum = voronoiData[index].datum\n  //         const path = lineFn(points as any) || undefined\n  //         return (\n  //           <Path\n  //             key={i}\n  //             d={path}\n  //             className=\"action-voronoi\"\n  //             onMouseEnter={() => handleFocus(datum)}\n  //             onMouseLeave={() => handleFocus(null)}\n  //             style={{\n  //               fill: randomFill(),\n  //               opacity: showVoronoi ? 1 : 0,\n  //             }}\n  //           />\n  //         )\n  //       })}\n  //     </g>\n  //   )\n  // }\n\n\n  var _excluded = [\"options\", \"className\", \"style\"]; //\n\n  var defaultColorScheme = ['#0f83ab', '#faa43a', '#ff4e4e', '#53cfc9', '#a2d925', '#decf3f', '#734fe9', '#cd82ad', '#006d92', '#de7c00', '#f33232', '#3f9a80', '#53c200', '#d7af00', '#4c26c9', '#d44d99'];\n\n  function defaultChartOptions(options) {\n    var _options$initialWidth, _options$initialHeigh, _options$getSeriesOrd, _options$groupingMode, _options$showVoronoi, _options$defaultColor, _options$useIntersect, _options$intersection, _options$tooltip, _options$primaryCurso, _options$secondaryCur;\n\n    return _extends({}, options, {\n      initialWidth: (_options$initialWidth = options.initialWidth) != null ? _options$initialWidth : 300,\n      initialHeight: (_options$initialHeigh = options.initialHeight) != null ? _options$initialHeigh : 200,\n      getSeriesOrder: (_options$getSeriesOrd = options.getSeriesOrder) != null ? _options$getSeriesOrd : function (series) {\n        return series;\n      },\n      groupingMode: (_options$groupingMode = options.groupingMode) != null ? _options$groupingMode : 'primary',\n      showVoronoi: (_options$showVoronoi = options.showVoronoi) != null ? _options$showVoronoi : false,\n      defaultColors: (_options$defaultColor = options.defaultColors) != null ? _options$defaultColor : defaultColorScheme,\n      useIntersectionObserver: (_options$useIntersect = options.useIntersectionObserver) != null ? _options$useIntersect : true,\n      intersectionObserverRootMargin: (_options$intersection = options.intersectionObserverRootMargin) != null ? _options$intersection : '1000px',\n      tooltip: (_options$tooltip = options.tooltip) != null ? _options$tooltip : true,\n      primaryCursor: (_options$primaryCurso = options.primaryCursor) != null ? _options$primaryCurso : true,\n      secondaryCursor: (_options$secondaryCur = options.secondaryCursor) != null ? _options$secondaryCur : true\n    });\n  }\n\n  function Chart(_ref) {\n    var userOptions = _ref.options,\n        className = _ref.className,\n        _ref$style = _ref.style,\n        style = _ref$style === void 0 ? {} : _ref$style,\n        rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n    var options = defaultChartOptions(userOptions);\n\n    var _React$useState = React__default['default'].useState(null),\n        chartElement = _React$useState[0],\n        setContainerElement = _React$useState[1];\n\n    var containerEl = chartElement == null ? void 0 : chartElement.parentElement;\n    var nearestScrollableParent = React__default['default'].useMemo(function () {\n      var run = function run(el) {\n        if (!el) {\n          return null;\n        }\n\n        var grandParent = el.parentElement;\n\n        if (!grandParent) {\n          return null;\n        }\n\n        if (grandParent.scrollHeight > grandParent.clientHeight) {\n          var _window$getComputedSt = window.getComputedStyle(grandParent),\n              overflow = _window$getComputedSt.overflow;\n\n          if (overflow.includes('scroll') || overflow.includes('auto')) {\n            return grandParent;\n          }\n        }\n\n        return run(grandParent);\n      };\n\n      return run(containerEl);\n    }, [containerEl]);\n\n    var _React$useState2 = React__default['default'].useState({\n      width: options.initialWidth,\n      height: options.initialHeight\n    }),\n        _React$useState2$ = _React$useState2[0],\n        width = _React$useState2$.width,\n        height = _React$useState2$.height,\n        setDims = _React$useState2[1];\n\n    useIsomorphicLayoutEffect(function () {\n      if (containerEl) {\n        var computed = window.getComputedStyle(containerEl);\n\n        if (!['relative', 'absolute', 'fixed'].includes(computed.position)) {\n          containerEl.style.position = 'relative';\n        }\n      }\n    }, [containerEl]);\n    React__default['default'].useEffect(function () {\n      if (!containerEl) {\n        return;\n      }\n\n      var observer = new ResizeObserver(function () {\n        var rect = containerEl == null ? void 0 : containerEl.getBoundingClientRect();\n\n        if (rect) {\n          setDims({\n            width: rect.width,\n            height: rect.height\n          });\n        }\n      });\n      observer.observe(containerEl);\n      return function () {\n        observer.unobserve(containerEl);\n      };\n    }, [containerEl]);\n\n    var _React$useState3 = React__default['default'].useState(true),\n        isIntersecting = _React$useState3[0],\n        setIsIntersecting = _React$useState3[1];\n\n    React__default['default'].useEffect(function () {\n      if (!containerEl || !options.useIntersectionObserver) return;\n      var observer = new IntersectionObserver(function (entries) {\n        for (var _iterator = _createForOfIteratorHelperLoose(entries), _step; !(_step = _iterator()).done;) {\n          var entry = _step.value;\n\n          if (entry.isIntersecting) {\n            setIsIntersecting(true);\n          } else {\n            setIsIntersecting(false);\n          }\n        }\n      }, {\n        root: nearestScrollableParent,\n        rootMargin: options.intersectionObserverRootMargin\n      });\n      observer.observe(containerEl);\n      return function () {\n        observer.unobserve(containerEl);\n      };\n    }, [containerEl, nearestScrollableParent, options.intersectionObserverRootMargin, options.useIntersectionObserver]);\n    return /*#__PURE__*/React__default['default'].createElement(\"div\", _extends({\n      ref: setContainerElement\n    }, rest, {\n      className: \"ReactChart \" + (className || ''),\n      style: _extends({}, style, {\n        position: 'absolute',\n        width: width,\n        height: height\n      })\n    }), isIntersecting ? /*#__PURE__*/React__default['default'].createElement(ChartInner, {\n      options: options,\n      width: width,\n      height: height\n    }) : null);\n  }\n\n  function ChartInner(_ref2) {\n    var _options$renderSVG;\n\n    var options = _ref2.options,\n        width = _ref2.width,\n        height = _ref2.height;\n\n    if (!options.primaryAxis) {\n      throw new Error('A primaryAxis is required');\n    }\n\n    if (!options.secondaryAxes.length) {\n      throw new Error('At least one secondaryAxis is required');\n    }\n\n    var primaryAxisOptions = React__default['default'].useMemo(function () {\n      var firstValue = getFirstDefinedValue(options.primaryAxis, options.data);\n      var optionsWithScaleType = axisOptionsWithScaleType(options.primaryAxis, firstValue);\n      return _extends({\n        position: 'bottom'\n      }, optionsWithScaleType);\n    }, [options.data, options.primaryAxis]);\n    var secondaryAxesOptions = React__default['default'].useMemo(function () {\n      return options.secondaryAxes.map(function (secondaryAxis, i) {\n        var firstValue = getFirstDefinedValue(secondaryAxis, options.data);\n        var optionsWithScaleType = axisOptionsWithScaleType(secondaryAxis, firstValue);\n\n        if (!optionsWithScaleType.elementType) {\n          if (primaryAxisOptions.scaleType === 'band') {\n            optionsWithScaleType.elementType = 'bar';\n          } else if (optionsWithScaleType.stacked) {\n            optionsWithScaleType.elementType = 'area';\n          }\n        }\n\n        if (typeof optionsWithScaleType.stacked === 'undefined' && optionsWithScaleType.elementType && ['bar', 'area'].includes(optionsWithScaleType.elementType)) {\n          optionsWithScaleType.stacked = true;\n        }\n\n        return _extends({\n          position: !i ? 'left' : 'right'\n        }, optionsWithScaleType);\n      });\n    }, [options.data, options.secondaryAxes, primaryAxisOptions]);\n    var svgRef = React__default['default'].useRef(null);\n    var getOptions = useGetLatest(options);\n    var axisDimensionsState = React__default['default'].useState({\n      left: {},\n      right: {},\n      top: {},\n      bottom: {}\n    });\n    var axisDimensions = axisDimensionsState[0];\n    var focusedDatumState = React__default['default'].useState(null);\n    var focusedDatum = focusedDatumState[0]; // useAtom<Datum<TDatum> | null>(focusedDatumAtom)\n\n    var gridDimensions = React__default['default'].useMemo(function () {\n      // Left\n      var _map = ['width', 'top', 'bottom'].map(function (prop) {\n        return sumAllDimensionProperties(axisDimensions.left, prop);\n      }),\n          axesLeftWidth = _map[0],\n          axesLeftTop = _map[1],\n          axesLeftBottom = _map[2];\n\n      var _map2 = ['width', 'top', 'bottom'].map(function (prop) {\n        return sumAllDimensionProperties(axisDimensions.right, prop);\n      }),\n          axesRightWidth = _map2[0],\n          axesRightTop = _map2[1],\n          axesRightBottom = _map2[2];\n\n      var _map3 = ['height', 'left', 'right'].map(function (prop) {\n        return sumAllDimensionProperties(axisDimensions.top, prop);\n      }),\n          axesTopHeight = _map3[0],\n          axesTopLeft = _map3[1],\n          axesTopRight = _map3[2];\n\n      var _map4 = ['height', 'left', 'right'].map(function (prop) {\n        return sumAllDimensionProperties(axisDimensions.bottom, prop);\n      }),\n          axesBottomHeight = _map4[0],\n          axesBottomLeft = _map4[1],\n          axesBottomRight = _map4[2];\n\n      var gridX = Math.max(axesLeftWidth, axesTopLeft, axesBottomLeft);\n      var gridY = Math.max(axesTopHeight, axesLeftTop, axesRightTop);\n      var gridWidth = Math.max(0, width - Math.max(axesLeftWidth, axesTopLeft, axesBottomLeft) - Math.max(axesRightWidth, axesTopRight, axesBottomRight));\n      var gridHeight = Math.max(0, height - Math.max(axesTopHeight, axesLeftTop, axesRightTop) - Math.max(axesBottomHeight, axesLeftBottom, axesRightBottom));\n      return {\n        gridX: gridX,\n        gridY: gridY,\n        gridWidth: gridWidth,\n        gridHeight: gridHeight\n      };\n    }, [width, height, axisDimensions]);\n    var series = React__default['default'].useMemo(function () {\n      var series = [];\n\n      for (var seriesIndex = 0; seriesIndex < options.data.length; seriesIndex++) {\n        var _originalSeries$id, _originalSeries$label;\n\n        var originalSeries = options.data[seriesIndex];\n        var seriesId = (_originalSeries$id = originalSeries.id) != null ? _originalSeries$id : seriesIndex + '';\n        var seriesLabel = (_originalSeries$label = originalSeries.label) != null ? _originalSeries$label : \"Series \" + (seriesIndex + 1);\n        var secondaryAxisId = originalSeries.secondaryAxisId;\n        var originalDatums = originalSeries.data;\n        var datums = [];\n\n        for (var datumIndex = 0; datumIndex < originalDatums.length; datumIndex++) {\n          var originalDatum = originalDatums[datumIndex];\n          datums[datumIndex] = {\n            originalSeries: originalSeries,\n            seriesIndex: seriesIndex,\n            seriesId: seriesId,\n            seriesLabel: seriesLabel,\n            secondaryAxisId: secondaryAxisId,\n            index: datumIndex,\n            originalDatum: originalDatum\n          };\n        }\n\n        series[seriesIndex] = {\n          originalSeries: originalSeries,\n          index: seriesIndex,\n          id: seriesId,\n          label: seriesLabel,\n          secondaryAxisId: secondaryAxisId,\n          datums: datums\n        };\n      }\n\n      if (secondaryAxesOptions.some(function (axisOptions) {\n        return axisOptions.stacked;\n      })) {\n        secondaryAxesOptions.filter(function (d) {\n          return d.stacked;\n        }).forEach(function (secondaryAxis) {\n          var _secondaryAxis$stackO;\n\n          var axisSeries = series.filter(function (s) {\n            return s.secondaryAxisId === secondaryAxis.id;\n          });\n          var seriesIndices = Object.keys(axisSeries);\n          var stacker = stack().keys(seriesIndices).value(function (_, seriesIndex, index) {\n            var val = secondaryAxis.getValue(axisSeries[Number(seriesIndex)].datums[index].originalDatum);\n\n            if (typeof val === 'undefined' || val === null) {\n              return 0;\n            }\n\n            return val;\n          }).offset((_secondaryAxis$stackO = secondaryAxis.stackOffset) != null ? _secondaryAxis$stackO : stackOffsetNone);\n          var stacked = stacker(Array.from({\n            length: axisSeries.sort(function (a, b) {\n              return b.datums.length - a.datums.length;\n            })[0].datums.length\n          }));\n          stacked.forEach(function (s, sIndex) {\n            s.forEach(function (datum, i) {\n              // @ts-ignore\n              datum.data = axisSeries[sIndex].datums[i];\n              axisSeries[sIndex].datums[i].stackData = datum;\n            });\n          });\n        });\n      }\n\n      return series;\n    }, [options.data, secondaryAxesOptions]);\n    var primaryAxis = React__default['default'].useMemo(function () {\n      return buildAxisLinear(true, primaryAxisOptions, series, gridDimensions, width, height);\n    }, [gridDimensions, height, primaryAxisOptions, series, width]);\n    var secondaryAxes = React__default['default'].useMemo(function () {\n      return secondaryAxesOptions.map(function (secondaryAxis) {\n        return buildAxisLinear(false, secondaryAxis, series, gridDimensions, width, height);\n      });\n    }, [gridDimensions, height, secondaryAxesOptions, series, width]);\n    var axesInfo = React__default['default'].useMemo(function () {\n      // Make sure we're mapping x and y to the correct axes\n      var xKey = primaryAxis.isVertical ? 'secondary' : 'primary';\n      var yKey = primaryAxis.isVertical ? 'primary' : 'secondary';\n      return {\n        xKey: xKey,\n        yKey: yKey\n      };\n    }, [primaryAxis]);\n    var groupedDatums = React__default['default'].useMemo(function () {\n      var groupedDatums = new Map();\n      var allDatums = series.map(function (s) {\n        return s.datums;\n      }).flat(2);\n      allDatums.forEach(function (datum) {\n        var primaryValue = \"\" + primaryAxis.getValue(datum.originalDatum);\n\n        if (!groupedDatums.has(primaryValue)) {\n          groupedDatums.set(primaryValue, []);\n        }\n\n        groupedDatums.get(primaryValue).push(datum);\n      });\n      allDatums.forEach(function (datum) {\n        var primaryValue = \"\" + primaryAxis.getValue(datum.originalDatum);\n        datum.group = groupedDatums.get(primaryValue);\n      });\n      return groupedDatums;\n    }, [primaryAxis, series]);\n    var getSeriesStatusStyle = React__default['default'].useCallback(function (series, focusedDatum) {\n      var _getOptions$getSeries, _getOptions$getSeries2, _getOptions;\n\n      var base = {\n        color: getOptions().defaultColors[series.index % (getOptions().defaultColors.length - 1)]\n      };\n      var status = getSeriesStatus(series, focusedDatum);\n      var statusStyles = (_getOptions$getSeries = (_getOptions$getSeries2 = (_getOptions = getOptions()).getSeriesStyle) == null ? void 0 : _getOptions$getSeries2.call(_getOptions, series, status)) != null ? _getOptions$getSeries : {};\n      series.style = materializeStyles(statusStyles, base);\n      return series.style;\n    }, [getOptions]);\n    var getDatumStatusStyle = React__default['default'].useCallback(function (datum, focusedDatum) {\n      var _series$datum$seriesI, _getOptions$getDatumS, _getOptions$getDatumS2, _getOptions2;\n\n      var base = _extends({}, (_series$datum$seriesI = series[datum.seriesIndex]) == null ? void 0 : _series$datum$seriesI.style, {\n        color: getOptions().defaultColors[datum.seriesIndex % (getOptions().defaultColors.length - 1)]\n      });\n\n      var status = getDatumStatus(datum, focusedDatum);\n      var statusStyles = (_getOptions$getDatumS = (_getOptions$getDatumS2 = (_getOptions2 = getOptions()).getDatumStyle) == null ? void 0 : _getOptions$getDatumS2.call(_getOptions2, datum, status)) != null ? _getOptions$getDatumS : {};\n      datum.style = materializeStyles(statusStyles, base);\n      return datum.style;\n    }, [getOptions, series]); // Reverse the stack order for proper z-indexing\n\n    var orderedSeries = React__default['default'].useMemo(function () {\n      var reversedSeries = [].concat(series).reverse();\n      return getOptions().getSeriesOrder(reversedSeries);\n    }, [getOptions, series]);\n    useIsomorphicLayoutEffect(function () {\n      if (svgRef.current && svgRef.current.parentElement && !svgRef.current.parentElement.style.position) {\n        svgRef.current.parentElement.style.position = 'relative';\n      }\n    });\n    var contextValue = {\n      getOptions: getOptions,\n      gridDimensions: gridDimensions,\n      primaryAxis: primaryAxis,\n      secondaryAxes: secondaryAxes,\n      axesInfo: axesInfo,\n      series: series,\n      orderedSeries: orderedSeries,\n      groupedDatums: groupedDatums,\n      width: width,\n      height: height,\n      getSeriesStatusStyle: getSeriesStatusStyle,\n      getDatumStatusStyle: getDatumStatusStyle,\n      axisDimensionsState: axisDimensionsState,\n      focusedDatumState: focusedDatumState,\n      svgRef: svgRef\n    };\n    var seriesByAxisId = React__default['default'].useMemo(function () {\n      return sort(groups(orderedSeries, function (d) {\n        return d.secondaryAxisId;\n      }), function (_ref3) {\n        var key = _ref3[0];\n        return secondaryAxes.findIndex(function (axis) {\n          return axis.id === key;\n        });\n      });\n    }, [orderedSeries, secondaryAxes]);\n    var memoizeSeries = !options.getDatumStyle && !options.getSeriesStyle; // eslint-disable-next-line react-hooks/exhaustive-deps\n\n    var getSeriesInfo = function getSeriesInfo() {\n      return {\n        primaryAxis: primaryAxis,\n        secondaryAxes: secondaryAxes,\n        seriesByAxisId: seriesByAxisId\n      };\n    };\n\n    var getMemoizedSeriesInfo = React__default['default'].useCallback(function () {\n      return {\n        primaryAxis: primaryAxis,\n        secondaryAxes: secondaryAxes,\n        seriesByAxisId: seriesByAxisId\n      };\n    }, [primaryAxis, secondaryAxes, seriesByAxisId]);\n\n    if (memoizeSeries) {\n      getSeriesInfo = getMemoizedSeriesInfo;\n    }\n\n    var seriesEl = React__default['default'].useMemo(function () {\n      var _getSeriesInfo = getSeriesInfo(),\n          primaryAxis = _getSeriesInfo.primaryAxis,\n          secondaryAxes = _getSeriesInfo.secondaryAxes,\n          seriesByAxisId = _getSeriesInfo.seriesByAxisId;\n\n      return seriesByAxisId.map(function (_ref4) {\n        var axisId = _ref4[0],\n            series = _ref4[1];\n        var secondaryAxis = secondaryAxes.find(function (d) {\n          return d.id === axisId;\n        });\n\n        if (!secondaryAxis) {\n          return null;\n        }\n\n        var elementType = secondaryAxis.elementType;\n\n        var Component = function () {\n          if (elementType === 'line') {\n            return Line;\n          }\n\n          if (elementType === 'bar') {\n            return BarComponent;\n          }\n\n          if (elementType === 'area') {\n            return AreaComponent;\n          }\n\n          throw new Error('Invalid elementType');\n        }();\n\n        return /*#__PURE__*/React__default['default'].createElement(Component, {\n          key: axisId != null ? axisId : '__default__',\n          primaryAxis: primaryAxis,\n          secondaryAxis: secondaryAxis,\n          series: series\n        });\n      });\n    }, [getSeriesInfo]);\n    return /*#__PURE__*/React__default['default'].createElement(ChartContextProvider, {\n      value: useGetLatest(contextValue)\n    }, /*#__PURE__*/React__default['default'].createElement(\"div\", {\n      style: {\n        fontFamily: 'sans-serif'\n      }\n    }, /*#__PURE__*/React__default['default'].createElement(\"svg\", {\n      ref: svgRef,\n      style: {\n        width: width,\n        height: height,\n        overflow: options.brush ? 'hidden' : 'visible'\n      },\n      onClick: function onClick(e) {\n        return options.onClickDatum == null ? void 0 : options.onClickDatum(focusedDatum, e);\n      }\n    }, /*#__PURE__*/React__default['default'].createElement(\"g\", {\n      className: \"Series\",\n      style: {\n        pointerEvents: 'none'\n      }\n    }, seriesEl), /*#__PURE__*/React__default['default'].createElement(\"g\", {\n      className: \"axes\"\n    }, [primaryAxis].concat(secondaryAxes).map(function (axis) {\n      return /*#__PURE__*/React__default['default'].createElement(AxisLinearComp, _extends({\n        key: [axis.position, axis.id].join('')\n      }, axis));\n    })), /*#__PURE__*/React__default['default'].createElement(Voronoi, null), (_options$renderSVG = options.renderSVG == null ? void 0 : options.renderSVG()) != null ? _options$renderSVG : null), /*#__PURE__*/React__default['default'].createElement(Cursors, null), /*#__PURE__*/React__default['default'].createElement(Tooltip, null)));\n  }\n\n  function sumAllDimensionProperties(axisDimensions, side) {\n    var sum = 0;\n    Object.keys(axisDimensions).forEach(function (axisId) {\n      var _axisDimensions$axisI;\n\n      sum += ((_axisDimensions$axisI = axisDimensions[axisId]) == null ? void 0 : _axisDimensions$axisI[side]) || 0;\n    });\n    return sum;\n  }\n\n  function getFirstDefinedValue(options, data) {\n    var firstDefinedValue;\n    data.some(function (serie) {\n      return serie.data.some(function (originalDatum) {\n        var value = options.getValue(originalDatum);\n\n        if (value !== null && typeof value !== 'undefined') {\n          firstDefinedValue = value;\n          return true;\n        }\n      });\n    });\n    return firstDefinedValue;\n  }\n\n  function axisOptionsWithScaleType(options, firstValue) {\n    var scaleType = options.scaleType;\n\n    if (!options.scaleType) {\n      if (typeof firstValue === 'number') {\n        scaleType = 'linear';\n      } else if (typeof (firstValue == null ? void 0 : firstValue.getMonth) === 'function') {\n        scaleType = 'time';\n      } else if (typeof firstValue === 'string' || typeof firstValue === 'boolean') {\n        scaleType = 'band';\n      } else {\n        throw new Error('Invalid scale type: Unable to infer type from data');\n      }\n    }\n\n    return _extends({}, options, {\n      scaleType: scaleType\n    });\n  }\n\n  exports.Chart = Chart;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelperLoose.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/esm/extends.js","../node_modules/d3-array/src/ascending.js","../node_modules/d3-array/src/bisector.js","../node_modules/d3-array/src/number.js","../node_modules/d3-array/src/bisect.js","../node_modules/d3-array/src/extent.js","../node_modules/internmap/src/index.js","../node_modules/d3-array/src/identity.js","../node_modules/d3-array/src/group.js","../node_modules/d3-array/src/permute.js","../node_modules/d3-array/src/sort.js","../node_modules/d3-array/src/ticks.js","../node_modules/d3-array/src/max.js","../node_modules/d3-array/src/min.js","../node_modules/d3-array/src/quickselect.js","../node_modules/d3-array/src/quantile.js","../node_modules/d3-array/src/median.js","../node_modules/d3-array/src/range.js","../node_modules/d3-array/src/sum.js","../node_modules/d3-path/src/path.js","../node_modules/d3-shape/src/constant.js","../node_modules/d3-shape/src/array.js","../node_modules/d3-shape/src/curve/linear.js","../node_modules/d3-shape/src/point.js","../node_modules/d3-shape/src/line.js","../node_modules/d3-shape/src/area.js","../node_modules/d3-shape/src/offset/none.js","../node_modules/d3-shape/src/order/none.js","../node_modules/d3-shape/src/stack.js","../src/hooks/useGetLatest.ts","../src/hooks/useIsomorphicLayoutEffect.ts","../src/utils/Utils.ts","../src/utils/chartContext.tsx","../src/utils/curveMonotone.ts","../src/seriesTypes/Area.tsx","../src/seriesTypes/Bar.tsx","../src/seriesTypes/Line.tsx","../node_modules/d3-scale/src/init.js","../node_modules/d3-scale/src/ordinal.js","../node_modules/d3-scale/src/band.js","../node_modules/d3-color/src/define.js","../node_modules/d3-color/src/color.js","../node_modules/d3-interpolate/src/constant.js","../node_modules/d3-interpolate/src/color.js","../node_modules/d3-interpolate/src/rgb.js","../node_modules/d3-interpolate/src/numberArray.js","../node_modules/d3-interpolate/src/array.js","../node_modules/d3-interpolate/src/date.js","../node_modules/d3-interpolate/src/number.js","../node_modules/d3-interpolate/src/object.js","../node_modules/d3-interpolate/src/string.js","../node_modules/d3-interpolate/src/value.js","../node_modules/d3-interpolate/src/round.js","../node_modules/d3-scale/src/constant.js","../node_modules/d3-scale/src/number.js","../node_modules/d3-scale/src/continuous.js","../node_modules/d3-format/src/formatDecimal.js","../node_modules/d3-format/src/exponent.js","../node_modules/d3-format/src/formatGroup.js","../node_modules/d3-format/src/formatNumerals.js","../node_modules/d3-format/src/formatSpecifier.js","../node_modules/d3-format/src/formatTrim.js","../node_modules/d3-format/src/formatPrefixAuto.js","../node_modules/d3-format/src/formatRounded.js","../node_modules/d3-format/src/formatTypes.js","../node_modules/d3-format/src/identity.js","../node_modules/d3-format/src/locale.js","../node_modules/d3-format/src/defaultLocale.js","../node_modules/d3-format/src/precisionFixed.js","../node_modules/d3-format/src/precisionPrefix.js","../node_modules/d3-format/src/precisionRound.js","../node_modules/d3-scale/src/tickFormat.js","../node_modules/d3-scale/src/linear.js","../node_modules/d3-scale/src/nice.js","../node_modules/d3-scale/src/log.js","../node_modules/d3-time/src/interval.js","../node_modules/d3-time/src/millisecond.js","../node_modules/d3-time/src/duration.js","../node_modules/d3-time/src/second.js","../node_modules/d3-time/src/minute.js","../node_modules/d3-time/src/hour.js","../node_modules/d3-time/src/day.js","../node_modules/d3-time/src/week.js","../node_modules/d3-time/src/month.js","../node_modules/d3-time/src/year.js","../node_modules/d3-time/src/utcMinute.js","../node_modules/d3-time/src/utcHour.js","../node_modules/d3-time/src/utcDay.js","../node_modules/d3-time/src/utcWeek.js","../node_modules/d3-time/src/utcMonth.js","../node_modules/d3-time/src/utcYear.js","../node_modules/d3-time/src/ticks.js","../node_modules/d3-time-format/src/locale.js","../node_modules/d3-time-format/src/defaultLocale.js","../node_modules/d3-scale/src/time.js","../node_modules/d3-scale/src/utcTime.js","../src/utils/buildAxis.linear.ts","../src/components/AxisLinear.useMeasure.ts","../src/components/AxisLinear.tsx","../src/hooks/usePrevious.ts","../src/hooks/useLatestWhen.ts","../src/hooks/usePortalElement.ts","../node_modules/@reach/observe-rect/dist/observe-rect.esm.js","../src/hooks/useRect.ts","../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/@babel/runtime/helpers/esm/construct.js","../src/utils/spring.ts","../src/hooks/useSpring.ts","../src/components/Cursors.tsx","../src/hooks/useAnchor.tsx","../src/components/TooltipRenderer.tsx","../src/components/Tooltip.tsx","../src/components/Voronoi.tsx","../src/components/Chart.tsx"],"names":["len","arr","i","arr2","arrayLikeToArray","n","Object","o","Array","it","Symbol","unsupportedIterableToArray","allowArrayLike","done","value","source","target","sourceKeys","key","excluded","_extends","arguments","a","delta","compare","f","ascendingComparator","lo","hi","mid","left","right","ascending","x","valueof","index","ascendingBisect","bisector","bisectRight","center","min","max","constructor","_intern","_key","entries","get","intern_get","has","set","intern_set","delete","intern_delete","nest","keys","reduce","groups","keyof","group","regroup","map","values","F","Uint32Array","c","permute","e10","Math","e5","e2","stop","start","count","reverse","step","tickIncrement","isFinite","r0","r1","ticks","power","error","step0","step1","array","m","k","z","s","sd","newLeft","newRight","quickselect","t","j","swap","Float64Array","numbers","p","i0","value0","value1","quantile","range","sum","pi","tau","epsilon","tauEpsilon","Path","path","moveTo","closePath","lineTo","quadraticCurveTo","bezierCurveTo","arcTo","x1","y1","x2","y2","r","x0","y0","x21","y21","x01","y01","l01_2","x20","y20","l21_2","l20_2","l21","l01","l","t01","t21","arc","y","ccw","dx","dy","cw","da","a0","a1","rect","toString","Linear","areaStart","areaEnd","lineStart","lineEnd","point","defined","constant","context","curve","output","data","defined0","buffer","d","line","_","x0z","y0z","area","arealine","series","s1","order","s0","isNaN","offset","sz","oz","stack","ref","React","getterRef","datum","groupDatum","focusedDatum","stroke","style","defaults","fill","color","elementTypes","normalizeColor","type","materializeStyles","secondaryAxis","primaryAxis","primary","getPrimaryLength","getPrimary","secondary","getSecondaryStart","getSecondary","getPrimaryStart","getSecondaryLength","axis","px","scale","chartContext","children","h0","that","h1","sign","h","MonotoneX","slope2","t1","slope3","monotoneX","allSeries","getSeriesStatusStyle","getDatumStatusStyle","focusedDatumState","gridDimensions","useChartContext","transform","translate","lineStyle","strokeWidth","areaStyle","opacity","areaPath","clampPxToAxis","linePath","dataStyle","getX","getY","getRectX","getRectY","width","getWidth","height","getHeight","pathDefaultStyle","implicit","domain","unknown","ordinal","initRange","ordinalRange","round","paddingInner","paddingOuter","align","bandwidth","rescale","band","factory","prototype","parent","definition","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","define","copy","displayable","hex","formatHex","formatHsl","formatRgb","color_formatRgb","hslConvert","format","parseInt","rgbn","rgba","hsla","g","b","rgbConvert","extend","rgb","rgb_formatRgb","m2","m1","hsl2rgb","exponential","linear","gamma","colorRgb","end","nogamma","ArrayBuffer","nb","na","reA","reB","bi","q","am","bm","bs","number","one","zero","isNumberArray","unit","d0","d1","normalize","interpolate","bisect","clamp","clamper","piecewise","input","untransform","transformer","coefficient","formatDecimalParts","grouping","length","numerals","re","match","symbol","comma","precision","trim","formatSpecifier","FormatSpecifier","specifier","out","i1","exponent","prefixExponent","formatRounded","prefixes","locale","formatGroup","currencyPrefix","currencySuffix","decimal","formatNumerals","percent","minus","nan","formatTypes","prefix","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","formatTrim","padding","newFormat","e","formatPrefix","defaultLocale","thousands","currency","formatLocale","tickStep","precisionPrefix","precisionRound","precisionFixed","tickFormat","maxIter","prestep","continuous","linearish","interval","base","logs","logp","pows","powp","reflect","u","v","nice","floor","ceil","loggish","log","t0","floori","date","offseti","previous","newInterval","test","field","millisecond","durationSecond","durationMinute","durationHour","durationDay","durationWeek","durationMonth","durationYear","second","minute","hour","day","sunday","weekday","monday","thursday","month","year","utcMinute","utcHour","utcDay","utcSunday","utcWeekday","utcMonday","utcThursday","utcMonth","utcYear","tickIntervals","tickInterval","ticker","Date","H","M","S","L","locale_dateTime","locale_date","locale_time","locale_periods","locale_weekdays","locale_shortWeekdays","locale_months","locale_shortMonths","periodRe","formatRe","periodLookup","formatLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","formatLiteralPercent","utcFormats","parses","parseLiteralPercent","string","pad","pads","newDate","parseSpecifier","Z","week","utcDate","localDate","timeMonday","timeDay","parse","newParse","utcFormat","utcParse","numberRe","percentRe","requoteRe","names","name","timeYear","formatMilliseconds","timeSunday","timeThursday","dISO","formatUTCMilliseconds","dow","UTCdISO","dateTime","time","periods","days","shortDays","months","shortMonths","timeFormat","invert","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","formatYear","calendar","elementType","options","minTickPaddingForRotation","tickLabelRotationDeg","innerBandPadding","outerBandPadding","show","stacked","defaultAxisOptions","isVertical","outerRange","buildTimeAxis","buildLinearAxis","buildBandAxis","scaleFn","allDatums","minValue","maxValue","extent","shouldNice","console","outerScale","bandScale","isPrimary","buildImpliedBandScale","defaultFormat","formatters","scaleFormat","undefined","tooltipFormat","tooltip","cursorFormat","cursor","axisFamily","scaleLog","scaleLinear","median","top","bottom","scaleBand","impliedBandWidth","serie","two","d2","diff","bandRange","bandDomain","d3Range","getElBox","el","elRef","setShowRotated","axisDimensionsState","axisDimensions","setAxisDimensions","axisDimension","measureRotation","gridSize","staticLabelDims","resolvedLabel","label","widestLabel","smallestTickGap","prev","current","shouldRotate","measureDimensions","newAxes","old","newDimensions","domainEl","domainDims","measureDims","widestRealLabel","tallestRealLabel","leftMostLabelDim","labelDim","rightMostLabelDim","topMostLabelDim","bottomMostLabelDim","useIsomorphicLayoutEffect","showRotated","getOptions","dark","showDebugAxes","useMeasure","renderAxis","isRotated","isOuter","rangeStart","rangeEnd","getTicks","resolvedHeight","resolvedWidth","lineFrom","pointerEvents","getTickPx","tickFrom","tickTo","gridTo","tickLabelX","tickLabelY","fontSize","dominantBaseline","textAnchor","when","portalEl","setPortalEl","element","document","position","props","rectChanged","observedNodes","run","changedStates","newRect","node","state","cb","rafId","window","observeRect","observe","wasEmpty","hasRectChanged","callbacks","unobserve","cancelAnimationFrame","setElement","setRect","rectRef","enabled","observer","_setPrototypeOf","Reflect","Boolean","isNativeReflectConstruct","_construct","Constructor","Function","instance","setPrototypeOf","Class","almostEqual","Spring","dt","setEnd","velocity","almostZero","snap","cmk","c1","c2","pow","r2","initial","w","cos","sin","springRef","getValue","useGetLatest","startRaf","stopRaf","useRaf","raf","rafCallback","tick","requestAnimationFrame","getLineBackgroundColor","getBackgroundColor","showLine","showLabel","primaryOptions","secondaryOptions","resolvedPrimaryOptions","defaultCursor","resolvedSecondaryOptions","svgRef","secondaryAxes","getTooltipOptions","latestFocusedDatum","useLatestWhen","siblingAxis","resolveValue","datumValue","latestPropsValue","latestDatumValue","latestValue","siblingRange","bandWidth","Number","lineStartX","lineStartY","lineEndX","lineEndY","lineHeight","lineWidth","bubbleX","bubbleY","alignPctY","alignPctX","formattedValue","svgRect","useRect","lineRef","bubbleRef","latestLineStartX","latestLineStartY","latestBubbleX","latestBubbleY","previousTruePx","usePrevious","immediate","lineXSpring","useSpring","lineYSpring","bubbleXSpring","bubbleYSpring","usePortalElement","fontFamily","transition","background","borderRadius","whiteSpace","sideSchemas","side","startKey","lengthKey","crossStartKey","crossLengthKey","fromEnd","portalDims","anchorDims","tooltipDims","sides","preSides","alignStr","incompatibleSide","incompatibleAlign","JSON","ready","fit","fitOnBestSide","useLargest","visibility","fits","measureFit","parentStart","parentLength","crossParentStart","crossParentLength","anchorStart","anchorLength","crossAnchorStart","crossAnchorLength","crossAnchorWidth","targetLength","crossTargetLength","targetStart","fitRatio","crossTargetStart","showCount","triangleSize","latestFit","getDatumStyle","groupingMode","groupDatums","resolvedShowCount","activeIndex","visibleSortedGroupDatums","hasPrevious","hasNext","finalAlign","arrowPosition","backgroundColor","triangleStyles","borderLeft","borderRight","borderTop","borderBottom","marginBottom","textAlign","active","sortedDatum","fontWeight","display","alignItems","justifyContent","paddingTop","alignPriority","tooltipArrowPadding","render","TooltipRenderer","preTooltipOptions","tooltipOptions","defaultTooltip","tooltipEl","setTooltipEl","anchorEl","anchorRect","translateX","translateY","box","toJSON","getBoundingClientRect","anchor","useAnchor","previousAnchor","latestStableAnchor","anchorStyle","tooltipRef","tooltipXSpring","tooltipYSpring","setFocusedDatum","onFocusDatum","onClickDatum","primaryCursor","secondaryCursor","showVoronoi","handleFocus","needsVoronoi","groupedDatums","columns","primaryValue","all","next","primaryPx","primaryStart","primaryEnd","prevPx","nextPx","datums","aAxis","bAxis","aPx","bPx","datumBoundaries","secondaryValue","stackData","secondaryStart","secondaryEnd","prevAxis","prevValue","nextAxis","nextValue","onMouseLeave","column","datumBoundary","xEnd","yEnd","className","onMouseEnter","defaultColorScheme","initialWidth","initialHeight","getSeriesOrder","defaultColors","useIntersectionObserver","intersectionObserverRootMargin","userOptions","rest","defaultChartOptions","chartElement","setContainerElement","containerEl","nearestScrollableParent","grandParent","overflow","setDims","computed","isIntersecting","setIsIntersecting","entry","root","rootMargin","primaryAxisOptions","firstValue","getFirstDefinedValue","optionsWithScaleType","axisOptionsWithScaleType","secondaryAxesOptions","axesLeftWidth","axesLeftTop","axesLeftBottom","sumAllDimensionProperties","axesRightWidth","axesRightTop","axesRightBottom","axesTopHeight","axesTopLeft","axesTopRight","axesBottomHeight","axesBottomLeft","axesBottomRight","gridX","gridY","gridWidth","gridHeight","seriesIndex","originalSeries","seriesId","seriesLabel","secondaryAxisId","originalDatums","datumIndex","originalDatum","id","axisOptions","axisSeries","seriesIndices","stacker","val","buildAxisLinear","axesInfo","xKey","yKey","status","getSeriesStatus","statusStyles","getDatumStatus","orderedSeries","reversedSeries","contextValue","seriesByAxisId","sort","memoizeSeries","getSeriesInfo","getMemoizedSeriesInfo","seriesEl","axisId","Component","firstDefinedValue","scaleType"],"mappings":"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","sourcesContent":["export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelperLoose(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n  if (it) return (it = it.call(o)).next.bind(it);\n\n  if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n    if (it) o = it;\n    var i = 0;\n    return function () {\n      if (i >= o.length) return {\n        done: true\n      };\n      return {\n        done: false,\n        value: o[i++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n","export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(value);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n","export default function(x) {\n  return x;\n}\n","import {InternMap} from \"internmap\";\nimport identity from \"./identity.js\";\n\nexport default function group(values, ...keys) {\n  return nest(values, identity, identity, keys);\n}\n\nexport function groups(values, ...keys) {\n  return nest(values, Array.from, identity, keys);\n}\n\nexport function rollup(values, reduce, ...keys) {\n  return nest(values, identity, reduce, keys);\n}\n\nexport function rollups(values, reduce, ...keys) {\n  return nest(values, Array.from, reduce, keys);\n}\n\nexport function index(values, ...keys) {\n  return nest(values, identity, unique, keys);\n}\n\nexport function indexes(values, ...keys) {\n  return nest(values, Array.from, unique, keys);\n}\n\nfunction unique(values) {\n  if (values.length !== 1) throw new Error(\"duplicate key\");\n  return values[0];\n}\n\nfunction nest(values, map, reduce, keys) {\n  return (function regroup(values, i) {\n    if (i >= keys.length) return reduce(values);\n    const groups = new InternMap();\n    const keyof = keys[i++];\n    let index = -1;\n    for (const value of values) {\n      const key = keyof(value, ++index, values);\n      const group = groups.get(key);\n      if (group) group.push(value);\n      else groups.set(key, [value]);\n    }\n    for (const [key, values] of groups) {\n      groups.set(key, regroup(values, i));\n    }\n    return map(groups);\n  })(values, 0);\n}\n","export default function(source, keys) {\n  return Array.from(keys, key => source[key]);\n}\n","import ascending from \"./ascending.js\";\nimport permute from \"./permute.js\";\n\nexport default function sort(values, ...F) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  values = Array.from(values);\n  let [f = ascending] = F;\n  if (f.length === 1 || F.length > 1) {\n    const index = Uint32Array.from(values, (d, i) => i);\n    if (F.length > 1) {\n      F = F.map(f => values.map(f));\n      index.sort((i, j) => {\n        for (const f of F) {\n          const c = ascending(f[i], f[j]);\n          if (c) return c;\n        }\n      });\n    } else {\n      f = values.map(f);\n      index.sort((i, j) => ascending(f[i], f[j]));\n    }\n    return permute(values, index);\n  }\n  return values.sort(f);\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n","export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n","import ascending from \"./ascending.js\";\n\n// Based on https://github.com/mourner/quickselect\n// ISC license, Copyright 2018 Vladimir Agafonkin.\nexport default function quickselect(array, k, left = 0, right = array.length - 1, compare = ascending) {\n  while (right > left) {\n    if (right - left > 600) {\n      const n = right - left + 1;\n      const m = k - left + 1;\n      const z = Math.log(n);\n      const s = 0.5 * Math.exp(2 * z / 3);\n      const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n      const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n      const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n      quickselect(array, k, newLeft, newRight, compare);\n    }\n\n    const t = array[k];\n    let i = left;\n    let j = right;\n\n    swap(array, left, k);\n    if (compare(array[right], t) > 0) swap(array, left, right);\n\n    while (i < j) {\n      swap(array, i, j), ++i, --j;\n      while (compare(array[i], t) < 0) ++i;\n      while (compare(array[j], t) > 0) --j;\n    }\n\n    if (compare(array[left], t) === 0) swap(array, left, j);\n    else ++j, swap(array, j, right);\n\n    if (j <= k) left = j + 1;\n    if (k <= j) right = j - 1;\n  }\n  return array;\n}\n\nfunction swap(array, i, j) {\n  const t = array[i];\n  array[i] = array[j];\n  array[j] = t;\n}\n","import max from \"./max.js\";\nimport min from \"./min.js\";\nimport quickselect from \"./quickselect.js\";\nimport number, {numbers} from \"./number.js\";\n\nexport default function quantile(values, p, valueof) {\n  values = Float64Array.from(numbers(values, valueof));\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return min(values);\n  if (p >= 1) return max(values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = max(quickselect(values, i0).subarray(0, i0 + 1)),\n      value1 = min(values.subarray(i0 + 1));\n  return value0 + (value1 - value0) * (i - i0);\n}\n\nexport function quantileSorted(values, p, valueof = number) {\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n","import quantile from \"./quantile.js\";\n\nexport default function(values, valueof) {\n  return quantile(values, 0.5, valueof);\n}\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import {path} from \"d3-path\";\nimport array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","export default function(series, order) {\n  if (!((n = series.length) > 1)) return;\n  for (var i = 1, j, s0, s1 = series[order[0]], n, m = s1.length; i < n; ++i) {\n    s0 = s1, s1 = series[order[i]];\n    for (j = 0; j < m; ++j) {\n      s1[j][1] += s1[j][0] = isNaN(s0[j][1]) ? s0[j][0] : s0[j][1];\n    }\n  }\n}\n","export default function(series) {\n  var n = series.length, o = new Array(n);\n  while (--n >= 0) o[n] = n;\n  return o;\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport offsetNone from \"./offset/none.js\";\nimport orderNone from \"./order/none.js\";\n\nfunction stackValue(d, key) {\n  return d[key];\n}\n\nfunction stackSeries(key) {\n  const series = [];\n  series.key = key;\n  return series;\n}\n\nexport default function() {\n  var keys = constant([]),\n      order = orderNone,\n      offset = offsetNone,\n      value = stackValue;\n\n  function stack(data) {\n    var sz = Array.from(keys.apply(this, arguments), stackSeries),\n        i, n = sz.length, j = -1,\n        oz;\n\n    for (const d of data) {\n      for (i = 0, ++j; i < n; ++i) {\n        (sz[i][j] = [0, +value(d, sz[i].key, j, data)]).data = d;\n      }\n    }\n\n    for (i = 0, oz = array(order(sz)); i < n; ++i) {\n      sz[oz[i]].index = i;\n    }\n\n    offset(sz, oz);\n    return sz;\n  }\n\n  stack.keys = function(_) {\n    return arguments.length ? (keys = typeof _ === \"function\" ? _ : constant(Array.from(_)), stack) : keys;\n  };\n\n  stack.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(+_), stack) : value;\n  };\n\n  stack.order = function(_) {\n    return arguments.length ? (order = _ == null ? orderNone : typeof _ === \"function\" ? _ : constant(Array.from(_)), stack) : order;\n  };\n\n  stack.offset = function(_) {\n    return arguments.length ? (offset = _ == null ? offsetNone : _, stack) : offset;\n  };\n\n  return stack;\n}\n","import React from 'react'\n\nexport default function useGetLatest<T>(obj: T) {\n  const ref = React.useRef<T>(obj)\n  const getterRef = React.useRef<() => T>()\n\n  ref.current = obj\n  if (!getterRef.current) {\n    getterRef.current = () => ref.current\n  }\n\n  return getterRef.current\n}\n","import React from 'react'\n\nexport default typeof window !== 'undefined'\n  ? React.useLayoutEffect\n  : React.useEffect\n","import {\n  Axis,\n  Datum,\n  DatumFocusStatus,\n  DatumStyles,\n  Series,\n  SeriesFocusStatus,\n  SeriesStyles,\n} from '../types'\n\nexport function getSeriesStatus<TDatum>(\n  series: Series<TDatum>,\n  focusedDatum: Datum<TDatum> | null\n): SeriesFocusStatus {\n  if (focusedDatum?.seriesId === series.id) {\n    return 'focused'\n  }\n\n  return 'none'\n}\n\nexport function getDatumStatus<TDatum>(\n  datum: Datum<TDatum>,\n  focusedDatum: Datum<TDatum> | null\n): DatumFocusStatus {\n  if (datum === focusedDatum) {\n    return 'focused'\n  }\n\n  if (\n    datum.group?.some(groupDatum => {\n      groupDatum.seriesId === focusedDatum?.seriesId &&\n        groupDatum.index === focusedDatum?.index\n    })\n  ) {\n    return 'groupFocused'\n  }\n\n  return 'none'\n}\n\nfunction normalizeColor(\n  style: SeriesStyles | DatumStyles,\n  defaults: SeriesStyles | DatumStyles\n): SeriesStyles | DatumStyles {\n  return {\n    ...style,\n    stroke: style.stroke || style.color || defaults.stroke || defaults.color,\n    fill: style.fill || style.color || defaults.fill || defaults.color,\n  }\n}\n\nconst elementTypes = ['area', 'line', 'rectangle', 'circle'] as const\n\nexport function materializeStyles(\n  style: SeriesStyles | DatumStyles = {},\n  defaults: SeriesStyles | DatumStyles = {}\n) {\n  style = normalizeColor(style, defaults)\n  for (let i = 0; i < elementTypes.length; i++) {\n    const type = elementTypes[i]\n    if (style[type] && defaults[type]) {\n      style[type] = materializeStyles(style[type], defaults)\n    }\n  }\n  return style\n}\n\nexport function isValidPoint(d: any) {\n  if (d === null) {\n    return false\n  }\n  if (typeof d === 'undefined') {\n    return false\n  }\n  if (typeof d === 'string' && d === 'null') {\n    return false\n  }\n  return true\n}\n\nexport function translateX(x: number) {\n  return `translate3d(${Math.round(x)}px, 0, 0)`\n}\n\nexport function translateY(y: number) {\n  return `translate3d(0, ${Math.round(y)}px, 0)`\n}\n\nexport function translate(x: number, y: number) {\n  return `translate3d(${Math.round(x)}px, ${Math.round(y)}px, 0)`\n}\n\nexport function getSecondaryStart<TDatum>(\n  datum: Datum<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  if (secondaryAxis.stacked) {\n    return secondaryAxis.scale(datum.stackData?.[0] ?? NaN) ?? NaN\n  }\n\n  return secondaryAxis.scale(0) ?? NaN\n}\n\nexport function getSecondary<TDatum>(\n  datum: Datum<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  if (secondaryAxis.stacked) {\n    return secondaryAxis.scale(datum.stackData?.[1] ?? NaN) ?? NaN\n  }\n\n  return secondaryAxis.scale(secondaryAxis.getValue(datum.originalDatum)) ?? NaN\n}\n\nexport function getPrimary<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>\n): number {\n  let primary: number\n\n  if (primaryAxis.stacked) {\n    primary = primaryAxis.scale(datum.stackData?.[1] ?? NaN) ?? NaN\n  } else {\n    primary =\n      primaryAxis.scale(primaryAxis.getValue(datum.originalDatum)) ?? NaN\n  }\n\n  if (primaryAxis.axisFamily === 'band') {\n    primary = primary + getPrimaryLength(datum, primaryAxis) / 2\n  }\n\n  return primary\n}\n\nexport function getPrimaryStart<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>\n): number {\n  return (\n    getPrimary(datum, primaryAxis) - getPrimaryLength(datum, primaryAxis) / 2\n  )\n}\n\nexport function getPrimaryLength<TDatum>(\n  _datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>\n) {\n  if (primaryAxis.axisFamily === 'band') {\n    return Math.min(\n      Math.max(primaryAxis.scale.bandwidth(), primaryAxis.minBandSize ?? 1),\n      primaryAxis.maxBandSize ?? 99999999\n    )\n  }\n\n  return Math.max(primaryAxis.bandScale!.bandwidth(), 1)\n}\n\nexport function getSecondaryLength<TDatum>(\n  datum: Datum<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  const secondary = [\n    getSecondaryStart(datum, secondaryAxis),\n    getSecondary(datum, secondaryAxis),\n  ]\n  return Math.abs(secondary[1] - secondary[0])\n}\n\nexport function getX<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getSecondary(datum, secondaryAxis)\n    : getPrimary(datum, primaryAxis)\n}\n\nexport function getXStart<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getSecondaryStart(datum, secondaryAxis)\n    : getPrimaryStart(datum, primaryAxis)\n}\n\nexport function getY<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getPrimary(datum, primaryAxis)\n    : getSecondary(datum, secondaryAxis)\n}\n\nexport function getYStart<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getPrimaryStart(datum, primaryAxis)\n    : getSecondaryStart(datum, secondaryAxis)\n}\n\nexport function getRectX<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getSecondaryStart(datum, secondaryAxis)\n    : getPrimaryStart(datum, primaryAxis)\n}\n\nexport function getRectY<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getPrimaryStart(datum, primaryAxis)\n    : getSecondary(datum, secondaryAxis)\n}\n\nexport function getWidth<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getSecondaryLength(datum, secondaryAxis)\n    : getPrimaryLength(datum, primaryAxis)\n}\n\nexport function getHeight<TDatum>(\n  datum: Datum<TDatum>,\n  primaryAxis: Axis<TDatum>,\n  secondaryAxis: Axis<TDatum>\n): number {\n  return primaryAxis.isVertical\n    ? getPrimaryLength(datum, primaryAxis)\n    : getSecondaryLength(datum, secondaryAxis)\n}\n\nexport function clampPxToAxis<TDatum>(px: number, axis: Axis<TDatum>) {\n  const range = axis.scale.range()\n  if (axis.isVertical) {\n    range.reverse()\n  }\n\n  return Math.max(range[0], Math.min(px, range[1]))\n}\n\nexport function getTickPx<TDatum>(scale: Axis<TDatum>['scale'], value: any) {\n  let px = scale(value) ?? NaN\n\n  // @ts-ignore\n  if (scale.bandwidth) {\n    // @ts-ignore\n    return px + scale.bandwidth() / 2\n  }\n\n  return px\n}\n","import * as React from 'react'\n\nimport { ChartContextValue } from '../types'\n\nconst chartContext = React.createContext<any>(null!)\n\nexport function ChartContextProvider<TDatum>({\n  value,\n  children,\n}: {\n  value: () => ChartContextValue<TDatum>\n  children: React.ReactNode\n}) {\n  return <chartContext.Provider value={value} children={children} />\n}\n\nexport default function useChartContext<TDatum>() {\n  return React.useContext(chartContext)() as ChartContextValue<TDatum>\n}\n","// @ts-nocheck\nimport { CurveFactory } from 'd3-shape'\n\nfunction sign(x) {\n  return x < 0 ? -1 : 1\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n    h1 = x2 - that._x1,\n    s0 = (that._y1 - that._y0) / (h0 || (h1 < 0 && -0)),\n    s1 = (y2 - that._y1) / (h1 || (h0 < 0 && -0)),\n    p = (s0 * h1 + s1 * h0) / (h0 + h1)\n  return (\n    (sign(s0) + sign(s1)) *\n      Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0\n  )\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0\n  return h ? ((3 * (that._y1 - that._y0)) / h - t) / 2 : t\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bézier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n    y0 = that._y0,\n    x1 = that._x1,\n    y1 = that._y1,\n    dx = (x1 - x0) / 3\n  that._context.bezierCurveTo(\n    x0 + dx,\n    y0 + dx * t0,\n    x1 - dx,\n    y1 - dx * t1,\n    x1,\n    y1\n  )\n}\n\nfunction MonotoneX(context) {\n  this._context = context\n}\n\nMonotoneX.prototype = {\n  areaStart: function () {\n    this._line = 0\n  },\n  areaEnd: function () {\n    this._line = NaN\n  },\n  lineStart: function () {\n    this._x0 = this._x1 = this._y0 = this._y1 = this._t0 = NaN\n    this._point = 0\n  },\n  lineEnd: function () {\n    switch (this._point) {\n      case 2:\n        this._context.lineTo(this._x1, this._y1)\n        break\n      case 3:\n        point(this, this._t0, slope2(this, this._t0))\n        break\n    }\n    if (this._line || (this._line !== 0 && this._point === 1))\n      this._context.closePath()\n    this._line = 1 - this._line\n  },\n  point: function (x, y) {\n    var t1 = NaN\n\n    ;(x = +x), (y = +y)\n    if (x === this._x1 && y === this._y1) return // Ignore coincident points.\n    switch (this._point) {\n      case 0:\n        this._point = 1\n        this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y)\n        break\n      case 1:\n        this._point = 2\n        break\n      case 2:\n        this._point = 3\n        point(this, slope2(this, (t1 = slope3(this, x, y))), t1)\n        break\n      default:\n        point(this, this._t0, (t1 = slope3(this, x, y)))\n        break\n    }\n\n    ;(this._x0 = this._x1), (this._x1 = x)\n    ;(this._y0 = this._y1), (this._y1 = y)\n    this._t0 = t1\n  },\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context)\n}\n\n;(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function (\n  x,\n  y\n) {\n  MonotoneX.prototype.point.call(this, y, x)\n}\n\nfunction ReflectContext(context) {\n  this._context = context\n}\n\nReflectContext.prototype = {\n  moveTo: function (x, y) {\n    this._context.moveTo(y, x)\n  },\n  closePath: function () {\n    this._context.closePath()\n  },\n  lineTo: function (x, y) {\n    this._context.lineTo(y, x)\n  },\n  bezierCurveTo: function (x1, y1, x2, y2, x, y) {\n    this._context.bezierCurveTo(y1, x1, y2, x2, y, x)\n  },\n}\n\nexport const monotoneX: CurveFactory = context => new MonotoneX(context)\n\nexport const monotoneY: CurveFactory = context => new MonotoneY(context)\n","import { area, line } from 'd3-shape'\nimport React from 'react'\n\nimport { Axis, Series, Datum } from '../types'\nimport {\n  clampPxToAxis,\n  getPrimary,\n  getSecondary,\n  getSecondaryStart,\n  getX,\n  getY,\n  translate,\n} from '../utils/Utils'\nimport useChartContext from '../utils/chartContext'\n//\nimport { monotoneX } from '../utils/curveMonotone'\n\nexport default function AreaComponent<TDatum>({\n  primaryAxis,\n  secondaryAxis,\n  series: allSeries,\n}: {\n  primaryAxis: Axis<TDatum>\n  secondaryAxis: Axis<TDatum>\n  series: Series<TDatum>[]\n}) {\n  const {\n    getSeriesStatusStyle,\n    getDatumStatusStyle,\n    focusedDatumState,\n    gridDimensions,\n  } = useChartContext<TDatum>()\n\n  const curve = secondaryAxis.curve ?? monotoneX\n\n  const [focusedDatum] = focusedDatumState\n\n  return (\n    <g\n      style={{\n        transform: translate(gridDimensions.gridX, gridDimensions.gridY),\n      }}\n    >\n      {allSeries.map((series, i) => {\n        const style = getSeriesStatusStyle(series, focusedDatum)\n\n        const lineStyle = {\n          strokeWidth: 2,\n          ...style,\n          ...style.line,\n          fill: 'none',\n        }\n\n        const areaStyle = {\n          strokeWidth: 2,\n          opacity: 0.5,\n          ...style,\n          ...style.area,\n        }\n\n        const areaPath =\n          area<Datum<TDatum>>(\n            datum => getPrimary(datum, primaryAxis) ?? NaN,\n            datum =>\n              clampPxToAxis(\n                getSecondaryStart(datum, secondaryAxis) ?? NaN,\n                secondaryAxis\n              ),\n            datum =>\n              clampPxToAxis(\n                getSecondary(datum, secondaryAxis) ?? NaN,\n                secondaryAxis\n              )\n          ).curve(curve)(series.datums) ?? undefined\n\n        const linePath =\n          line<Datum<TDatum>>(\n            datum => getPrimary(datum, primaryAxis) ?? NaN,\n            datum => getSecondary(datum, secondaryAxis) ?? NaN\n          ).curve(curve)(series.datums) ?? undefined\n\n        return (\n          <g key={`lines-${i}`}>\n            <path d={areaPath} style={areaStyle} />\n            <path d={linePath} style={lineStyle} />\n            {series.datums.map((datum, i) => {\n              const dataStyle = getDatumStatusStyle(datum, focusedDatum)\n\n              return (\n                <circle\n                  key={i}\n                  ref={el => {\n                    datum.element = el\n                  }}\n                  r={2}\n                  cx={getX(datum, primaryAxis, secondaryAxis)}\n                  cy={getY(datum, primaryAxis, secondaryAxis) ?? NaN}\n                  stroke=\"rgba(33,33,33,0.5)\"\n                  style={{\n                    // @ts-ignore\n                    r: 2,\n                    ...style,\n                    ...style.circle,\n                    ...dataStyle,\n                    ...dataStyle.circle,\n                    ...(!(secondaryAxis.showDatumElements ?? false)\n                      ? {\n                          opacity: 0,\n                        }\n                      : {}),\n                  }}\n                />\n              )\n            })}\n          </g>\n        )\n      })}\n    </g>\n  )\n}\n","import React from 'react'\n\nimport { Axis, Series } from '../types'\nimport {\n  getHeight,\n  getWidth,\n  getRectX,\n  getRectY,\n  translate,\n} from '../utils/Utils'\nimport useChartContext from '../utils/chartContext'\n\n//\n\nexport default function BarComponent<TDatum>({\n  primaryAxis,\n  secondaryAxis,\n  series: allSeries,\n}: {\n  primaryAxis: Axis<TDatum>\n  secondaryAxis: Axis<TDatum>\n  series: Series<TDatum>[]\n}) {\n  const {\n    getSeriesStatusStyle,\n    getDatumStatusStyle,\n    focusedDatumState,\n    gridDimensions,\n  } = useChartContext<TDatum>()\n\n  const [focusedDatum] = focusedDatumState\n\n  return (\n    <g\n      style={{\n        transform: translate(gridDimensions.gridX, gridDimensions.gridY),\n      }}\n    >\n      {allSeries.map((series, i) => {\n        const style = getSeriesStatusStyle(series, focusedDatum)\n\n        return (\n          <g key={`lines-${i}`}>\n            {series.datums.map((datum, i) => {\n              const dataStyle = getDatumStatusStyle(datum, focusedDatum)\n\n              const x = getRectX(datum, primaryAxis, secondaryAxis) ?? NaN\n              const y = getRectY(datum, primaryAxis, secondaryAxis) ?? NaN\n              const width = getWidth(datum, primaryAxis, secondaryAxis) ?? NaN\n              const height = getHeight(datum, primaryAxis, secondaryAxis) ?? NaN\n\n              return (\n                <rect\n                  {...{\n                    ref: el => {\n                      datum.element = el\n                    },\n                    key: i,\n                    x,\n                    y,\n                    width,\n                    height,\n                    style: {\n                      strokeWidth: 0,\n                      ...style,\n                      ...style.rectangle,\n                      ...dataStyle,\n                      ...dataStyle.rectangle,\n                    },\n                  }}\n                />\n              )\n            })}\n          </g>\n        )\n      })}\n    </g>\n  )\n}\n","import { line } from 'd3-shape'\nimport React from 'react'\n\nimport { Axis, Series, Datum } from '../types'\nimport { getX, getY, translate } from '../utils/Utils'\nimport useChartContext from '../utils/chartContext'\n//\nimport { monotoneX } from '../utils/curveMonotone'\n\nconst pathDefaultStyle = {\n  strokeWidth: 2,\n}\n\nexport default function Line<TDatum>({\n  primaryAxis,\n  secondaryAxis,\n  series: allSeries,\n}: {\n  primaryAxis: Axis<TDatum>\n  secondaryAxis: Axis<TDatum>\n  series: Series<TDatum>[]\n}) {\n  const {\n    getSeriesStatusStyle,\n    getDatumStatusStyle,\n    focusedDatumState,\n    gridDimensions,\n  } = useChartContext<TDatum>()\n\n  const curve = secondaryAxis.curve ?? monotoneX\n\n  const [focusedDatum] = focusedDatumState\n\n  return (\n    <g\n      style={{\n        transform: translate(gridDimensions.gridX, gridDimensions.gridY),\n      }}\n    >\n      {allSeries.map((series, i) => {\n        const style = getSeriesStatusStyle(series, focusedDatum)\n\n        const lineStyle = {\n          ...pathDefaultStyle,\n          ...style,\n          ...style.line,\n          fill: 'none',\n        }\n\n        const linePath =\n          line<Datum<TDatum>>(\n            datum => getX(datum, primaryAxis, secondaryAxis) ?? NaN,\n            datum => getY(datum, primaryAxis, secondaryAxis) ?? NaN\n          ).curve(curve)(series.datums) ?? undefined\n\n        return (\n          <g key={`lines-${i}`}>\n            {series.datums.map((datum, i) => {\n              const dataStyle = getDatumStatusStyle(datum, focusedDatum)\n\n              return (\n                <circle\n                  key={i}\n                  ref={el => {\n                    datum.element = el\n                  }}\n                  r={2}\n                  cx={getX(datum, primaryAxis, secondaryAxis)}\n                  cy={getY(datum, primaryAxis, secondaryAxis)}\n                  stroke=\"rgba(33,33,33,0.5)\"\n                  fill=\"transparent\"\n                  style={{\n                    // @ts-ignore\n                    r: 2,\n                    ...style,\n                    ...style.circle,\n                    ...dataStyle,\n                    ...dataStyle.circle,\n                    ...(!(secondaryAxis.showDatumElements ?? true)\n                      ? {\n                          opacity: 0,\n                        }\n                      : {}),\n                  }}\n                />\n              )\n            })}\n            <path d={linePath} style={lineStyle} />\n          </g>\n        )\n      })}\n    </g>\n  )\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new Map(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new Map();\n    for (const value of _) {\n      const key = value + \"\";\n      if (index.has(key)) continue;\n      index.set(key, domain.push(value));\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return x == null || isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {ticks} from \"d3-array\";\nimport {format} from \"d3-format\";\nimport nice from \"./nice.js\";\nimport {copy, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : function(x) { return Math.pow(base, x); };\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), function(x) { return Math.log(x) / base; });\n}\n\nfunction reflect(f) {\n  return function(x) {\n    return -f(-x);\n  };\n}\n\nexport function loggish(transform) {\n  var scale = transform(transformLog, transformExp),\n      domain = scale.domain,\n      base = 10,\n      logs,\n      pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = function(count) {\n    var d = domain(),\n        u = d[0],\n        v = d[d.length - 1],\n        r;\n\n    if (r = v < u) i = u, u = v, v = i;\n\n    var i = logs(u),\n        j = logs(v),\n        p,\n        k,\n        t,\n        n = count == null ? 10 : +count,\n        z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.floor(i), j = Math.ceil(j);\n      if (u > 0) for (; i <= j; ++i) {\n        for (k = 1, p = pows(i); k < base; ++k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i <= j; ++i) {\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n      if (z.length * 2 < n) z = ticks(u, v, n);\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n    if (typeof specifier !== \"function\") specifier = format(specifier);\n    if (count === Infinity) return specifier;\n    if (count == null) count = 10;\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return function(d) {\n      var i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = function() {\n    return domain(nice(domain(), {\n      floor: function(x) { return pows(Math.floor(logs(x))); },\n      ceil: function(x) { return pows(Math.ceil(logs(x))); }\n    }));\n  };\n\n  return scale;\n}\n\nexport default function log() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, log()).base(scale.base());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval.js\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","import interval from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\nimport {durationMinute} from \"./duration.js\";\n\nvar utcMinute = interval(function(date) {\n  date.setUTCSeconds(0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getUTCMinutes();\n});\n\nexport default utcMinute;\nexport var utcMinutes = utcMinute.range;\n","import interval from \"./interval.js\";\nimport {durationHour} from \"./duration.js\";\n\nvar utcHour = interval(function(date) {\n  date.setUTCMinutes(0, 0, 0);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getUTCHours();\n});\n\nexport default utcHour;\nexport var utcHours = utcHour.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\n\nvar utcMonth = interval(function(date) {\n  date.setUTCDate(1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCMonth(date.getUTCMonth() + step);\n}, function(start, end) {\n  return end.getUTCMonth() - start.getUTCMonth() + (end.getUTCFullYear() - start.getUTCFullYear()) * 12;\n}, function(date) {\n  return date.getUTCMonth();\n});\n\nexport default utcMonth;\nexport var utcMonths = utcMonth.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {bisector, tickStep} from \"d3-array\";\nimport {durationDay, durationHour, durationMinute, durationMonth, durationSecond, durationWeek, durationYear} from \"./duration.js\";\nimport millisecond from \"./millisecond.js\";\nimport second from \"./second.js\";\nimport minute from \"./minute.js\";\nimport hour from \"./hour.js\";\nimport day from \"./day.js\";\nimport {sunday as week} from \"./week.js\";\nimport month from \"./month.js\";\nimport year from \"./year.js\";\nimport utcMinute from \"./utcMinute.js\";\nimport utcHour from \"./utcHour.js\";\nimport utcDay from \"./utcDay.js\";\nimport {utcSunday as utcWeek} from \"./utcWeek.js\";\nimport utcMonth from \"./utcMonth.js\";\nimport utcYear from \"./utcYear.js\";\n\nfunction ticker(year, month, week, day, hour, minute) {\n\n  const tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function ticks(start, stop, count) {\n    const reverse = stop < start;\n    if (reverse) [start, stop] = [stop, start];\n    const interval = count && typeof count.range === \"function\" ? count : tickInterval(start, stop, count);\n    const ticks = interval ? interval.range(start, +stop + 1) : []; // inclusive stop\n    return reverse ? ticks.reverse() : ticks;\n  }\n\n  function tickInterval(start, stop, count) {\n    const target = Math.abs(stop - start) / count;\n    const i = bisector(([,, step]) => step).right(tickIntervals, target);\n    if (i === tickIntervals.length) return year.every(tickStep(start / durationYear, stop / durationYear, count));\n    if (i === 0) return millisecond.every(Math.max(tickStep(start, stop, count), 1));\n    const [t, step] = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n    return t.every(step);\n  }\n\n  return [ticks, tickInterval];\n}\n\nconst [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute);\nconst [timeTicks, timeTickInterval] = ticker(year, month, week, day, hour, minute);\n\nexport {utcTicks, utcTickInterval, timeTicks, timeTickInterval};\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeTicks, timeTickInterval} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], interval == null ? 10 : interval);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    if (!interval || typeof interval.range !== \"function\") interval = tickInterval(d[0], d[d.length - 1], interval == null ? 10 : interval);\n    return interval ? domain(nice(d, interval)) : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(ticks, tickInterval, year, month, week, day, hour, minute, second, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","import {utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcTicks, utcTickInterval} from \"d3-time\";\nimport {utcFormat} from \"d3-time-format\";\nimport {calendar} from \"./time.js\";\nimport {initRange} from \"./init.js\";\n\nexport default function utcTime() {\n  return initRange.apply(calendar(utcTicks, utcTickInterval, utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]), arguments);\n}\n","import { extent, max, median, min, range as d3Range } from 'd3-array'\nimport {\n  scaleLinear,\n  scaleLog,\n  scaleTime,\n  scaleUtc,\n  scaleBand,\n  ScaleTime,\n  ScaleLinear,\n} from 'd3-scale'\n\nimport {\n  Axis,\n  AxisBand,\n  AxisBandOptions,\n  AxisLinear,\n  AxisLinearOptions,\n  AxisOptions,\n  AxisTime,\n  AxisTimeOptions,\n  BuildAxisOptions,\n  GridDimensions,\n  ResolvedAxisOptions,\n  Series,\n} from '../types'\n\nfunction defaultAxisOptions<TDatum>(\n  options: BuildAxisOptions<TDatum>\n): ResolvedAxisOptions<AxisOptions<TDatum>> {\n  return {\n    ...options,\n    elementType: options.elementType ?? 'line',\n    minTickPaddingForRotation: options.minTickPaddingForRotation ?? 10,\n    tickLabelRotationDeg: options.tickLabelRotationDeg ?? 60,\n    innerBandPadding: options.innerBandPadding ?? 0.6,\n    outerBandPadding: options.outerBandPadding ?? 0.2,\n    show: options.show ?? true,\n    stacked: options.stacked ?? false,\n  }\n}\n\nexport default function buildAxisLinear<TDatum>(\n  isPrimary: boolean,\n  userOptions: BuildAxisOptions<TDatum>,\n  series: Series<TDatum>[],\n  gridDimensions: GridDimensions,\n  width: number,\n  height: number\n): Axis<TDatum> {\n  const options = defaultAxisOptions(userOptions)\n\n  if (!options.position) {\n    throw new Error(`Chart axes must have a valid 'position' property`)\n  }\n\n  const isVertical = ['left', 'right'].indexOf(options.position) > -1\n\n  // Now we need to figure out the range\n  const range: [number, number] = isVertical\n    ? [gridDimensions.gridHeight, 0]\n    : [0, gridDimensions.gridWidth]\n\n  const outerRange: [number, number] = isVertical ? [height, 0] : [0, width]\n\n  // Give the scale a home\n  return options.scaleType === 'time' || options.scaleType === 'localTime'\n    ? buildTimeAxis(isPrimary, options, series, isVertical, range, outerRange)\n    : options.scaleType === 'linear' || options.scaleType === 'log'\n    ? buildLinearAxis(isPrimary, options, series, isVertical, range, outerRange)\n    : options.scaleType === 'band'\n    ? buildBandAxis(options, series, isVertical, range, outerRange)\n    : (() => {\n        throw new Error('Invalid scale type')\n      })()\n}\n\nfunction buildTimeAxis<TDatum>(\n  isPrimary: boolean,\n  options: ResolvedAxisOptions<AxisTimeOptions<TDatum>>,\n  series: Series<TDatum>[],\n  isVertical: boolean,\n  range: [number, number],\n  outerRange: [number, number]\n): AxisTime<TDatum> {\n  const scaleFn = options.scaleType === 'localTime' ? scaleTime : scaleUtc\n\n  // Now set the range\n  const scale = scaleFn(range)\n\n  const allDatums = series.map(d => d.datums).flat()\n\n  let [minValue, maxValue] = extent(allDatums, datum =>\n    options.getValue(datum.originalDatum)\n  )\n\n  let shouldNice = true\n\n  if (typeof options.min === 'number') {\n    minValue = min([options.min, minValue as Date])\n    shouldNice = false\n  }\n\n  if (typeof options.max === 'number') {\n    maxValue = max([options.max, maxValue as Date])\n    shouldNice = false\n  }\n\n  if (typeof options.hardMin === 'number') {\n    minValue = options.hardMin\n    shouldNice = false\n  }\n\n  if (typeof options.hardMax === 'number') {\n    maxValue = options.hardMax\n    shouldNice = false\n  }\n\n  if (minValue === undefined || maxValue === undefined) {\n    console.info({\n      options,\n      series,\n      range,\n      values: allDatums.map(d => options.getValue(d.originalDatum)),\n    })\n    throw new Error('Invalid scale min/max')\n  }\n\n  // Set the domain\n  scale.domain([minValue as Date, maxValue as Date])\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse())\n  }\n\n  if (shouldNice) {\n    scale.nice()\n  }\n\n  const outerScale = scale.copy().range(outerRange)\n\n  // Supplmentary band scale\n  const bandScale = isPrimary\n    ? buildImpliedBandScale(options, scale, series, range)\n    : undefined\n\n  const defaultFormat = scale.tickFormat()\n\n  const formatters = {} as AxisTime<TDatum>['formatters']\n\n  const scaleFormat = (value: Date) =>\n    options.formatters?.scale?.(value, { ...formatters, scale: undefined }) ??\n    defaultFormat(value)\n\n  const tooltipFormat = (value: Date) =>\n    options.formatters?.tooltip?.(value, {\n      ...formatters,\n      tooltip: undefined,\n    }) ?? scaleFormat(value)\n\n  const cursorFormat = (value: Date) =>\n    options.formatters?.cursor?.(value, { ...formatters, cursor: undefined }) ??\n    tooltipFormat(value)\n\n  Object.assign(formatters, {\n    default: defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat,\n  })\n\n  return {\n    ...options,\n    axisFamily: 'time',\n    isVertical,\n    scale,\n    range,\n    outerScale,\n    bandScale,\n    formatters: formatters,\n  }\n}\n\nfunction buildLinearAxis<TDatum>(\n  isPrimary: boolean,\n  options: ResolvedAxisOptions<AxisLinearOptions<TDatum>>,\n  series: Series<TDatum>[],\n  isVertical: boolean,\n  range: [number, number],\n  outerRange: [number, number]\n): AxisLinear<TDatum> {\n  const scale = options.scaleType === 'log' ? scaleLog() : scaleLinear()\n\n  const allDatums = series.map(d => d.datums).flat(2)\n\n  let [minValue, maxValue] = options.stacked\n    ? extent(\n        series\n          .map(s => s.datums.map(datum => datum.stackData ?? []))\n          .flat(2) as unknown as number[]\n      )\n    : extent(allDatums, datum => options.getValue(datum.originalDatum))\n\n  let shouldNice = true\n\n  if (typeof options.min === 'number') {\n    minValue = min([options.min, minValue as number])\n    shouldNice = false\n  }\n\n  if (typeof options.max === 'number') {\n    maxValue = max([options.max, maxValue as number])\n    shouldNice = false\n  }\n\n  if (\n    typeof options.minDomainLength === 'number' &&\n    !(minValue === undefined || maxValue === undefined)\n  ) {\n    const mid = median([minValue, maxValue])!\n    const top = mid + options.minDomainLength / 2\n    const bottom = mid - options.minDomainLength / 2\n    maxValue = Math.max(top, maxValue)\n    minValue = Math.min(bottom, minValue)\n  }\n\n  if (typeof options.hardMin === 'number') {\n    minValue = options.hardMin\n    shouldNice = false\n  }\n\n  if (typeof options.hardMax === 'number') {\n    maxValue = options.hardMax\n    shouldNice = false\n  }\n\n  if (minValue === undefined || maxValue === undefined) {\n    console.info({\n      options,\n      series,\n      range,\n      values: allDatums.map(d => options.getValue(d.originalDatum)),\n    })\n    throw new Error('Invalid scale min/max')\n  }\n\n  // Set the domain\n  scale.domain([minValue, maxValue])\n\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse())\n  }\n\n  scale.range(range)\n\n  if (shouldNice) {\n    scale.nice()\n  }\n\n  const outerScale = scale.copy().range(outerRange)\n\n  const bandScale = isPrimary\n    ? buildImpliedBandScale(options, scale, series, range)\n    : undefined\n\n  const defaultFormat = scale.tickFormat()\n\n  const formatters = {} as AxisLinear<TDatum>['formatters']\n\n  const scaleFormat = (value: number) =>\n    options.formatters?.scale?.(value, { ...formatters, scale: undefined }) ??\n    defaultFormat(value)\n\n  const tooltipFormat = (value: number) =>\n    options.formatters?.tooltip?.(value, {\n      ...formatters,\n      tooltip: undefined,\n    }) ?? scaleFormat(value)\n\n  const cursorFormat = (value: number) =>\n    options.formatters?.cursor?.(value, { ...formatters, cursor: undefined }) ??\n    tooltipFormat(value)\n\n  Object.assign(formatters, {\n    default: defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat,\n  })\n\n  return {\n    ...options,\n    axisFamily: 'linear',\n    isVertical,\n    scale,\n    range,\n    outerScale,\n    bandScale,\n    formatters,\n  }\n}\n\nfunction buildBandAxis<TDatum>(\n  options: ResolvedAxisOptions<AxisBandOptions<TDatum>>,\n  series: Series<TDatum>[],\n  isVertical: boolean,\n  range: [number, number],\n  outerRange: [number, number]\n): AxisBand<TDatum> {\n  const domain = Array.from(\n    new Set(\n      series\n        .map(d => d.datums)\n        .flat()\n        .map(datum => options.getValue(datum.originalDatum))\n    )\n  )\n\n  const scale = scaleBand(domain, range)\n    .round(false)\n    .paddingOuter(options.outerBandPadding ?? 0)\n    .paddingInner(options.innerBandPadding ?? 0)\n\n  // Invert if necessary\n  if (options.invert) {\n    scale.domain(Array.from(scale.domain()).reverse())\n  }\n\n  const outerScale = scale.copy().range(outerRange)\n\n  const defaultFormat = (d: { toString: () => string }) => d\n\n  const formatters = {} as AxisBand<TDatum>['formatters']\n\n  const scaleFormat = (value: number) =>\n    options.formatters?.scale?.(value, { ...formatters, scale: undefined }) ??\n    defaultFormat(value)\n\n  const tooltipFormat = (value: number) =>\n    options.formatters?.tooltip?.(value, {\n      ...formatters,\n      tooltip: undefined,\n    }) ?? scaleFormat(value)\n\n  const cursorFormat = (value: number) =>\n    options.formatters?.cursor?.(value, { ...formatters, cursor: undefined }) ??\n    tooltipFormat(value)\n\n  Object.assign(formatters, {\n    default: defaultFormat,\n    scale: scaleFormat,\n    tooltip: tooltipFormat,\n    cursor: cursorFormat,\n  })\n\n  return {\n    ...options,\n    axisFamily: 'band',\n    isVertical,\n    scale,\n    range,\n    outerScale,\n    formatters,\n  }\n}\n\n//\n\nfunction buildImpliedBandScale<TDatum>(\n  options: ResolvedAxisOptions<AxisOptions<TDatum>>,\n  scale: ScaleTime<number, number, never> | ScaleLinear<number, number, never>,\n  series: Series<TDatum>[],\n  range: [number, number]\n) {\n  // Find the two closest points along axis\n\n  let impliedBandWidth: number = Math.max(...range)\n\n  series.forEach(serie => {\n    serie.datums.forEach(d1 => {\n      const one = scale(options.getValue(d1.originalDatum) ?? NaN)\n\n      serie.datums.forEach(d2 => {\n        const two = scale(options.getValue(d2.originalDatum) ?? NaN)\n\n        if (one === two) {\n          return\n        }\n\n        const r = [one, two].sort()\n\n        const diff = Math.abs(r[1] - r[0])\n\n        if (diff < impliedBandWidth) {\n          impliedBandWidth = diff\n        }\n      })\n    })\n  })\n\n  const bandRange = Math.max(...range)\n\n  const bandDomain = d3Range(bandRange / impliedBandWidth)\n\n  const bandScale = scaleBand(bandDomain, range)\n    .round(false)\n    .paddingOuter(options.outerBandPadding ?? 0)\n    .paddingInner(options.innerBandPadding ?? 0)\n\n  return bandScale\n}\n","import React, { MutableRefObject } from 'react'\n\nimport useIsomorphicLayoutEffect from '../hooks/useIsomorphicLayoutEffect'\nimport { Axis, GridDimensions, Position } from '../types'\nimport useChartContext from '../utils/chartContext'\n\nconst getElBox = (el: Element) => {\n  var rect = el.getBoundingClientRect()\n  return {\n    top: Math.round(rect.top),\n    right: Math.round(rect.right),\n    bottom: Math.round(rect.bottom),\n    left: Math.round(rect.left),\n    width: Math.round(rect.width),\n    height: Math.round(rect.height),\n    x: Math.round(rect.x),\n    y: Math.round(rect.y),\n  }\n}\n\nexport default function useMeasure<TDatum>({\n  axis,\n  elRef,\n  gridDimensions,\n  setShowRotated,\n}: {\n  axis: Axis<TDatum>\n  elRef: MutableRefObject<SVGGElement | null>\n  gridDimensions: GridDimensions\n  showRotated: boolean\n  setShowRotated: (value: boolean) => void\n}) {\n  const { axisDimensionsState } = useChartContext<TDatum>()\n\n  const [axisDimensions, setAxisDimensions] = axisDimensionsState\n\n  const axisDimension = React.useMemo(() => {\n    return axisDimensions[axis.position as Position]?.[axis.id!]\n  }, [axisDimensions, axis.position, axis.id])\n\n  // const isLooping = useIsLooping()\n\n  const measureRotation = React.useCallback(() => {\n    if (!elRef.current) {\n      return\n    }\n\n    let gridSize = !axis.isVertical\n      ? gridDimensions.gridWidth\n      : gridDimensions.gridHeight\n\n    const staticLabelDims = Array.from(\n      elRef.current.querySelectorAll('.Axis-Group.outer .tickLabel')\n    ).map(el => getElBox(el))\n\n    // Determine the largest labels on the axis\n    let widestLabel: typeof staticLabelDims[number] | undefined\n\n    staticLabelDims.forEach(label => {\n      let resolvedLabel = widestLabel ?? { width: 0 }\n      if (label.width > 0 && label.width > resolvedLabel.width) {\n        widestLabel = label\n      }\n    })\n\n    let smallestTickGap = gridSize\n\n    if (staticLabelDims.length > 1) {\n      staticLabelDims.forEach((current, i) => {\n        const prev = staticLabelDims[i - 1]\n\n        if (prev) {\n          smallestTickGap = Math.min(\n            smallestTickGap,\n            axis.isVertical ? current.top - prev.top : current.left - prev.left\n          )\n        }\n      })\n    }\n\n    const shouldRotate =\n      (widestLabel?.width || 0) + axis.minTickPaddingForRotation >\n      smallestTickGap\n\n    // if (!isLooping) {\n    // Rotate ticks for non-time horizontal axes\n    if (!axis.isVertical) {\n      setShowRotated(shouldRotate)\n    }\n    // }\n  }, [\n    elRef,\n    axis.isVertical,\n    axis.minTickPaddingForRotation,\n    gridDimensions.gridWidth,\n    gridDimensions.gridHeight,\n    setShowRotated,\n  ])\n\n  const measureDimensions = React.useCallback(() => {\n    if (!elRef.current) {\n      if (axisDimension) {\n        // If the entire axis is hidden, then we need to remove the axis dimensions\n        setAxisDimensions(old => {\n          const newAxes = { ...(old[axis.position] ?? {}) }\n\n          delete newAxes[axis.id!]\n\n          return {\n            ...old,\n            [axis.position]: newAxes,\n          }\n        })\n      }\n      return\n    }\n\n    const newDimensions = {\n      width: 0,\n      height: 0,\n      top: 0,\n      bottom: 0,\n      left: 0,\n      right: 0,\n    }\n\n    const domainEl = elRef.current.querySelector(`.Axis-Group.inner .domain`)\n\n    if (!domainEl) {\n      return\n    }\n\n    const domainDims = getElBox(domainEl)\n\n    const measureDims = Array.from(\n      elRef.current.querySelectorAll('.Axis-Group.inner .tickLabel')\n    ).map(el => getElBox(el))\n\n    // Determine the largest labels on the axis\n    let widestRealLabel = measureDims[0]\n    let tallestRealLabel = measureDims[0]\n\n    measureDims.forEach(d => {\n      if (d.width > 0 && d.width > widestRealLabel.width) {\n        widestRealLabel = d\n      }\n\n      if (d.height > 0 && d.height > tallestRealLabel.height) {\n        tallestRealLabel = d\n      }\n    })\n\n    // Axis overflow measurements\n    if (!axis.isVertical) {\n      if (measureDims.length) {\n        const leftMostLabelDim = measureDims.reduce((d, labelDim) =>\n          labelDim.left < d.left ? labelDim : d\n        )\n        const rightMostLabelDim = measureDims.reduce((d, labelDim) =>\n          labelDim.right > d.right ? labelDim : d\n        )\n\n        newDimensions.left = Math.round(\n          Math.max(0, domainDims.left - leftMostLabelDim?.left)\n        )\n\n        newDimensions.right = Math.round(\n          Math.max(0, rightMostLabelDim?.right - domainDims.right)\n        )\n      }\n\n      newDimensions.height = Math.round(\n        // Math.max(axis.tickSizeInner, axis.tickSizeOuter) +\n        8 + axis.minTickPaddingForRotation + (tallestRealLabel?.height ?? 0)\n      )\n    } else {\n      if (measureDims.length) {\n        const topMostLabelDim = measureDims.reduce((d, labelDim) =>\n          labelDim.top < d.top ? labelDim : d\n        )\n\n        const bottomMostLabelDim = measureDims.reduce((d, labelDim) =>\n          labelDim.bottom > d.bottom ? labelDim : d\n        )\n\n        newDimensions.top = Math.round(\n          Math.max(0, domainDims.top - topMostLabelDim?.top)\n        )\n\n        newDimensions.bottom = Math.round(\n          Math.max(0, bottomMostLabelDim?.bottom - domainDims.bottom)\n        )\n      }\n\n      newDimensions.width = Math.round(\n        // Math.max(axis.tickSizeInner, axis.tickSizeOuter) +\n        8 + axis.minTickPaddingForRotation + (widestRealLabel?.width ?? 0)\n      )\n    }\n\n    // Only update the axisDimensions if something has changed\n    if (\n      // !isLooping &&\n      !axisDimensions ||\n      !axisDimension ||\n      Object.keys(newDimensions).some(key => {\n        // @ts-ignore\n        return newDimensions[key] !== axisDimension[key]\n      })\n    ) {\n      setAxisDimensions(old => ({\n        ...old,\n        [axis.position]: {\n          ...(old[axis.position] ?? {}),\n          [axis.id!]: newDimensions,\n        },\n      }))\n    }\n  }, [\n    axis.id,\n    axis.isVertical,\n    axis.position,\n    axis.minTickPaddingForRotation,\n    axisDimension,\n    axisDimensions,\n    elRef,\n    setAxisDimensions,\n  ])\n\n  // Measure after if needed\n  useIsomorphicLayoutEffect(() => {\n    measureRotation()\n  }, [measureRotation])\n\n  useIsomorphicLayoutEffect(() => {\n    measureDimensions()\n  }, [measureRotation])\n}\n","import { ScaleLinear, ScaleTime } from 'd3-scale'\nimport React from 'react'\n\nimport { Axis, AxisTime } from '../types'\nimport { getTickPx, translate } from '../utils/Utils'\nimport useChartContext from '../utils/chartContext'\n//\nimport useMeasure from './AxisLinear.useMeasure'\n\nexport default function AxisLinearComp<TDatum>(axis: Axis<TDatum>) {\n  const [showRotated, setShowRotated] = React.useState(false)\n  const {\n    getOptions,\n    gridDimensions,\n    width,\n    height,\n  } = useChartContext<TDatum>()\n\n  const { dark, showDebugAxes } = getOptions()\n\n  const elRef = React.useRef<SVGGElement>(null)\n\n  useMeasure({\n    axis,\n    elRef,\n    gridDimensions,\n    showRotated,\n    setShowRotated,\n  })\n\n  const renderAxis = (isOuter: boolean) => {\n    const isRotated = !isOuter && showRotated\n\n    const scale = isOuter ? axis.outerScale : axis.scale\n    const [rangeStart, rangeEnd] = scale.range()\n\n    const getTicks = (\n      scale: ScaleTime<any, any> | ScaleLinear<any, any>,\n      num: number\n    ) => {\n      if (scale.ticks) {\n        return scale.ticks(num)\n      }\n\n      return scale.domain()\n    }\n\n    const resolvedHeight = isOuter ? height : gridDimensions.gridHeight\n    const resolvedWidth = isOuter ? width : gridDimensions.gridWidth\n\n    const [lineFrom, lineTo] =\n      axis.position === 'left'\n        ? [\n            { x: 0, y: rangeStart },\n            { x: 0, y: rangeEnd },\n          ]\n        : axis.position === 'right'\n        ? [\n            { x: resolvedWidth, y: rangeStart },\n            { x: resolvedWidth, y: rangeEnd },\n          ]\n        : axis.position === 'top'\n        ? [\n            { x: rangeStart, y: 0 },\n            { x: rangeEnd, y: 0 },\n          ]\n        : [\n            { x: rangeStart, y: resolvedHeight },\n            { x: rangeEnd, y: resolvedHeight },\n          ]\n\n    return (\n      <g\n        key={`Axis-Group ${isOuter ? 'outer' : 'inner'}`}\n        className={`Axis-Group ${isOuter ? 'outer' : 'inner'}`}\n        style={{\n          transform: isOuter\n            ? undefined\n            : translate(gridDimensions.gridX, gridDimensions.gridY),\n        }}\n      >\n        <g\n          className={`Axis`}\n          style={{\n            ...(isOuter\n              ? {\n                  opacity: showDebugAxes ? 0.5 : 0,\n                  pointerEvents: 'none',\n                }\n              : {\n                  opacity: 1,\n                  pointerEvents: 'all',\n                }),\n          }}\n        >\n          <line\n            className=\"domain\"\n            x1={lineFrom.x}\n            y1={lineFrom.y}\n            x2={lineTo.x}\n            y2={lineTo.y}\n            stroke={dark ? 'rgba(255,255,255, .2)' : 'rgba(0,0,0, .2)'}\n          />\n          {getTicks(scale as ScaleTime<any, any>, 10).map((tick, i) => {\n            const px = getTickPx(scale, tick)\n\n            const [tickFrom, tickTo, gridTo] =\n              axis.position === 'left'\n                ? [\n                    { x: 0, y: px },\n                    { x: -8, y: px },\n                    { x: resolvedWidth, y: px },\n                  ]\n                : axis.position === 'right'\n                ? [\n                    { x: resolvedWidth, y: px },\n                    { x: resolvedWidth + 8, y: px },\n                    { x: 0, y: px },\n                  ]\n                : axis.position === 'top'\n                ? [\n                    { x: px, y: 0 },\n                    { x: px, y: -8 },\n                    { x: px, y: resolvedHeight },\n                  ]\n                : [\n                    { x: px, y: resolvedHeight },\n                    { x: px, y: resolvedHeight + 8 },\n                    { x: px, y: 0 },\n                  ]\n\n            let { x: tickLabelX, y: tickLabelY } = tickTo\n\n            if (axis.position === 'top') {\n              tickLabelY -= 5\n            } else if (axis.position === 'bottom') {\n              tickLabelY += 5\n            } else if (axis.position === 'left') {\n              tickLabelX -= 5\n            } else if (axis.position === 'right') {\n              tickLabelX += 5\n            }\n\n            return (\n              <g key={`vx-tick-${tick}-${i}`} className={'tick'}>\n                {(axis.showGrid ?? true) && !isOuter ? (\n                  <line\n                    x1={tickFrom.x}\n                    y1={tickFrom.y}\n                    x2={gridTo.x}\n                    y2={gridTo.y}\n                    stroke={\n                      dark ? 'rgba(255,255,255, .05)' : 'rgba(0,0,0, .05)'\n                    }\n                  />\n                ) : null}\n                {!isOuter ? (\n                  <line\n                    x1={tickFrom.x}\n                    y1={tickFrom.y}\n                    x2={tickTo.x}\n                    y2={tickTo.y}\n                    stroke={dark ? 'rgba(255,255,255, .2)' : 'rgba(0,0,0, .2)'}\n                  />\n                ) : null}\n                <text\n                  className=\"tickLabel\"\n                  style={{\n                    fontSize: 10,\n                    fill: dark ? 'rgba(255,255,255, .7)' : 'rgba(0,0,0, .7)',\n                    dominantBaseline: isRotated\n                      ? 'central'\n                      : axis.position === 'bottom'\n                      ? 'hanging'\n                      : axis.position === 'top'\n                      ? 'alphabetic'\n                      : 'central',\n                    textAnchor: isRotated\n                      ? 'end'\n                      : axis.position === 'right'\n                      ? 'start'\n                      : axis.position === 'left'\n                      ? 'end'\n                      : 'middle',\n                  }}\n                  transform={`translate(${tickLabelX}, ${tickLabelY}) rotate(${\n                    isRotated ? (axis.position === 'top' ? 60 : -60) : 0\n                  })`}\n                >\n                  {(axis as AxisTime<any>).formatters.scale(tick as Date)}\n                </text>\n              </g>\n            )\n          })}\n        </g>\n      </g>\n    )\n  }\n\n  return axis.show ? (\n    <g ref={elRef}>\n      {renderAxis(false)}\n      {renderAxis(true)}\n    </g>\n  ) : null\n}\n","import React from 'react'\n\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\nexport default function usePrevious<T>(val: T) {\n  const ref = React.useRef<T>()\n\n  useIsomorphicLayoutEffect(() => {\n    ref.current = val\n  }, [val])\n\n  return ref.current\n}\n","import React from 'react'\n\nexport default function useLatestWhen<T>(obj: T, when: boolean = true) {\n  const ref = React.useRef<T | null>(when ? obj : null)\n\n  if (when) {\n    ref.current = obj\n  }\n\n  return ref.current\n}\n","import * as React from 'react'\n\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\nexport default function usePortalElement() {\n  const [portalEl, setPortalEl] = React.useState<HTMLDivElement | null>()\n\n  useIsomorphicLayoutEffect(() => {\n    if (!portalEl) {\n      let element = document.getElementById(\n        'react-charts-portal'\n      ) as HTMLDivElement\n\n      if (!element) {\n        element = document.createElement('div')\n\n        element.setAttribute('id', 'react-charts-portal')\n\n        Object.assign(element.style, {\n          pointerEvents: 'none',\n          position: 'fixed',\n          left: 0,\n          right: 0,\n          top: 0,\n          bottom: 0,\n          'z-index': 99999999999,\n        })\n\n        document.body.append(element)\n      }\n\n      setPortalEl(element)\n    }\n  })\n\n  return portalEl\n}\n","var props = [\"bottom\", \"height\", \"left\", \"right\", \"top\", \"width\"];\n\nvar rectChanged = function rectChanged(a, b) {\n  if (a === void 0) {\n    a = {};\n  }\n\n  if (b === void 0) {\n    b = {};\n  }\n\n  return props.some(function (prop) {\n    return a[prop] !== b[prop];\n  });\n};\n\nvar observedNodes = /*#__PURE__*/new Map();\nvar rafId;\n\nvar run = function run() {\n  var changedStates = [];\n  observedNodes.forEach(function (state, node) {\n    var newRect = node.getBoundingClientRect();\n\n    if (rectChanged(newRect, state.rect)) {\n      state.rect = newRect;\n      changedStates.push(state);\n    }\n  });\n  changedStates.forEach(function (state) {\n    state.callbacks.forEach(function (cb) {\n      return cb(state.rect);\n    });\n  });\n  rafId = window.requestAnimationFrame(run);\n};\n\nfunction observeRect(node, cb) {\n  return {\n    observe: function observe() {\n      var wasEmpty = observedNodes.size === 0;\n\n      if (observedNodes.has(node)) {\n        observedNodes.get(node).callbacks.push(cb);\n      } else {\n        observedNodes.set(node, {\n          rect: undefined,\n          hasRectChanged: false,\n          callbacks: [cb]\n        });\n      }\n\n      if (wasEmpty) run();\n    },\n    unobserve: function unobserve() {\n      var state = observedNodes.get(node);\n\n      if (state) {\n        // Remove the callback\n        var index = state.callbacks.indexOf(cb);\n        if (index >= 0) state.callbacks.splice(index, 1); // Remove the node reference\n\n        if (!state.callbacks.length) observedNodes[\"delete\"](node); // Stop the loop\n\n        if (!observedNodes.size) cancelAnimationFrame(rafId);\n      }\n    }\n  };\n}\n\nexport default observeRect;\n//# sourceMappingURL=observe-rect.esm.js.map\n","import observeRect from '@reach/observe-rect'\nimport React from 'react'\n\nimport useIsomorphicLayoutEffect from './useIsomorphicLayoutEffect'\n\nexport type HasBoundingClientRect = {\n  getBoundingClientRect: () => DOMRect\n}\n\nexport default function useRect(\n  node: HasBoundingClientRect | null | undefined,\n  enabled: boolean\n) {\n  const [element, setElement] = React.useState(node)\n\n  let [rect, setRect] = React.useState<DOMRect>({\n    width: 0,\n    height: 0,\n  } as DOMRect)\n\n  const rectRef = React.useRef(rect)\n\n  rectRef.current = rect\n\n  useIsomorphicLayoutEffect(() => {\n    if (node !== element) {\n      setElement(node)\n    }\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (enabled && element) {\n      setRect(element.getBoundingClientRect())\n    }\n  }, [element, enabled])\n\n  React.useEffect(() => {\n    if (!element || !enabled) {\n      return\n    }\n\n    const observer = observeRect(element as Element, (newRect: DOMRect) => {\n      setRect(newRect)\n    })\n\n    observer.observe()\n\n    return () => {\n      observer.unobserve()\n    }\n  }, [element, enabled])\n\n  // const resolvedRect = React.useMemo(() => {\n  //   if (!element || !(element as Element).tagName) {\n  //     return rect\n  //   }\n\n  //   const styles = window.getComputedStyle(element as Element)\n\n  //   return {\n  //     x: rect.x,\n  //     y: rect.y,\n  //     width:\n  //       rect.width -\n  //       parseInt(styles.borderLeftWidth) -\n  //       parseInt(styles.borderRightWidth),\n  //     height:\n  //       rect.height -\n  //       parseInt(styles.borderTopWidth) -\n  //       parseInt(styles.borderBottomWidth),\n  //     top: rect.top,\n  //     right: rect.right,\n  //     bottom: rect.bottom,\n  //     left: rect.left,\n  //   }\n  // }, [element, rect])\n\n  return rect\n}\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","// Super fast physics simulations for JavaScript\n// Copyright 2014 Ralph Thomas\n// Licensed under the Apache License, Version 2.0\n// https://github.com/iamralpht/gravitas.js\n\n// Adapted to TypeScript and customized by Tanner Linsley (@tannerlinsley)\n\ntype Solution = {\n  x: (num: number) => number\n  dx: (num: number) => number\n}\n\nconst epsilon = 0.001\n\nfunction almostEqual(a: number, b: number) {\n  return a > b - epsilon && a < b + epsilon\n}\n\nfunction almostZero(a: number) {\n  return almostEqual(a, 0)\n}\n\nexport class Spring {\n  private _m: number\n  private _k: number\n  private _c: number\n  private _solution: null | Solution\n  private _startTime: number\n  endPosition: number\n\n  constructor(\n    init: number,\n    mass: number,\n    springConstant: number,\n    damping: number\n  ) {\n    this._m = mass\n    this._k = springConstant\n    this._c = damping\n    this._solution = null\n    this.endPosition = init\n    this._startTime = 0\n  }\n\n  x(dt?: number) {\n    if (dt === undefined) {\n      dt = (new Date().getTime() - this._startTime) / 1000.0\n    }\n    return this._solution\n      ? this.endPosition + this._solution.x(dt)\n      : this.endPosition\n  }\n\n  private dx(dt?: number) {\n    if (dt === undefined) {\n      dt = (new Date().getTime() - this._startTime) / 1000.0\n    }\n    return this._solution ? this._solution.dx(dt) : 0\n  }\n\n  setEnd(x: number) {\n    const t = new Date().getTime()\n\n    let velocity = 0\n    let position = this.endPosition\n    if (this._solution) {\n      // Don't whack incoming velocity.\n      if (almostZero(velocity))\n        velocity = this._solution.dx((t - this._startTime) / 1000.0)\n      position = this._solution.x((t - this._startTime) / 1000.0)\n      if (almostZero(velocity)) velocity = 0\n      if (almostZero(position)) position = 0\n      position += this.endPosition\n    }\n    if (this._solution && almostZero(position - x) && almostZero(velocity)) {\n      return\n    }\n    this.endPosition = x\n    this._solution = this._solve(position - this.endPosition, velocity)\n    this._startTime = t\n  }\n\n  snap(x: number) {\n    this._startTime = new Date().getTime()\n    this.endPosition = x\n    this._solution = {\n      x() {\n        return 0\n      },\n      dx() {\n        return 0\n      },\n    }\n  }\n\n  done() {\n    return almostEqual(this.x(), this.endPosition) && almostZero(this.dx())\n  }\n\n  // reconfigure(mass: number, springConstant: number, damping: number) {\n  //   this._m = mass\n  //   this._k = springConstant\n  //   this._c = damping\n\n  //   if (this.done()) {\n  //     return\n  //   }\n  //   this._solution = this._solve(this.x() - this.endPosition, this.dx())\n  //   this._startTime = new Date().getTime()\n  // }\n\n  // springConstant() {\n  //   return this._k\n  // }\n\n  // damping() {\n  //   return this._c\n  // }\n\n  private _solve(initial: number, velocity: number): Solution {\n    const c = this._c\n    const m = this._m\n    const k = this._k\n    // Solve the quadratic equation; root = (-c +/- sqrt(c^2 - 4mk)) / 2m.\n    const cmk = c * c - 4 * m * k\n    if (cmk === 0) {\n      // The spring is critically damped.\n      // x = (c1 + c2*t) * e ^(-c/2m)*t\n      const r = -c / (2 * m)\n      const c1 = initial\n      const c2 = velocity / (r * initial)\n      return {\n        x(t) {\n          return (c1 + c2 * t) * Math.pow(Math.E, r * t)\n        },\n        dx(t) {\n          const pow = Math.pow(Math.E, r * t)\n          return r * (c1 + c2 * t) * pow + c2 * pow\n        },\n      }\n    } else if (cmk > 0) {\n      // The spring is overdamped; no bounces.\n      // x = c1*e^(r1*t) + c2*e^(r2t)\n      // Need to find r1 and r2, the roots, then solve c1 and c2.\n      const r1 = (-c - Math.sqrt(cmk)) / (2 * m)\n      const r2 = (-c + Math.sqrt(cmk)) / (2 * m)\n      const c2 = (velocity - r1 * initial) / (r2 - r1)\n      const c1 = initial - c2\n\n      return {\n        x(t) {\n          return c1 * Math.pow(Math.E, r1 * t) + c2 * Math.pow(Math.E, r2 * t)\n        },\n        dx(t) {\n          return (\n            c1 * r1 * Math.pow(Math.E, r1 * t) +\n            c2 * r2 * Math.pow(Math.E, r2 * t)\n          )\n        },\n      }\n    } else {\n      // The spring is underdamped, it has imaginary roots.\n      // r = -(c / 2*m) +- w*i\n      // w = sqrt(4mk - c^2) / 2m\n      // x = (e^-(c/2m)t) * (c1 * cos(wt) + c2 * sin(wt))\n      const w = Math.sqrt(4 * m * k - c * c) / (2 * m)\n      const r = -((c / 2) * m)\n      const c1 = initial\n      const c2 = (velocity - r * initial) / w\n\n      return {\n        x(t) {\n          return (\n            Math.pow(Math.E, r * t) *\n            (c1 * Math.cos(w * t) + c2 * Math.sin(w * t))\n          )\n        },\n        dx(t) {\n          const power = Math.pow(Math.E, r * t)\n          const cos = Math.cos(w * t)\n          const sin = Math.sin(w * t)\n          return (\n            power * (c2 * w * cos - c1 * w * sin) +\n            r * power * (c2 * sin + c1 * cos)\n          )\n        },\n      }\n    }\n  }\n}\n","import React from 'react'\nimport { Spring } from '../utils/spring'\nimport useGetLatest from './useGetLatest'\n\nexport function useSpring(\n  value: number,\n  config: [number, number, number],\n  cb: (x: number) => void,\n  immediate?: boolean,\n  debug?: boolean\n) {\n  const springRef = React.useRef(new Spring(value, ...config))\n  const getValue = useGetLatest(value)\n\n  const [startRaf, stopRaf] = useRaf(() => {\n    cb(springRef.current.x())\n    return springRef.current.done()\n  })\n\n  // Immediate\n  React.useEffect(() => {\n    if (immediate) {\n      springRef.current.snap(getValue())\n      startRaf()\n      return\n    }\n    springRef.current.setEnd(value)\n    startRaf()\n  }, [debug, getValue, immediate, startRaf, stopRaf, value])\n\n  React.useEffect(() => {\n    return () => {\n      stopRaf()\n    }\n  }, [stopRaf])\n\n  return springRef.current\n}\n\nexport function useRaf(callback: () => any) {\n  const raf = React.useRef<number | null>(null)\n  const rafCallback = React.useRef(callback)\n  rafCallback.current = callback\n  const tick = React.useCallback(() => {\n    if (rafCallback.current()) return\n    raf.current = requestAnimationFrame(tick)\n  }, [])\n\n  return [\n    React.useMemo(() => tick, [tick]),\n    React.useMemo(\n      () => () => raf.current && cancelAnimationFrame(raf.current),\n      []\n    ),\n  ]\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport * as TSTB from 'ts-toolbelt'\n\nimport usePrevious from '../hooks/usePrevious'\nimport useLatestWhen from '../hooks/useLatestWhen'\nimport usePortalElement from '../hooks/usePortalElement'\nimport { AxisTime, CursorOptions, Datum } from '../types'\nimport { translate } from '../utils/Utils'\n//\nimport useChartContext from '../utils/chartContext'\nimport useRect from '../hooks/useRect'\nimport { useSpring } from '../hooks/useSpring'\nimport useGetLatest from '../hooks/useGetLatest'\n\ntype ResolvedCursorOptions = TSTB.Object.Required<\n  CursorOptions,\n  'show' | 'showLine' | 'showLabel'\n>\n\n//\n\nconst getLineBackgroundColor = (dark?: boolean) =>\n  dark ? 'rgba(255,255,255,.3)' : 'rgba(0, 26, 39, 0.3)'\n\nconst getBackgroundColor = (dark?: boolean) =>\n  dark ? 'rgba(255,255,255,.9)' : 'rgba(0, 26, 39, 0.9)'\n\nfunction defaultCursor(options: CursorOptions): ResolvedCursorOptions {\n  return {\n    ...options,\n    show: options.show ?? true,\n    showLine: options.showLine ?? true,\n    showLabel: options.showLabel ?? true,\n  }\n}\n\nexport default function Cursors<TDatum>() {\n  const { getOptions } = useChartContext<TDatum>()\n\n  let primaryOptions = getOptions().primaryCursor ?? true\n  let secondaryOptions = getOptions().secondaryCursor ?? true\n\n  const resolvedPrimaryOptions = React.useMemo(\n    () =>\n      defaultCursor(\n        !primaryOptions\n          ? { show: false }\n          : typeof primaryOptions === 'boolean'\n          ? {}\n          : primaryOptions\n      ),\n    [primaryOptions]\n  )\n\n  const resolvedSecondaryOptions = React.useMemo(\n    () =>\n      defaultCursor(\n        !secondaryOptions\n          ? { show: false }\n          : typeof secondaryOptions === 'boolean'\n          ? {}\n          : secondaryOptions\n      ),\n    [secondaryOptions]\n  )\n\n  return (\n    <>\n      <Cursor primary options={resolvedPrimaryOptions} />\n      <Cursor options={resolvedSecondaryOptions} />\n    </>\n  )\n}\n\nfunction Cursor<TDatum>(props: {\n  primary?: boolean\n  options: ResolvedCursorOptions\n}) {\n  const {\n    getOptions,\n    svgRef,\n    gridDimensions,\n    focusedDatumState,\n    primaryAxis,\n    secondaryAxes,\n  } = useChartContext<TDatum>()\n\n  const getTooltipOptions = useGetLatest(props.options)\n\n  const [focusedDatum] = focusedDatumState\n  const latestFocusedDatum = useLatestWhen(focusedDatum, !!focusedDatum)\n\n  const secondaryAxis = secondaryAxes.find(\n    d => d.id === props.options.axisId || latestFocusedDatum?.secondaryAxisId\n  )!\n\n  const axis = props.primary ? primaryAxis : secondaryAxis\n\n  const siblingAxis = props.primary ? secondaryAxis : primaryAxis\n\n  const resolveValue = (d: Datum<TDatum> | null) =>\n    d\n      ? axis.stacked\n        ? d.stackData?.[1]\n        : axis.getValue(d?.originalDatum)\n      : undefined\n\n  const datumValue = resolveValue(focusedDatum)\n\n  React.useEffect(() => {\n    getTooltipOptions()?.onChange?.(datumValue)\n  }, [getTooltipOptions, datumValue])\n\n  const value = props.options.value ?? datumValue\n\n  const latestPropsValue = useLatestWhen(\n    props.options.value,\n    props.options.value != null\n  )\n\n  const latestDatumValue = useLatestWhen(\n    resolveValue(latestFocusedDatum),\n    resolveValue(latestFocusedDatum) != null\n  )\n\n  const latestValue = latestPropsValue ?? latestDatumValue\n\n  // Get the sibling range\n  const siblingRange = siblingAxis.scale.range()\n\n  let x\n  let y\n  let x1\n  let x2\n  let y1\n  let y2\n  let alignPctX\n  let alignPctY\n\n  const bandWidth = axis.axisFamily === 'band' ? axis.scale.bandwidth() : 1\n\n  const show = typeof value !== 'undefined' && !Number.isNaN(value)\n\n  let px = axis.scale(value)\n\n  // Vertical alignment\n  if (axis.isVertical) {\n    y = px\n    y1 = (y ?? 0) - 1\n    y2 = (y ?? 0) + bandWidth\n    if (axis.position === 'left') {\n      x1 = siblingRange[0]\n      x2 = siblingRange[1]\n    } else {\n      x1 = siblingRange[1]\n      x2 = siblingRange[0]\n    }\n  } else {\n    x = px\n    x1 = (x ?? 0) - 1\n    x2 = (x ?? 0) + bandWidth\n    if (axis.position === 'top') {\n      y1 = siblingRange[0]\n      y2 = siblingRange[1]\n    } else {\n      y1 = siblingRange[1]\n      y2 = siblingRange[0]\n    }\n  }\n\n  let lineStartX = Math.min(x1, x2)\n  let lineStartY = Math.min(y1, y2)\n  let lineEndX = Math.max(x1, x2)\n  let lineEndY = Math.max(y1, y2)\n  let lineHeight = Math.max(lineEndY - lineStartY, 0)\n  let lineWidth = Math.max(lineEndX - lineStartX, 0)\n\n  let bubbleX\n  let bubbleY\n\n  // Bubble placement\n  if (axis.isVertical) {\n    if (axis.position === 'left') {\n      bubbleX = lineStartX\n    } else {\n      bubbleX = lineEndX\n    }\n\n    bubbleY = lineStartY + lineHeight / 2\n  } else {\n    if (axis.position === 'top') {\n      bubbleY = lineStartY\n    } else {\n      bubbleY = lineEndY\n    }\n\n    bubbleX = lineStartX + lineWidth / 2\n  }\n\n  // Bubble anchoring\n  if (axis.isVertical) {\n    alignPctY = -50\n    if (axis.position === 'left') {\n      alignPctX = -100\n    } else {\n      alignPctX = 0\n    }\n  } else {\n    alignPctX = -50\n    if (axis.position === 'top') {\n      alignPctY = -100\n    } else {\n      alignPctY = 0\n    }\n  }\n\n  const formattedValue = (axis as AxisTime<any>).formatters.cursor(latestValue)\n\n  const svgRect = useRect(svgRef.current, show)\n\n  const lineRef = React.useRef<HTMLDivElement | null>(null)\n  const bubbleRef = React.useRef<HTMLDivElement | null>(null)\n\n  const latestLineStartX = useLatestWhen(lineStartX, px != null)\n  const latestLineStartY = useLatestWhen(lineStartY, px != null)\n  const latestBubbleX = useLatestWhen(bubbleX, px != null)\n  const latestBubbleY = useLatestWhen(bubbleY, px != null)\n\n  const previousTruePx = usePrevious(px)\n  const immediate = previousTruePx == null && px !== null\n\n  lineStartX = (px != null ? lineStartX : latestLineStartX) ?? NaN\n  lineStartY = (px != null ? lineStartY : latestLineStartY) ?? NaN\n  bubbleX = (px != null ? bubbleX : latestBubbleX) ?? NaN\n  bubbleY = (px != null ? bubbleY : latestBubbleY) ?? NaN\n\n  const lineXSpring = useSpring(\n    lineStartX,\n    [1, 210, 20],\n    () => {\n      if (lineRef.current) {\n        lineRef.current.style.transform = `translate(${lineXSpring.x()}px, ${lineYSpring.x()}px)`\n      }\n    },\n    immediate\n  )\n\n  const lineYSpring = useSpring(\n    lineStartY,\n    [1, 210, 20],\n    () => {\n      if (lineRef.current) {\n        lineRef.current.style.transform = `translate(${lineXSpring.x()}px, ${lineYSpring.x()}px)`\n      }\n    },\n    immediate\n  )\n\n  const bubbleXSpring = useSpring(\n    bubbleX,\n    [1, 210, 20],\n    () => {\n      if (bubbleRef.current) {\n        bubbleRef.current.style.transform = `translate(${bubbleXSpring.x()}px, ${bubbleYSpring.x()}px)`\n      }\n    },\n    immediate\n  )\n\n  const bubbleYSpring = useSpring(\n    bubbleY,\n    [1, 210, 20],\n    () => {\n      if (bubbleRef.current) {\n        bubbleRef.current.style.transform = `translate(${bubbleXSpring.x()}px, ${bubbleYSpring.x()}px)`\n      }\n    },\n    immediate\n  )\n\n  const portalEl = usePortalElement()\n\n  return portalEl\n    ? ReactDOM.createPortal(\n        <div\n          style={{\n            fontFamily: 'sans-serif',\n            pointerEvents: 'none',\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            transform: translate(\n              svgRect.left + gridDimensions.gridX,\n              svgRect.top + gridDimensions.gridY\n            ),\n            opacity: show ? 1 : 0,\n            transition: 'opacity .3s ease',\n          }}\n          className=\"Cursor\"\n        >\n          {/* Render the cursor line */}\n          {props.options.showLine ? (\n            <div\n              ref={lineRef}\n              style={{\n                width: `${lineWidth}px`,\n                height: `${lineHeight}px`,\n                position: 'absolute',\n                top: 0,\n                left: 0,\n                background: getLineBackgroundColor(getOptions().dark),\n              }}\n            />\n          ) : null}\n          {/* Render the cursor bubble */}\n          {props.options.showLabel ? (\n            <div\n              ref={bubbleRef}\n              style={{\n                position: 'absolute',\n                top: 0,\n                left: 0,\n              }}\n            >\n              {/* Render the cursor label */}\n              <div\n                style={{\n                  padding: '5px',\n                  fontSize: '10px',\n                  background: getBackgroundColor(getOptions().dark),\n                  color: getBackgroundColor(!getOptions().dark),\n                  borderRadius: '3px',\n                  position: 'relative',\n                  transform: `translate3d(${alignPctX}%, ${alignPctY}%, 0)`,\n                  whiteSpace: 'nowrap',\n                }}\n              >\n                {formattedValue}\n              </div>\n            </div>\n          ) : null}\n        </div>,\n        portalEl\n      )\n    : null\n}\n","import React from 'react'\n\nimport useRect, { HasBoundingClientRect } from './useRect'\n\n//\n\n//\n\ntype AlignMode =\n  | 'center'\n  | 'start'\n  | 'end'\n  | 'top'\n  | 'right'\n  | 'bottom'\n  | 'left'\n\ntype Side = 'left' | 'right' | 'top' | 'bottom'\ntype SideOption = Side | `${Side} ${AlignMode}`\ntype SideAlign = [Side, AlignMode]\n\ntype StartKey = 'left' | 'top'\ntype LengthKey = 'width' | 'height'\n\ntype Dims = {\n  left: number\n  top: number\n  right: number\n  bottom: number\n  width: number\n  height: number\n}\n\n// These are the keys used internally to look up and measure\n// different sides of a bounding box within another\nconst sideSchemas = {\n  left: {\n    side: 'left',\n    startKey: 'left',\n    lengthKey: 'width',\n    crossStartKey: 'top',\n    crossLengthKey: 'height',\n    fromEnd: false,\n  },\n  right: {\n    side: 'right',\n    startKey: 'left',\n    lengthKey: 'width',\n    crossStartKey: 'top',\n    crossLengthKey: 'height',\n    fromEnd: true,\n  },\n  top: {\n    side: 'top',\n    startKey: 'top',\n    lengthKey: 'height',\n    crossStartKey: 'left',\n    crossLengthKey: 'width',\n    fromEnd: false,\n  },\n  bottom: {\n    side: 'bottom',\n    startKey: 'top',\n    lengthKey: 'height',\n    crossStartKey: 'left',\n    crossLengthKey: 'width',\n    fromEnd: true,\n  },\n} as const\n\n// This is the final Tootlip component. It's a render prop\n// that lets you attach handlers to elements, and render a tooltip\n// anchored to them in relation to the parent portal container (either the only\n// one defined or the one referenced by Id).\nexport function useAnchor(options: {\n  show: boolean\n  useLargest?: boolean\n  side: SideOption | SideOption[]\n  portalEl: HasBoundingClientRect | null | undefined\n  anchorEl: HasBoundingClientRect | null | undefined\n  tooltipEl: HasBoundingClientRect | null | undefined\n}) {\n  const portalDims = useRect(options.portalEl, options.show)\n  const anchorDims = useRect(options.anchorEl, options.show)\n  const tooltipDims = useRect(options.tooltipEl, options.show)\n\n  const sides = React.useMemo(() => {\n    const preSides = Array.isArray(options.side) ? options.side : [options.side]\n    return preSides.map(alignStr => {\n      const [side, align = 'center'] = alignStr.split(' ') as [Side, AlignMode]\n      const incompatibleSide = !['top', 'right', 'bottom', 'left'].find(\n        d => side === d\n      )\n\n      if (incompatibleSide) {\n        throw new Error(\n          `react-sticker: \"${side}\" is not a valid side! Must be one of ['top', 'right', 'bottom', 'left'].`\n        )\n      }\n\n      const incompatibleAlign = ![\n        'center',\n        'start',\n        'end',\n        'top',\n        'right',\n        'bottom',\n        'left',\n      ].find(d => align === d)\n\n      if (incompatibleAlign) {\n        throw new Error(\n          `react-sticker: \"${align}\" is not a valid side-alignment! Must be one of ['center', 'start', 'end', 'top', 'right', 'bottom', 'left'].`\n        )\n      }\n\n      return [side, align] as [Side, AlignMode]\n    })\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [JSON.stringify(options.side)])\n\n  // IF we have all of the dimensions needed to calculate\n  // fits, then calculate the fit\n  const ready = portalDims && tooltipDims && anchorDims\n\n  const fit = React.useMemo(\n    () =>\n      ready && options.show\n        ? fitOnBestSide({\n            portalDims,\n            tooltipDims,\n            anchorDims,\n            sides,\n            useLargest: options.useLargest,\n          })\n        : null,\n    [\n      anchorDims,\n      options.show,\n      options.useLargest,\n      portalDims,\n      ready,\n      sides,\n      tooltipDims,\n    ]\n  )\n\n  return {\n    fit,\n    style: {\n      position: 'absolute' as const,\n      visibility: ready ? ('visible' as const) : ('hidden' as const),\n      // The fit styles are applied here from the best fit\n      ...fit?.style,\n    },\n  }\n}\n\n// This function selects the best side for the tooltip by using\n// the ranked fits.\nfunction fitOnBestSide({\n  portalDims,\n  tooltipDims,\n  anchorDims,\n  sides,\n  useLargest,\n}: {\n  portalDims: Dims\n  tooltipDims: Dims\n  anchorDims: Dims\n  sides: SideAlign[]\n  useLargest?: boolean\n}) {\n  const fits = sides.map(([side, align]) =>\n    measureFit({\n      ...sideSchemas[side],\n      align,\n      portalDims,\n      tooltipDims,\n      anchorDims,\n    })\n  )\n\n  if (useLargest) {\n    fits.sort((a, b) => b.fitRatio - a.fitRatio)\n    return fits[0]\n  }\n\n  return fits.find(fit => fit.fitRatio >= 1) || fits[0]\n}\n\n// This function takes a side and bunch of calculated dimensions from\n// the portal, tooltip and target. Then it returns\n// the percentage fit and the style to achieve this specific fit\nfunction measureFit({\n  side,\n  align,\n  startKey,\n  lengthKey,\n  crossStartKey,\n  crossLengthKey,\n  fromEnd,\n  portalDims,\n  tooltipDims,\n  anchorDims,\n}: {\n  side: Side\n  align: AlignMode\n  startKey: StartKey\n  lengthKey: LengthKey\n  crossStartKey: StartKey\n  crossLengthKey: LengthKey\n  fromEnd: boolean\n  portalDims: Dims\n  tooltipDims: Dims\n  anchorDims: Dims\n}) {\n  const parentStart = portalDims[startKey]\n  const parentLength = portalDims[lengthKey]\n  const crossParentStart = portalDims[crossStartKey]\n  const crossParentLength = portalDims[crossLengthKey]\n  const anchorStart = anchorDims[startKey] - portalDims[startKey]\n  const anchorLength = anchorDims[lengthKey]\n  const crossAnchorStart = anchorDims[crossStartKey]\n  const crossAnchorLength = anchorDims[crossLengthKey]\n  const crossAnchorWidth = anchorDims[crossLengthKey]\n  const targetLength = tooltipDims[lengthKey]\n  const crossTargetLength = tooltipDims[crossLengthKey]\n\n  let targetStart: number\n  let fitRatio: number\n\n  if (!fromEnd) {\n    targetStart = anchorStart - targetLength\n    fitRatio = Math.min(anchorStart / targetLength)\n  } else {\n    targetStart = anchorStart + anchorLength\n    fitRatio = (parentLength - (anchorStart + anchorLength)) / targetLength\n  }\n\n  targetStart = Math.max(parentStart, Math.min(targetStart, parentLength))\n\n  let crossTargetStart: number\n\n  if (startKey === 'left') {\n    if (align === 'top') {\n      align = 'start'\n    } else if (align === 'bottom') {\n      align = 'end'\n    }\n  } else {\n    if (align === 'left') {\n      align = 'start'\n    } else if (align === 'right') {\n      align = 'end'\n    }\n  }\n\n  if (!['start', 'center', 'end'].includes(align)) {\n    align = 'center'\n  }\n\n  if (align === 'start') {\n    crossTargetStart = crossAnchorStart\n  } else if (align === 'end') {\n    crossTargetStart = crossAnchorStart + crossAnchorWidth - crossTargetLength\n  } else {\n    crossTargetStart =\n      crossAnchorStart + crossAnchorLength / 2 - crossTargetLength / 2\n  }\n\n  crossTargetStart = Math.max(\n    crossParentStart,\n    Math.min(crossTargetStart, crossParentLength - crossTargetLength)\n  )\n\n  return {\n    side,\n    align,\n    startKey,\n    lengthKey,\n    crossStartKey,\n    crossLengthKey,\n    fromEnd,\n    portalDims,\n    tooltipDims,\n    anchorDims,\n    fitRatio,\n    style: {\n      [startKey]: targetStart,\n      [crossStartKey]: crossTargetStart,\n    } as Record<StartKey, number>,\n  }\n}\n","import { sum } from 'd3-array'\nimport React, { CSSProperties } from 'react'\n\nimport { useAnchor } from '../hooks/useAnchor'\nimport useLatestWhen from '../hooks/useLatestWhen'\nimport {\n  Axis,\n  AxisLinear,\n  AxisTime,\n  Datum,\n  RequiredChartOptions,\n} from '../types'\n\n//\n//\n\nconst showCount = 10\n\nconst triangleSize = 7\n\nconst getBackgroundColor = (dark?: boolean) =>\n  dark ? 'rgba(255,255,255,.9)' : 'rgba(0, 26, 39, 0.9)'\n\nexport type TooltipRendererProps<TDatum> = {\n  focusedDatum: Datum<TDatum> | null\n  getOptions: () => RequiredChartOptions<TDatum>\n  primaryAxis: Axis<TDatum>\n  secondaryAxis: Axis<TDatum>\n  getDatumStyle: (datum: Datum<TDatum>) => CSSProperties\n  anchor: ReturnType<typeof useAnchor>\n}\n\nexport default function tooltipRenderer<TDatum>(\n  props: TooltipRendererProps<TDatum>\n) {\n  return <TooltipRenderer {...props} />\n}\n\nfunction TooltipRenderer<TDatum>(props: TooltipRendererProps<TDatum>) {\n  const latestFit = useLatestWhen(props.anchor.fit, !!props.anchor.fit)\n\n  if (!props.focusedDatum) {\n    return null\n  }\n\n  const { primaryAxis, secondaryAxis, getDatumStyle, focusedDatum } = props\n\n  const { groupingMode, dark } = props.getOptions()\n\n  const groupDatums = props.focusedDatum?.group ?? []\n\n  const resolvedShowCount = showCount % 2 === 0 ? showCount : showCount + 1\n  const length = groupDatums.length\n\n  // Get the focused series' index\n  const activeIndex = groupDatums.findIndex(d => d === focusedDatum)\n  // Get the start by going back half of the showCount\n  let start = activeIndex > -1 ? activeIndex - resolvedShowCount / 2 : 0\n  // Make sure it's at least 0\n  start = Math.max(start, 0)\n  // Use the start and add the showCount to get the end\n  let end = activeIndex > -1 ? start + resolvedShowCount : length\n  // Don't let the end go passed the length\n  end = Math.min(end, length)\n  // Double check we aren't clipping the start\n  start = Math.max(end - resolvedShowCount, 0)\n  // Slice the datums by start and end\n  const visibleSortedGroupDatums = groupDatums.slice(start, end)\n  // Detect if we have previous items\n  const hasPrevious = start > 0\n  // Or next items\n  const hasNext = end < length\n\n  const finalAlign = `${latestFit?.side}-${latestFit?.align}`\n\n  let arrowPosition\n  let triangleStyles\n\n  if (!arrowPosition) {\n    if (finalAlign === 'left-center') {\n      arrowPosition = 'right'\n    } else if (finalAlign === 'right-center') {\n      arrowPosition = 'left'\n    } else if (finalAlign === 'top-center') {\n      arrowPosition = 'bottom'\n    } else if (finalAlign === 'bottom-center') {\n      arrowPosition = 'top'\n    } else if (finalAlign === 'right-start') {\n      arrowPosition = 'bottomLeft'\n    } else if (finalAlign === 'right-end') {\n      arrowPosition = 'topLeft'\n    } else if (finalAlign === 'left-start') {\n      arrowPosition = 'bottomRight'\n    } else if (finalAlign === 'left-end') {\n      arrowPosition = 'topRight'\n    }\n  }\n\n  const backgroundColor = getBackgroundColor(dark)\n\n  if (arrowPosition === 'bottom') {\n    triangleStyles = {\n      top: '100%',\n      left: '50%',\n      transform: 'translate3d(-50%, 0%, 0)',\n      borderLeft: `${triangleSize * 0.8}px solid transparent`,\n      borderRight: `${triangleSize * 0.8}px solid transparent`,\n      borderTop: `${triangleSize}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'top') {\n    triangleStyles = {\n      top: '0%',\n      left: '50%',\n      transform: 'translate3d(-50%, -100%, 0)',\n      borderLeft: `${triangleSize * 0.8}px solid transparent`,\n      borderRight: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'right') {\n    triangleStyles = {\n      top: '50%',\n      left: '100%',\n      transform: 'translate3d(0%, -50%, 0)',\n      borderTop: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize * 0.8}px solid transparent`,\n      borderLeft: `${triangleSize}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'left') {\n    triangleStyles = {\n      top: '50%',\n      left: '0%',\n      transform: 'translate3d(-100%, -50%, 0)',\n      borderTop: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize * 0.8}px solid transparent`,\n      borderRight: `${triangleSize}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'topRight') {\n    triangleStyles = {\n      top: '0%',\n      left: '100%',\n      transform: 'translate3d(-50%, -50%, 0) rotate(-45deg)',\n      borderTop: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize * 0.8}px solid transparent`,\n      borderLeft: `${triangleSize * 2}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'bottomRight') {\n    triangleStyles = {\n      top: '100%',\n      left: '100%',\n      transform: 'translate3d(-50%, -50%, 0) rotate(45deg)',\n      borderTop: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize * 0.8}px solid transparent`,\n      borderLeft: `${triangleSize * 2}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'topLeft') {\n    triangleStyles = {\n      top: '0%',\n      left: '0%',\n      transform: 'translate3d(-50%, -50%, 0) rotate(45deg)',\n      borderTop: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize * 0.8}px solid transparent`,\n      borderRight: `${triangleSize * 2}px solid ${backgroundColor}`,\n    }\n  } else if (arrowPosition === 'bottomLeft') {\n    triangleStyles = {\n      top: '100%',\n      left: '0%',\n      transform: 'translate3d(-50%, -50%, 0) rotate(-45deg)',\n      borderTop: `${triangleSize * 0.8}px solid transparent`,\n      borderBottom: `${triangleSize * 0.8}px solid transparent`,\n      borderRight: `${triangleSize * 2}px solid ${backgroundColor}`,\n    }\n  } else {\n    triangleStyles = {\n      opacity: 0,\n    }\n  }\n\n  return (\n    <div\n      style={{\n        position: 'relative',\n        fontSize: '10px',\n        padding: '5px',\n        background: getBackgroundColor(dark),\n        color: dark ? 'black' : 'white',\n        borderRadius: '3px',\n      }}\n    >\n      <div\n        style={{\n          position: 'absolute',\n          width: 0,\n          height: 0,\n          ...triangleStyles,\n        }}\n      />\n      <div>\n        <div\n          style={{\n            marginBottom: '3px',\n            textAlign: 'center',\n          }}\n        >\n          {groupingMode === 'series' ? (\n            <strong>{focusedDatum.seriesLabel}</strong>\n          ) : groupingMode === 'secondary' ? (\n            <strong>\n              {(secondaryAxis as AxisTime<any>).formatters.tooltip(\n                secondaryAxis.getValue(focusedDatum.originalDatum)\n              )}\n            </strong>\n          ) : (\n            <strong>\n              {(primaryAxis as AxisTime<any>).formatters.tooltip(\n                primaryAxis.getValue(focusedDatum.originalDatum)\n              )}\n            </strong>\n          )}\n        </div>\n        <table\n          style={{\n            whiteSpace: 'nowrap',\n          }}\n        >\n          <tbody>\n            {hasPrevious ? (\n              <tr\n                style={{\n                  opacity: 0.8,\n                }}\n              >\n                <td />\n                <td>...</td>\n                <td />\n              </tr>\n            ) : null}\n            {visibleSortedGroupDatums.map((sortedDatum, i) => {\n              const active = sortedDatum === focusedDatum\n\n              return (\n                <tr\n                  key={i}\n                  style={{\n                    opacity: active ? 1 : 0.8,\n                    fontWeight: active ? 'bold' : undefined,\n                  }}\n                >\n                  <td\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'center',\n                    }}\n                  >\n                    <svg width=\"14\" height=\"14\">\n                      <circle\n                        cx=\"7\"\n                        cy=\"7\"\n                        r=\"5\"\n                        style={{\n                          ...getDatumStyle(sortedDatum),\n                          stroke: dark ? 'black' : 'white',\n                          strokeWidth: active ? 2 : 1,\n                        }}\n                      />\n                    </svg>\n                  </td>\n                  {groupingMode === 'series' ? (\n                    <React.Fragment>\n                      <td>\n                        {(primaryAxis as AxisTime<any>).formatters.tooltip(\n                          primaryAxis.getValue(sortedDatum.originalDatum)\n                        )}\n                        : &nbsp;\n                      </td>\n                      <td\n                        style={{\n                          textAlign: 'right',\n                        }}\n                      >\n                        {(secondaryAxis as AxisTime<any>).formatters.tooltip(\n                          secondaryAxis.getValue(sortedDatum.originalDatum)\n                        )}\n                      </td>\n                    </React.Fragment>\n                  ) : groupingMode === 'secondary' ? (\n                    <React.Fragment>\n                      <td>{sortedDatum.seriesLabel}: &nbsp;</td>\n                      <td\n                        style={{\n                          textAlign: 'right',\n                        }}\n                      >\n                        {(primaryAxis as AxisTime<any>).formatters.tooltip(\n                          primaryAxis.getValue(sortedDatum.originalDatum)\n                        )}\n                      </td>\n                    </React.Fragment>\n                  ) : (\n                    <React.Fragment>\n                      <td>{sortedDatum.seriesLabel}: &nbsp;</td>\n                      <td\n                        style={{\n                          textAlign: 'right',\n                        }}\n                      >\n                        {(secondaryAxis as AxisTime<any>).formatters.tooltip(\n                          secondaryAxis.getValue(sortedDatum.originalDatum)\n                        )}\n                      </td>\n                    </React.Fragment>\n                  )}\n                </tr>\n              )\n            })}\n            {hasNext ? (\n              <tr\n                style={{\n                  opacity: 0.8,\n                }}\n              >\n                <td />\n                <td>...</td>\n                <td />\n              </tr>\n            ) : null}\n            {secondaryAxis.stacked && (focusedDatum.group ?? []).length > 1 ? (\n              <tr>\n                <td\n                  style={{\n                    paddingTop: '5px',\n                  }}\n                >\n                  <div\n                    style={{\n                      width: '12px',\n                      height: '12px',\n                      backgroundColor: dark\n                        ? 'rgba(0, 26, 39, 0.3)'\n                        : 'rgba(255,255,255,.2)',\n                      borderRadius: '50px',\n                    }}\n                  />\n                </td>\n                <td\n                  style={{\n                    paddingTop: '5px',\n                  }}\n                >\n                  Total: &nbsp;\n                </td>\n                <td\n                  style={{\n                    paddingTop: '5px',\n                  }}\n                >\n                  {/* {secondaryAxis.format(\n                  [...focusedDatum.group].reverse()[0].totalValue,\n                  -1\n                )} */}\n                  {(secondaryAxis as AxisLinear<any>).formatters.scale(\n                    sum(focusedDatum.group ?? [], d =>\n                      secondaryAxis.getValue(d.originalDatum)\n                    )\n                  )}\n                </td>\n              </tr>\n            ) : null}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport { useAnchor } from '../hooks/useAnchor'\nimport useLatestWhen from '../hooks/useLatestWhen'\nimport usePortalElement from '../hooks/usePortalElement'\nimport usePrevious from '../hooks/usePrevious'\nimport { Datum, ResolvedTooltipOptions, TooltipOptions } from '../types'\n//\nimport useChartContext from '../utils/chartContext'\nimport TooltipRenderer from './TooltipRenderer'\nimport useRect from '../hooks/useRect'\nimport { useSpring } from '../hooks/useSpring'\n\n//\n\nfunction defaultTooltip<TDatum>(\n  options: TooltipOptions<TDatum> = {}\n): ResolvedTooltipOptions<TDatum> {\n  return {\n    ...options,\n    align: options.align ?? 'auto',\n    alignPriority: options.alignPriority ?? [\n      'right',\n      'topRight',\n      'bottomRight',\n      'left',\n      'topLeft',\n      'bottomLeft',\n      'top',\n      'bottom',\n    ],\n    padding: options.padding ?? 5,\n    tooltipArrowPadding: options.tooltipArrowPadding ?? 7,\n    // anchor: options.anchor ?? 'closest',\n    render: options.render ?? TooltipRenderer,\n  }\n}\n\nexport default function Tooltip<TDatum>(): React.ReactPortal | null {\n  const {\n    focusedDatumState,\n    getOptions,\n    primaryAxis,\n    secondaryAxes,\n    getDatumStatusStyle,\n    svgRef,\n  } = useChartContext<TDatum>()\n\n  const [focusedDatum] = focusedDatumState\n  const latestFocusedDatum = useLatestWhen(focusedDatum, !!focusedDatum)\n\n  const preTooltipOptions = getOptions().tooltip ?? true\n\n  const secondaryAxis =\n    secondaryAxes.find(d => d.id === latestFocusedDatum?.secondaryAxisId) ??\n    secondaryAxes[0]\n\n  const tooltipOptions = React.useMemo(\n    () =>\n      defaultTooltip(\n        typeof preTooltipOptions === 'boolean' ? {} : preTooltipOptions\n      ),\n    [preTooltipOptions]\n  )\n\n  const portalEl = usePortalElement()\n\n  const [tooltipEl, setTooltipEl] = React.useState<HTMLDivElement | null>()\n\n  const svgRect = useRect(svgRef.current, !!focusedDatum?.element)\n\n  const anchorEl = React.useMemo(() => {\n    const anchorRect =\n      latestFocusedDatum?.element?.getBoundingClientRect() ?? null\n\n    if (!anchorRect) {\n      return null\n    }\n\n    if (!svgRect) return\n\n    const translateX = anchorRect.left ?? 0\n    const translateY = anchorRect.top ?? 0\n    const width = anchorRect.width ?? 0\n    const height = anchorRect.height ?? 0\n\n    const box = {\n      x: translateY,\n      y: translateX,\n      top: translateY,\n      left: translateX,\n      bottom: translateY + width,\n      right: translateX + height,\n      width: width,\n      height: height,\n      toJSON: () => ({} as DOMRect),\n    }\n\n    box.toJSON = () => box\n\n    return {\n      getBoundingClientRect: () => {\n        return box\n      },\n    }\n  }, [latestFocusedDatum?.element, svgRect])\n\n  const anchor = useAnchor({\n    show: !!focusedDatum,\n    portalEl,\n    anchorEl,\n    tooltipEl,\n    side: ['right', 'left', 'top', 'bottom'],\n  })\n\n  const previousAnchor = usePrevious(anchor)\n  const latestStableAnchor = useLatestWhen(anchor, !!anchor.fit) ?? anchor\n\n  const { visibility, ...anchorStyle } = latestStableAnchor.style\n\n  const tooltipRef = React.useRef<HTMLDivElement | null>(null)\n\n  const immediate = Number.isNaN(previousAnchor?.style.left)\n\n  const tooltipXSpring = useSpring(\n    anchorStyle.left || 0,\n    [1, 210, 30],\n    () => {\n      if (tooltipRef.current) {\n        tooltipRef.current.style.transform = `translate(${tooltipXSpring.x()}px, ${tooltipYSpring.x()}px)`\n      }\n    },\n    immediate\n  )\n\n  const tooltipYSpring = useSpring(\n    anchorStyle.top || 0,\n    [1, 210, 30],\n    () => {\n      if (tooltipRef.current) {\n        tooltipRef.current.style.transform = `translate(${tooltipXSpring.x()}px, ${tooltipYSpring.x()}px)`\n      }\n    },\n    immediate\n  )\n\n  // const springProps = useSpring({\n  //   ...anchorStyle,\n  //   left: anchorStyle.left || 0,\n  //   top: anchorStyle.top || 0,\n  //   config: { mass: 1, tension: 210, friction: 30 },\n  //   immediate: key => {\n  //     if (['left', 'top'].includes(key)) {\n  //       return Number.isNaN(previousAnchor?.style.left)\n  //     }\n\n  //     return false\n  //   },\n  // })\n\n  const show = !!preTooltipOptions\n\n  const latestFit = useLatestWhen(anchor.fit, !!anchor.fit)\n\n  return show && portalEl\n    ? ReactDOM.createPortal(\n        <div\n          ref={tooltipRef}\n          style={{\n            position: anchorStyle.position,\n            opacity: !!focusedDatum ? 1 : 0,\n            transition: 'opacity .3s ease',\n          }}\n        >\n          <div\n            ref={el => setTooltipEl(el)}\n            style={{\n              fontFamily: 'sans-serif',\n              ...(latestFit?.startKey === 'left'\n                ? {\n                    padding: '0 10px',\n                  }\n                : {\n                    padding: '10px 0',\n                  }),\n            }}\n          >\n            {tooltipOptions.render({\n              getOptions,\n              focusedDatum: latestFocusedDatum,\n              primaryAxis,\n              secondaryAxis,\n              getDatumStyle: (datum: Datum<TDatum>) =>\n                getDatumStatusStyle(datum, focusedDatum),\n              anchor,\n            })}\n          </div>\n        </div>,\n        portalEl\n      )\n    : null\n}\n","import React from 'react'\n\n//\nimport { Datum } from '../types'\nimport { getPrimary, translate } from '../utils/Utils'\nimport useChartContext from '../utils/chartContext'\n\nexport default function Voronoi<TDatum>() {\n  const { getOptions, focusedDatumState } = useChartContext<TDatum>()\n\n  const [, setFocusedDatum] = focusedDatumState\n\n  const {\n    onFocusDatum,\n    onClickDatum,\n    tooltip,\n    primaryCursor,\n    secondaryCursor,\n    showVoronoi,\n    groupingMode,\n  } = getOptions()\n\n  const handleFocus = React.useCallback(\n    (datum: Datum<TDatum> | null) => {\n      getOptions().onFocusDatum?.(datum)\n      setFocusedDatum(datum)\n    },\n    [getOptions, setFocusedDatum]\n  )\n\n  const needsVoronoi =\n    onFocusDatum ||\n    onClickDatum ||\n    tooltip ||\n    primaryCursor ||\n    secondaryCursor ||\n    showVoronoi\n\n  // Don't render until we have all dependencies\n  if (!needsVoronoi) {\n    return null\n  }\n\n  const props = {\n    handleFocus,\n  }\n\n  if (groupingMode === 'primary') {\n    return <PrimaryVoronoi {...props} />\n  }\n\n  return null\n\n  // return <ClosestVoronoi {...props} />\n}\n\nfunction PrimaryVoronoi<TDatum>({\n  handleFocus,\n}: {\n  handleFocus: (datum: Datum<TDatum> | null) => void\n}) {\n  const {\n    primaryAxis,\n    series,\n    secondaryAxes,\n    getOptions,\n    gridDimensions,\n    groupedDatums,\n  } = useChartContext<TDatum>()\n\n  return React.useMemo(() => {\n    const columns = series[0].datums\n      .filter(datum => {\n        const primaryValue = primaryAxis.getValue(datum.originalDatum)\n        return primaryValue !== 'undefined' && primaryValue !== null\n      })\n      .map((datum, i, all) => {\n        const prev = all[i - 1]\n        const next = all[i + 1]\n\n        const primaryValue = primaryAxis.getValue(datum.originalDatum)\n        const primaryPx = getPrimary(datum, primaryAxis)\n\n        let range = primaryAxis?.scale.range() ?? [0, 0]\n\n        let [primaryStart, primaryEnd] = range\n\n        if (prev) {\n          const prevPx = getPrimary(prev, primaryAxis)\n          primaryStart = primaryPx - (primaryPx - prevPx) / 2\n        }\n\n        if (next) {\n          const nextPx = getPrimary(next, primaryAxis)\n          primaryEnd = primaryPx + (nextPx - primaryPx) / 2\n        }\n\n        const datums = groupedDatums.get(`${primaryValue}`) ?? []\n\n        datums.sort((a, b) => {\n          const aAxis = secondaryAxes.find(d => d.id === a.secondaryAxisId)\n          const bAxis = secondaryAxes.find(d => d.id === b.secondaryAxisId)\n\n          const aPx =\n            aAxis?.scale(\n              aAxis.stacked\n                ? a.stackData?.[1]\n                : aAxis?.getValue(a.originalDatum)\n            ) ?? NaN\n          const bPx =\n            bAxis?.scale(\n              bAxis.stacked\n                ? b.stackData?.[1]\n                : bAxis?.getValue(b.originalDatum)\n            ) ?? NaN\n\n          return aPx - bPx\n        })\n\n        return {\n          primaryStart,\n          primaryEnd,\n          primaryPx,\n          datumBoundaries: datums\n            .filter(datum => {\n              const secondaryAxis = secondaryAxes.find(\n                d => d.id === datum.secondaryAxisId\n              )\n              const secondaryValue = secondaryAxis?.getValue(\n                datum.originalDatum\n              )\n              return (\n                typeof secondaryValue !== 'undefined' && secondaryValue !== null\n              )\n            })\n            .map((datum, i, all) => {\n              const prev = all[i - 1]\n              const next = all[i + 1]\n\n              const secondaryAxis = secondaryAxes.find(\n                d => d.id === datum.secondaryAxisId\n              )\n\n              if (secondaryAxis?.stacked) {\n                let range = secondaryAxis?.scale.range() ?? [0, 0]\n\n                let stackData = [datum.stackData?.[0], datum.stackData?.[1]]\n\n                if (secondaryAxis?.isVertical) {\n                  range.reverse()\n                  stackData.reverse()\n                }\n\n                let [secondaryStart, secondaryEnd] = range\n\n                if (prev) {\n                  secondaryStart =\n                    secondaryAxis?.scale(stackData[0] ?? NaN) ?? NaN\n                }\n\n                if (next) {\n                  secondaryEnd =\n                    secondaryAxis?.scale(stackData[1] ?? NaN) ?? NaN\n                }\n\n                return {\n                  secondaryStart,\n                  secondaryEnd,\n                  datum,\n                }\n              }\n\n              const value =\n                secondaryAxis?.scale(\n                  secondaryAxis?.getValue(datum.originalDatum)\n                ) ?? NaN\n\n              let range = secondaryAxis?.scale.range() ?? [0, 0]\n\n              if (secondaryAxis?.isVertical) {\n                range.reverse()\n              }\n\n              let [secondaryStart, secondaryEnd] = range\n\n              if (prev) {\n                const prevAxis = secondaryAxes.find(\n                  d => d.id === prev?.secondaryAxisId\n                )\n                const prevValue =\n                  prevAxis?.scale(prevAxis?.getValue(prev.originalDatum)) ?? NaN\n                secondaryStart = value - (value - prevValue) / 2\n              }\n\n              if (next) {\n                const nextAxis = secondaryAxes.find(\n                  d => d.id === next?.secondaryAxisId\n                )\n                const nextValue =\n                  nextAxis?.scale(nextAxis?.getValue(next.originalDatum)) ?? NaN\n                secondaryEnd = value + (nextValue - value) / 2\n              }\n\n              return {\n                secondaryStart,\n                secondaryEnd,\n                datum,\n              }\n            }),\n        }\n      })\n\n    return (\n      <g\n        {...{\n          onMouseLeave: () => handleFocus(null),\n          style: {\n            transform: translate(gridDimensions.gridX, gridDimensions.gridY),\n          },\n        }}\n      >\n        {columns.map(column => {\n          return (\n            <React.Fragment key={column.primaryPx}>\n              {column.datumBoundaries.map(datumBoundary => {\n                const x1 = !primaryAxis.isVertical\n                  ? column.primaryStart\n                  : datumBoundary.secondaryStart\n                const x2 = !primaryAxis.isVertical\n                  ? column.primaryEnd\n                  : datumBoundary.secondaryEnd\n                const y1 = !primaryAxis.isVertical\n                  ? datumBoundary.secondaryStart\n                  : column.primaryStart\n                const y2 = !primaryAxis.isVertical\n                  ? datumBoundary.secondaryEnd\n                  : column.primaryEnd\n\n                const x = Math.min(x1, x2)\n                const y = Math.min(y1, y2)\n                const xEnd = Math.max(x1, x2)\n                const yEnd = Math.max(y1, y2)\n\n                const height = Math.max(yEnd - y, 0)\n                const width = Math.max(xEnd - x, 0)\n\n                return (\n                  <rect\n                    {...{\n                      key: `${column.primaryPx}_${datumBoundary.datum.seriesIndex}`,\n                      x,\n                      y,\n                      width,\n                      height,\n                      className: 'action-voronoi',\n                      onMouseEnter: () => handleFocus(datumBoundary.datum),\n                      style: {\n                        fill: getOptions().dark\n                          ? '#ffffff33'\n                          : 'rgba(0,0,0,0.2)',\n                        strokeWidth: 1,\n                        stroke: getOptions().dark ? 'white' : 'black',\n                        opacity: getOptions().showVoronoi ? 1 : 0,\n                      },\n                    }}\n                  />\n                )\n              })}\n            </React.Fragment>\n          )\n        })}\n      </g>\n    )\n  }, [\n    getOptions,\n    gridDimensions.gridX,\n    gridDimensions.gridY,\n    groupedDatums,\n    handleFocus,\n    primaryAxis,\n    secondaryAxes,\n    series,\n  ])\n}\n\n// function ClosestVoronoi({\n//   stackData,\n//   extent,\n//   handleFocus,\n//   showVoronoi,\n// }: {\n//   stackData: Series[]\n//   extent: number[][]\n//   handleFocus: (datum: Datum | null) => void\n//   showVoronoi: boolean\n// }) {\n//   let polygons = null\n\n//   const voronoiData: { x: number; y: number; datum: Datum }[] = []\n\n//   stackData.forEach(series => {\n//     series.datums\n//       .filter(d => d.defined)\n//       .forEach(datum => {\n//         datum.boundingPoints.forEach(boundingPoint => {\n//           if (\n//             typeof datum.x !== 'number' ||\n//             typeof datum.y !== 'number' ||\n//             Number.isNaN(datum.y) ||\n//             Number.isNaN(datum.x)\n//           ) {\n//             return\n//           }\n//           voronoiData.push({\n//             x: boundingPoint.x,\n//             y: boundingPoint.y,\n//             datum,\n//           })\n//         })\n//       })\n//   })\n\n//   const delaunay = Delaunay.from(\n//     voronoiData,\n//     d => Math.max(d.x, 0),\n//     d => Math.max(d.y, 0)\n//   )\n\n//   const flatExtent = extent.flat().map(d => Math.max(d, 0))\n\n//   const voronoi = delaunay.voronoi(flatExtent)\n\n//   polygons = voronoi.cellPolygons()\n\n//   polygons = Array.from(polygons)\n\n//   return (\n//     <g>\n//       {polygons.map((points, i) => {\n//         const index = points.index\n//         const datum = voronoiData[index].datum\n//         const path = lineFn(points as any) || undefined\n//         return (\n//           <Path\n//             key={i}\n//             d={path}\n//             className=\"action-voronoi\"\n//             onMouseEnter={() => handleFocus(datum)}\n//             onMouseLeave={() => handleFocus(null)}\n//             style={{\n//               fill: randomFill(),\n//               opacity: showVoronoi ? 1 : 0,\n//             }}\n//           />\n//         )\n//       })}\n//     </g>\n//   )\n// }\n","import { groups, sort } from 'd3-array'\nimport { stack, stackOffsetNone } from 'd3-shape'\nimport React, { ComponentPropsWithoutRef } from 'react'\n\nimport useGetLatest from '../hooks/useGetLatest'\nimport useIsomorphicLayoutEffect from '../hooks/useIsomorphicLayoutEffect'\nimport Area from '../seriesTypes/Area'\nimport Bar from '../seriesTypes/Bar'\nimport Line from '../seriesTypes/Line'\n//\nimport {\n  AxesInfo,\n  AxisDimension,\n  AxisDimensions,\n  AxisOptions,\n  AxisOptionsWithScaleType,\n  BuildAxisOptions,\n  ChartContextValue,\n  ChartOptions,\n  Datum,\n  GridDimensions,\n  Measurement,\n  RequiredChartOptions,\n  Series,\n  StackDatum,\n  UserSerie,\n} from '../types'\nimport {\n  materializeStyles,\n  getSeriesStatus,\n  getDatumStatus,\n} from '../utils/Utils'\nimport buildAxisLinear from '../utils/buildAxis.linear'\nimport { ChartContextProvider } from '../utils/chartContext'\nimport AxisLinear from './AxisLinear'\n// import Brush from './Brush'\nimport Cursors from './Cursors'\nimport Tooltip from './Tooltip'\nimport Voronoi from './Voronoi'\n\n//\n\n//\n\nconst defaultColorScheme = [\n  '#0f83ab',\n  '#faa43a',\n  '#ff4e4e',\n  '#53cfc9',\n  '#a2d925',\n  '#decf3f',\n  '#734fe9',\n  '#cd82ad',\n  '#006d92',\n  '#de7c00',\n  '#f33232',\n  '#3f9a80',\n  '#53c200',\n  '#d7af00',\n  '#4c26c9',\n  '#d44d99',\n]\n\nfunction defaultChartOptions<TDatum>(\n  options: ChartOptions<TDatum>\n): RequiredChartOptions<TDatum> {\n  return {\n    ...options,\n    initialWidth: options.initialWidth ?? 300,\n    initialHeight: options.initialHeight ?? 200,\n    getSeriesOrder:\n      options.getSeriesOrder ?? ((series: Series<TDatum>[]) => series),\n    groupingMode: options.groupingMode ?? 'primary',\n    showVoronoi: options.showVoronoi ?? false,\n    defaultColors: options.defaultColors ?? defaultColorScheme,\n    useIntersectionObserver: options.useIntersectionObserver ?? true,\n    intersectionObserverRootMargin:\n      options.intersectionObserverRootMargin ?? '1000px',\n    tooltip: options.tooltip ?? true,\n    primaryCursor: options.primaryCursor ?? true,\n    secondaryCursor: options.secondaryCursor ?? true,\n  }\n}\n\nexport function Chart<TDatum>({\n  options: userOptions,\n  className,\n  style = {},\n  ...rest\n}: ComponentPropsWithoutRef<'div'> & { options: ChartOptions<TDatum> }) {\n  const options = defaultChartOptions(userOptions)\n  const [chartElement, setContainerElement] =\n    React.useState<HTMLDivElement | null>(null)\n\n  const containerEl = chartElement?.parentElement\n\n  const nearestScrollableParent = React.useMemo(() => {\n    const run = (el?: Element | null): Element | null => {\n      if (!el) {\n        return null\n      }\n\n      const grandParent = el.parentElement\n\n      if (!grandParent) {\n        return null\n      }\n\n      if (grandParent.scrollHeight > grandParent.clientHeight) {\n        const { overflow } = window.getComputedStyle(grandParent)\n\n        if (overflow.includes('scroll') || overflow.includes('auto')) {\n          return grandParent\n        }\n      }\n\n      return run(grandParent)\n    }\n\n    return run(containerEl)\n  }, [containerEl])\n\n  const [{ width, height }, setDims] = React.useState({\n    width: options.initialWidth,\n    height: options.initialHeight,\n  })\n\n  useIsomorphicLayoutEffect(() => {\n    if (containerEl) {\n      const computed = window.getComputedStyle(containerEl)\n\n      if (!['relative', 'absolute', 'fixed'].includes(computed.position)) {\n        containerEl.style.position = 'relative'\n      }\n    }\n  }, [containerEl])\n\n  React.useEffect(() => {\n    if (!containerEl) {\n      return\n    }\n\n    const observer = new ResizeObserver(() => {\n      const rect = containerEl?.getBoundingClientRect()\n\n      if (rect) {\n        setDims({\n          width: rect.width,\n          height: rect.height,\n        })\n      }\n    })\n\n    observer.observe(containerEl)\n\n    return () => {\n      observer.unobserve(containerEl)\n    }\n  }, [containerEl])\n\n  const [isIntersecting, setIsIntersecting] = React.useState(true)\n\n  React.useEffect(() => {\n    if (!containerEl || !options.useIntersectionObserver) return\n\n    let observer = new IntersectionObserver(\n      entries => {\n        for (let entry of entries) {\n          if (entry.isIntersecting) {\n            setIsIntersecting(true)\n          } else {\n            setIsIntersecting(false)\n          }\n        }\n      },\n      {\n        root: nearestScrollableParent,\n        rootMargin: options.intersectionObserverRootMargin,\n      }\n    )\n\n    observer.observe(containerEl)\n\n    return () => {\n      observer.unobserve(containerEl)\n    }\n  }, [\n    containerEl,\n    nearestScrollableParent,\n    options.intersectionObserverRootMargin,\n    options.useIntersectionObserver,\n  ])\n\n  return (\n    <div\n      ref={setContainerElement}\n      {...rest}\n      className={`ReactChart ${className || ''}`}\n      style={{\n        ...style,\n        position: 'absolute',\n        width,\n        height,\n      }}\n    >\n      {isIntersecting ? (\n        <ChartInner options={options} {...{ width, height }} />\n      ) : null}\n    </div>\n  )\n}\n\nfunction ChartInner<TDatum>({\n  options,\n  width,\n  height,\n}: {\n  options: RequiredChartOptions<TDatum>\n  width: number\n  height: number\n}) {\n  if (!options.primaryAxis) {\n    throw new Error('A primaryAxis is required')\n  }\n\n  if (!options.secondaryAxes.length) {\n    throw new Error('At least one secondaryAxis is required')\n  }\n\n  const primaryAxisOptions = React.useMemo((): BuildAxisOptions<TDatum> => {\n    const firstValue = getFirstDefinedValue(options.primaryAxis, options.data)\n    const optionsWithScaleType = axisOptionsWithScaleType(\n      options.primaryAxis,\n      firstValue\n    )\n\n    return { position: 'bottom', ...optionsWithScaleType }\n  }, [options.data, options.primaryAxis])\n\n  const secondaryAxesOptions = React.useMemo(() => {\n    return options.secondaryAxes.map(\n      (secondaryAxis, i): BuildAxisOptions<TDatum> => {\n        const firstValue = getFirstDefinedValue(secondaryAxis, options.data)\n\n        const optionsWithScaleType = axisOptionsWithScaleType(\n          secondaryAxis,\n          firstValue\n        )\n\n        if (!optionsWithScaleType.elementType) {\n          if (primaryAxisOptions.scaleType === 'band') {\n            optionsWithScaleType.elementType = 'bar'\n          } else if (optionsWithScaleType.stacked) {\n            optionsWithScaleType.elementType = 'area'\n          }\n        }\n\n        if (\n          typeof optionsWithScaleType.stacked === 'undefined' &&\n          optionsWithScaleType.elementType &&\n          ['bar', 'area'].includes(optionsWithScaleType.elementType)\n        ) {\n          optionsWithScaleType.stacked = true\n        }\n\n        return { position: !i ? 'left' : 'right', ...optionsWithScaleType }\n      }\n    )\n  }, [options.data, options.secondaryAxes, primaryAxisOptions])\n\n  const svgRef = React.useRef<SVGSVGElement>(null)\n  const getOptions = useGetLatest(options)\n\n  const axisDimensionsState = React.useState<AxisDimensions>({\n    left: {},\n    right: {},\n    top: {},\n    bottom: {},\n  })\n\n  const [axisDimensions] = axisDimensionsState\n\n  const focusedDatumState = React.useState<Datum<TDatum> | null>(null)\n  const [focusedDatum] = focusedDatumState\n\n  // useAtom<Datum<TDatum> | null>(focusedDatumAtom)\n\n  const gridDimensions = React.useMemo((): GridDimensions => {\n    // Left\n    const [axesLeftWidth, axesLeftTop, axesLeftBottom] = (\n      ['width', 'top', 'bottom'] as Measurement[]\n    ).map(prop => sumAllDimensionProperties(axisDimensions.left, prop))\n\n    const [axesRightWidth, axesRightTop, axesRightBottom] = (\n      ['width', 'top', 'bottom'] as Measurement[]\n    ).map(prop => sumAllDimensionProperties(axisDimensions.right, prop))\n\n    const [axesTopHeight, axesTopLeft, axesTopRight] = (\n      ['height', 'left', 'right'] as Measurement[]\n    ).map(prop => sumAllDimensionProperties(axisDimensions.top, prop))\n\n    const [axesBottomHeight, axesBottomLeft, axesBottomRight] = (\n      ['height', 'left', 'right'] as Measurement[]\n    ).map(prop => sumAllDimensionProperties(axisDimensions.bottom, prop))\n\n    const gridX = Math.max(axesLeftWidth, axesTopLeft, axesBottomLeft)\n    const gridY = Math.max(axesTopHeight, axesLeftTop, axesRightTop)\n    const gridWidth = Math.max(\n      0,\n      width -\n        Math.max(axesLeftWidth, axesTopLeft, axesBottomLeft) -\n        Math.max(axesRightWidth, axesTopRight, axesBottomRight)\n    )\n    const gridHeight = Math.max(\n      0,\n      height -\n        Math.max(axesTopHeight, axesLeftTop, axesRightTop) -\n        Math.max(axesBottomHeight, axesLeftBottom, axesRightBottom)\n    )\n\n    return { gridX, gridY, gridWidth, gridHeight }\n  }, [width, height, axisDimensions])\n\n  const series = React.useMemo(() => {\n    const series: Series<TDatum>[] = []\n\n    for (\n      let seriesIndex = 0;\n      seriesIndex < options.data.length;\n      seriesIndex++\n    ) {\n      const originalSeries = options.data[seriesIndex]\n      const seriesId = originalSeries.id ?? seriesIndex + ''\n      const seriesLabel = originalSeries.label ?? `Series ${seriesIndex + 1}`\n      const secondaryAxisId = originalSeries.secondaryAxisId\n      const originalDatums = originalSeries.data\n      const datums = []\n\n      for (\n        let datumIndex = 0;\n        datumIndex < originalDatums.length;\n        datumIndex++\n      ) {\n        const originalDatum = originalDatums[datumIndex]\n        datums[datumIndex] = {\n          originalSeries,\n          seriesIndex,\n          seriesId,\n          seriesLabel,\n          secondaryAxisId,\n          index: datumIndex,\n          originalDatum,\n        }\n      }\n\n      series[seriesIndex] = {\n        originalSeries,\n        index: seriesIndex,\n        id: seriesId,\n        label: seriesLabel,\n        secondaryAxisId,\n        datums,\n      }\n    }\n\n    if (secondaryAxesOptions.some(axisOptions => axisOptions.stacked)) {\n      secondaryAxesOptions\n        .filter(d => d.stacked)\n        .forEach(secondaryAxis => {\n          const axisSeries = series.filter(\n            s => s.secondaryAxisId === secondaryAxis.id\n          )\n          const seriesIndices = Object.keys(axisSeries)\n          const stacker = stack()\n            .keys(seriesIndices)\n            .value((_, seriesIndex, index) => {\n              const val = secondaryAxis.getValue(\n                axisSeries[Number(seriesIndex)].datums[index].originalDatum\n              )\n\n              if (typeof val === 'undefined' || val === null) {\n                return 0\n              }\n\n              return val\n            })\n            .offset(secondaryAxis.stackOffset ?? stackOffsetNone)\n\n          const stacked = stacker(\n            Array.from({\n              length: axisSeries.sort(\n                (a, b) => b.datums.length - a.datums.length\n              )[0].datums.length,\n            })\n          )\n\n          stacked.forEach((s, sIndex) => {\n            s.forEach((datum, i) => {\n              // @ts-ignore\n              datum.data = axisSeries[sIndex].datums[i]\n\n              axisSeries[sIndex].datums[i].stackData =\n                datum as unknown as StackDatum<TDatum>\n            })\n          })\n        })\n    }\n\n    return series\n  }, [options.data, secondaryAxesOptions])\n\n  const primaryAxis = React.useMemo(() => {\n    return buildAxisLinear<TDatum>(\n      true,\n      primaryAxisOptions,\n      series,\n      gridDimensions,\n      width,\n      height\n    )\n  }, [gridDimensions, height, primaryAxisOptions, series, width])\n\n  const secondaryAxes = React.useMemo(() => {\n    return secondaryAxesOptions.map(secondaryAxis => {\n      return buildAxisLinear<TDatum>(\n        false,\n        secondaryAxis,\n        series,\n        gridDimensions,\n        width,\n        height\n      )\n    })\n  }, [gridDimensions, height, secondaryAxesOptions, series, width])\n\n  const axesInfo: AxesInfo = React.useMemo(() => {\n    // Make sure we're mapping x and y to the correct axes\n    const xKey = primaryAxis.isVertical ? 'secondary' : 'primary'\n    const yKey = primaryAxis.isVertical ? 'primary' : 'secondary'\n\n    return {\n      xKey,\n      yKey,\n    }\n  }, [primaryAxis])\n\n  const groupedDatums = React.useMemo(() => {\n    const groupedDatums = new Map<any, Datum<TDatum>[]>()\n\n    const allDatums = series.map(s => s.datums).flat(2)\n\n    allDatums.forEach(datum => {\n      const primaryValue = `${primaryAxis.getValue(datum.originalDatum)}`\n\n      if (!groupedDatums.has(primaryValue)) {\n        groupedDatums.set(primaryValue, [])\n      }\n\n      groupedDatums.get(primaryValue)!.push(datum)\n    })\n\n    allDatums.forEach(datum => {\n      const primaryValue = `${primaryAxis.getValue(datum.originalDatum)}`\n\n      datum.group = groupedDatums.get(primaryValue)\n    })\n\n    return groupedDatums\n  }, [primaryAxis, series])\n\n  const getSeriesStatusStyle = React.useCallback(\n    (series: Series<TDatum>, focusedDatum: Datum<TDatum> | null) => {\n      const base = {\n        color:\n          getOptions().defaultColors[\n            series.index % (getOptions().defaultColors.length - 1)\n          ],\n      }\n\n      const status = getSeriesStatus(series, focusedDatum)\n      const statusStyles = getOptions().getSeriesStyle?.(series, status) ?? {}\n      series.style = materializeStyles(statusStyles, base)\n      return series.style\n    },\n    [getOptions]\n  )\n\n  const getDatumStatusStyle = React.useCallback(\n    (datum: Datum<TDatum>, focusedDatum: Datum<TDatum> | null) => {\n      const base = {\n        ...series[datum.seriesIndex]?.style,\n        color:\n          getOptions().defaultColors[\n            datum.seriesIndex % (getOptions().defaultColors.length - 1)\n          ],\n      }\n\n      const status = getDatumStatus(datum as Datum<TDatum>, focusedDatum)\n      const statusStyles =\n        getOptions().getDatumStyle?.(datum as Datum<TDatum>, status) ?? {}\n\n      datum.style = materializeStyles(statusStyles, base)\n\n      return datum.style\n    },\n    [getOptions, series]\n  )\n\n  // Reverse the stack order for proper z-indexing\n  let orderedSeries = React.useMemo(() => {\n    const reversedSeries = [...series].reverse()\n\n    return getOptions().getSeriesOrder(reversedSeries)\n  }, [getOptions, series])\n\n  useIsomorphicLayoutEffect(() => {\n    if (\n      svgRef.current &&\n      svgRef.current.parentElement &&\n      !svgRef.current.parentElement.style.position\n    ) {\n      svgRef.current.parentElement.style.position = 'relative'\n    }\n  })\n\n  const contextValue: ChartContextValue<TDatum> = {\n    getOptions,\n    gridDimensions,\n    primaryAxis,\n    secondaryAxes,\n    axesInfo,\n    series,\n    orderedSeries,\n    groupedDatums,\n    width,\n    height,\n    getSeriesStatusStyle,\n    getDatumStatusStyle,\n    axisDimensionsState,\n    focusedDatumState,\n    svgRef,\n  }\n\n  const seriesByAxisId = React.useMemo(\n    () =>\n      sort(\n        groups(orderedSeries, d => d.secondaryAxisId),\n        ([key]) => secondaryAxes.findIndex(axis => axis.id === key)\n      ),\n    [orderedSeries, secondaryAxes]\n  )\n\n  let memoizeSeries = !options.getDatumStyle && !options.getSeriesStyle\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  let getSeriesInfo = () => ({\n    primaryAxis,\n    secondaryAxes,\n    seriesByAxisId,\n  })\n\n  let getMemoizedSeriesInfo = React.useCallback(\n    () => ({\n      primaryAxis,\n      secondaryAxes,\n      seriesByAxisId,\n    }),\n    [primaryAxis, secondaryAxes, seriesByAxisId]\n  )\n\n  if (memoizeSeries) {\n    getSeriesInfo = getMemoizedSeriesInfo\n  }\n\n  const seriesEl = React.useMemo(() => {\n    const { primaryAxis, secondaryAxes, seriesByAxisId } = getSeriesInfo()\n    return seriesByAxisId.map(([axisId, series]) => {\n      const secondaryAxis = secondaryAxes.find(d => d.id === axisId)\n\n      if (!secondaryAxis) {\n        return null\n      }\n\n      const { elementType } = secondaryAxis\n      const Component = (() => {\n        if (elementType === 'line') {\n          return Line\n        }\n        if (elementType === 'bar') {\n          return Bar\n        }\n        if (elementType === 'area') {\n          return Area\n        }\n        throw new Error('Invalid elementType')\n      })()\n\n      return (\n        <Component\n          key={axisId ?? '__default__'}\n          primaryAxis={primaryAxis}\n          secondaryAxis={secondaryAxis}\n          series={series}\n        />\n      )\n    })\n  }, [getSeriesInfo])\n\n  return (\n    <ChartContextProvider value={useGetLatest(contextValue)}>\n      <div\n        style={{\n          fontFamily: 'sans-serif',\n        }}\n      >\n        <svg\n          ref={svgRef}\n          style={{\n            width,\n            height,\n            overflow: options.brush ? 'hidden' : 'visible',\n          }}\n          onClick={e => options.onClickDatum?.(focusedDatum, e)}\n        >\n          <g\n            className=\"Series\"\n            style={{\n              pointerEvents: 'none',\n            }}\n          >\n            {seriesEl}\n          </g>\n          <g className=\"axes\">\n            {[primaryAxis, ...secondaryAxes].map(axis => (\n              <AxisLinear key={[axis.position, axis.id].join('')} {...axis} />\n            ))}\n          </g>\n          <Voronoi />\n          {options.renderSVG?.() ?? null}\n        </svg>\n        <Cursors />\n        <Tooltip />\n      </div>\n    </ChartContextProvider>\n  )\n}\n\nfunction sumAllDimensionProperties(\n  axisDimensions: Record<string, AxisDimension>,\n  side: Measurement\n) {\n  let sum = 0\n\n  Object.keys(axisDimensions).forEach(axisId => {\n    sum += axisDimensions[axisId]?.[side] || 0\n  })\n\n  return sum\n}\n\nfunction getFirstDefinedValue<TDatum>(\n  options: AxisOptions<TDatum>,\n  data: UserSerie<TDatum>[]\n) {\n  let firstDefinedValue: Date | number | string | undefined\n\n  data.some(serie => {\n    return serie.data.some(originalDatum => {\n      const value = options.getValue(originalDatum)\n      if (value !== null && typeof value !== 'undefined') {\n        firstDefinedValue = value\n        return true\n      }\n    })\n  })\n\n  return firstDefinedValue\n}\n\nfunction axisOptionsWithScaleType<TDatum>(\n  options: AxisOptions<TDatum>,\n  firstValue: Date | number | string | undefined\n): AxisOptionsWithScaleType<TDatum> {\n  let scaleType = options.scaleType\n\n  if (!options.scaleType) {\n    if (typeof firstValue === 'number') {\n      scaleType = 'linear'\n    } else if (typeof (firstValue as Date)?.getMonth === 'function') {\n      scaleType = 'time'\n    } else if (\n      typeof firstValue === 'string' ||\n      typeof firstValue === 'boolean'\n    ) {\n      scaleType = 'band'\n    } else {\n      throw new Error('Invalid scale type: Unable to infer type from data')\n    }\n  }\n\n  return { ...options, scaleType } as AxisOptionsWithScaleType<TDatum>\n}\n"]},"metadata":{},"sourceType":"script"}